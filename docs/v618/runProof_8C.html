<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tutorials/proof/runProof.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_29929efa3f3fb53099f7c28d426fadac.html">proof</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">runProof.C File Reference<div class="ingroups"><a class="el" href="group__proof.html">PROOF</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Macro to run examples of analysis on PROOF, corresponding to the <a class="el" href="classTSelector.html" title="A TSelector object is used by the TTree::Draw, TTree::Scan, TTree::Process to navigate in a TTree and...">TSelector</a> implementations found under &lt;ROOTSYS&gt;/tutorials/proof . </p>
<p>This macro uses an existing PROOF session or starts one at the indicated URL. In the case non existing PROOF session is found and no URL is given, the macro tries to start a local PROOF session.</p>
<p>To run the macro:</p>
<p>root[] .L <a class="el" href="runProof_8C.html" title="Macro to run examples of analysis on PROOF, corresponding to the TSelector implementations found unde...">proof/runProof.C</a>+ root[] runProof("&lt;analysis&gt;")</p>
<p>Currently available analysis are (to see how all this really works check the scope for the specified option inside the macro):</p>
<ol type="1">
<li><p class="startli">"simple"</p>
<p class="startli">Selector: ProofSimple.h.C</p>
<p class="startli">root[] runProof("simple")</p>
<p class="startli">This will create a local PROOF session and run an analysis filling 100 histos with 100000 gaussian random numbers, and displaying them in a canvas with 100 pads (10x10). The number of histograms can be passed as argument 'nhist' to 'simple', e.g. to fill 16 histos with 1000000 entries use</p>
<p class="startli">root[] runProof("simple(nevt=1000000,nhist=16)")</p>
<p class="startli">The argument nhist3 controls the creation of 3d histos to simulate merging load. By default, no 3D hitogram is created.</p>
</li>
<li><p class="startli">"h1"</p>
<p class="startli">Selector: tutorials/tree/h1analysis.h.C</p>
<p class="startli">root[] runProof("h1")</p>
<p class="startli">This runs the 'famous' H1 analysis from $ROOTSYS/tree/h1analysis.C.h. By default the data are read from the HTTP server at root.cern.ch, the data source can be changed via the argument 'h1src', e.g.</p>
<p class="startli">root[] runProof("h1,h1src=/data/h1")</p>
<p class="startli">(the directory specified must contain the 4 H1 files).</p>
<p class="startli">The 'h1' example is also used to show how to use entry-lists in PROOF. To fill the list for the events used for the final plots add the option 'fillList':</p>
<p class="startli">root[] runProof("h1,fillList")</p>
<p class="startli">To use the list previously created for the events used for the final plots add the option 'useList':</p>
<p class="startli">root[] runProof("h1,useList")</p>
</li>
<li><p class="startli">"event"</p>
<p class="startli">Selector: ProofEvent.h,.C</p>
<p class="startli">This is an example of using PROOF par files. It runs event generation and simple analysis based on the 'Event' class found under test.</p>
<p class="startli">root[] runProof("event")</p>
</li>
<li><p class="startli">"eventproc"</p>
<p class="startli">Selector: ProofEventProc.h.C</p>
<p class="startli">This is an example of using PROOF par files and process 'event' data from the <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a> HTTP server. It runs the ProofEventProc selector which is derived from the EventTree_Proc one found under test/ProofBench. The following specific arguments are available:</p><ul>
<li>'readall' to read the whole event, by default only the branches needed by the analysis are read (read 25% more bytes)</li>
<li>'datasrc=&lt;dir-with-files&gt;' to read the files from another server, the files must be named 'event_&lt;num&gt;.root' where &lt;num&gt;=1,2,... or</li>
<li>'datasrc=&lt;file-with-files&gt;' to take the file content from a text file, specified one file per line; usefull when testing differences between several sources and distributions</li>
<li>'files=N' to change the number of files to be analysed (default is 10, max is 50 for the HTTP server).</li>
<li>'uneven' to process uneven entries from files following the scheme {50000,5000,5000,5000,5000} and so on</li>
</ul>
<p class="startli">root[] runProof("eventproc")</p>
</li>
<li><p class="startli">"pythia8"</p>
<p class="startli">Selector: ProofPythia.h.C</p>
<p class="startli">This runs Pythia8 generation based on main03.cc example in Pythia 8.1</p>
<p class="startli">To run this analysis <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a> must be configured with pythia8.</p>
<p class="startli">Note that before executing this analysis, the env variable PYTHIA8 must point to the pythia8100 (or newer) directory, in particular, $PYTHIA8/xmldoc must contain the file Index.xml. The tutorial assumes that the Pythia8 directory is the same on all machines, i.e. local and worker ones.</p>
<p class="startli">root[] runProof("pythia8")</p>
</li>
<li><p class="startli">"ntuple"</p>
<p class="startli">Selector: ProofNtuple.h.C</p>
<p class="startli">This is an example of final merging via files created on the workers, using <a class="el" href="classTProofOutputFile.html" title="Class to steer the merging of files produced on the workers. ">TProofOutputFile</a>. The final file is called ProofNtuple.root and it is created in the directory where the tutorial is run. If the PROOF cluster is remote, the file is received by a local xrootd daemon started for the purpose. Because of this, this example can be run only on unix clients.</p>
<p class="startli">root[] runProof("ntuple")</p>
<p class="startli">By default the random numbers are generate anew. There is the possibility use a file of random numbers (to have reproducible results) by specify the option 'inputrndm', e.g.</p>
<p class="startli">root[] runProof("ntuple(inputrndm)")</p>
<p class="startli">By default the output will be saved in the local file SimpleNtuple.root; location and name of the file can be changed via the argument 'outfile', e.g.</p>
<p class="startli">root[] runProof("simplefile(outfile=/data0/testntuple.root)") root[] runProof("simplefile(outfile=root://aserver//data/testntuple.root)")</p>
</li>
<li><p class="startli">"dataset"</p>
<p class="startli">Selector: ProofNtuple.h.C</p>
<p class="startli">This is an example of automatic creation of a dataset from files created on the workers, using <a class="el" href="classTProofOutputFile.html" title="Class to steer the merging of files produced on the workers. ">TProofOutputFile</a>. The dataset is called testNtuple and it is automatically registered and verified. The files contain the same ntuple as in previous example/tutorial 6 (the same selector ProofNTuple is used with a slightly different configuration). The dataset is then used to produce the same plot as in 5 but using the DrawSelect methods of PROOF, which also show how to set style, color and other drawing attributes in PROOF. Depending on the relative worker perforance, some of the produced files may result in having no entries. If this happens, the file will be added to the missing (skipped) file list. Increasing the number of events (via nevt=...) typically solves this issue.</p>
<p class="startli">root[] runProof("dataset")</p>
</li>
<li><p class="startli">"friends"</p>
<p class="startli">Selectors: ProofFriends.h(.C), ProofAux.h(.C)</p>
<p class="startli">This is an example of <a class="el" href="classTTree.html" title="A TTree represents a columnar dataset. ">TTree</a> friend processing in PROOF. It also shows how to use the <a class="el" href="classTPacketizerFile.html" title="This packetizer generates packets which contain a single file path to be used in process. ">TPacketizerFile</a> to steer creation of files.</p>
<p class="startli">root[] runProof("friends")</p>
<p class="startli">The trees are by default created in separate files; to create them in the same file use option 'samefile', e.g.</p>
<p class="startli">root[] runProof("friends(samefile)")</p>
</li>
<li><p class="startli">"simplefile"</p>
<p class="startli">Selector: ProofSimpleFile.h.C</p>
<p class="startli">root[] runProof("simplefile")</p>
<p class="startli">This will create a local PROOF session and run an analysis filling 16+16 histos with 100000 gaussian random numbers. The merging of these histos goes via file; 16 histos are saved in the top directory, the other 16 into a subdirectory called 'blue'. The final display is done in two canvanses, one for each set of histograms and with 16 pads each (4x4). The number of histograms in each set can be passed as argument 'nhist' to 'simplefile', e.g. to fill 25 histos with 1000000 entries use</p>
<p class="startli">root[] runProof("simplefile(nevt=1000000,nhist=25)")</p>
<p class="startli">By default the output will be saved in the local file SimpleFile.root; location and name of the file can be changed via the argument 'outfile', e.g.</p>
<p class="startli">root[] runProof("simplefile(outfile=/data0/testsimple.root)") root[] runProof("simplefile(outfile=root://aserver//data/testsimple.root)")</p>
</li>
<li><p class="startli">"stdvec"</p>
<p class="startli">Selector: ProofStdVect.h.C</p>
<p class="startli">This is an example of using standard vectors (vector&lt;vector&lt;bool&gt; &gt; and vector&lt;vector&lt;float&gt; &gt;) in a <a class="el" href="classTSelector.html" title="A TSelector object is used by the TTree::Draw, TTree::Scan, TTree::Process to navigate in a TTree and...">TSelector</a>. The same selector is run twice: in 'create' mode it creates a dataset with the tree 'stdvec' containing 3 branches, a vector&lt;vector&lt;bool&gt; &gt; and two vector&lt;vector&lt;float&gt; &gt;. The tree is saved into a file on each worker and a dataset is created with these files (the dataset is called 'TestStdVect'); in 'read' mode the dataset is read and a couple fo histograms filled and displayed.</p>
<p class="startli">root[] runProof("stdvec")</p>
</li>
</ol>
<h2>General arguments </h2>
<p>The following arguments are valid for all examples (the ones specific to each tutorial have been explained above)</p>
<ol type="1">
<li><p class="startli">ACLiC mode</p>
<p class="startli">By default all processing is done with ACLiC mode '+', i.e. compile if changed. However, this may lead to problems if the available selector libs were compiled in previous sessions with a different set of loaded libraries (this is a general problem in <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a>). When this happens the best solution is to force recompilation (ACLiC mode '++'). To do this just add one or more '+' to the name of the tutorial, e.g. runProof("simple++")</p>
</li>
<li><p class="startli">debug=[what:]level</p>
<p class="startli">Controls verbosity; 'level' is an integer number and the optional string 'what' one or more of the enum names in TProofDebug.h . e.g. runProof("eventproc(debug=kPacketizer|kCollect:2)") runs 'eventproc' enabling all printouts matching <a class="el" href="classTProofDebug.html#a71a38a507d22cb80172c1f59efab7939acbfbc3ec63d4d87a47b2be3c29ed9510">TProofDebug::kPacketizer</a> and having level equal or larger than 2 .</p>
</li>
<li><p class="startli">nevt=N and/or first=F</p>
<p class="startli">Set the number of entries to N, eventually (when it makes sense, i.e. when processing existing files) starting from F e.g. runProof("simple(nevt=1000000000)") runs simple with 1000000000 runProof("eventproc(first=65000)") runs eventproc processing starting with event 65000 runProof("eventproc(nevt=100000,first=65000)") runs eventproc processing 100000 events starting with event 65000</p>
</li>
<li><p class="startli">asyn</p>
<p class="startli">Run in non blocking mode e.g. root[] runProof("h1(asyn)")</p>
</li>
<li><p class="startli">nwrk=N</p>
<p class="startli">Set the number of active workers to N, usefull to test performance on a remote cluster where control about the number of workers is not possible, e.g. runProof("event(nwrk=2)") runs 'event' with 2 workers.</p>
</li>
<li><p class="startli">punzip</p>
<p class="startli">Use parallel unzipping in reading files where relevant e.g. root[] runProof("eventproc(punzip)")</p>
</li>
<li><p class="startli">cache=&lt;bytes&gt; (or &lt;kbytes&gt;K or &lt;mbytes&gt;M)</p>
<p class="startli">Change the size of the tree cache; 0 or &lt;0 disables the cache, value cane be in bytes (no suffix), kilobytes (suffix 'K') or megabytes (suffix 'M'), e.g. root[] runProof("eventproc(cache=0)")</p>
</li>
<li><p class="startli">submergers[=S]</p>
<p class="startli">Enabling merging via S submergers or the optimal number if S is not specified, e.g. root[] runProof("simple(hist=1000,submergers)")</p>
</li>
<li><p class="startli">rateest=average</p>
<p class="startli">Enable processed entries estimation for constant progress reporting based on the measured average. This may screw up the progress bar in some cases, which is the reason why it is not on by default . e.g. root[] runProof("eventproc(rateest=average)")</p>
</li>
<li><p class="startli">perftree=perftreefile.root</p>
<p class="startli">Generate the perfomance tree and save it to file 'perftreefile.root', e.g. root[] runProof("eventproc(perftree=perftreefile.root)")</p>
</li>
<li><p class="startli">feedback=name1[,name2,name3,...]|off</p>
<p class="startli">Enable feedback for the specified names or switch it off; by default it is enabled for the 'stats' histograms (events,packest, packets-being processed).</p>
</li>
</ol>
<p>In all cases, to run on a remote PROOF cluster, the master URL must be passed as second argument; e.g.</p>
<p>root[] runProof("simple","master.do.main")</p>
<p>A rough parsing of the URL is done to determine the locality of the cluster. If using a tunnel the URL can start by localhost even for external clusters: in such cases the default locality determination will be wrong, so one has to tell explicity that the cluster is external via the option field, e.g.</p>
<p>root[] runProof("simple","localhost:33002/?external")</p>
<p>In the case of local running it is possible to specify the number of workers to start as third argument (the default is the number of cores of the machine), e.g.</p>
<p>root[] runProof("simple",0,4)</p>
<p>will start 4 workers. Note that the real number of workers is changed only the first time you call runProof into a <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a> session. Following calls can reduce the number of active workers, but not increase it. For example, in the same session of the call above starting 4 workers, this</p>
<p>root[] runProof("simple",0,8)</p>
<p>will still use 4 workers, while this</p>
<p>root[] runProof("simple",0,2)</p>
<p>will disable 2 workers and use the other 2.</p>
<p>Finally, it is possible to pass as 4th argument a list of objects to be added to the input list to further control the PROOF behaviour:</p>
<p>root [] <a class="el" href="classTList.html" title="A doubly linked list. ">TList</a> *ins = new <a class="el" href="classTList.html" title="A doubly linked list. ">TList</a> root [] ins-&gt;Add(new TParameter&lt;Int_t&gt;("MyParm", 3)) root [] runProof("simple",0,4,ins)</p>
<p>the content of 'ins' will then be copied to the input list before processing.</p>
<div class="fragment"><div class="line"></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TCanvas_8h.html">TCanvas.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TChain_8h.html">TChain.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TDSet_8h.html">TDSet.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TEnv_8h.html">TEnv.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TEntryList_8h.html">TEntryList.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TFile_8h.html">TFile.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TFileCollection_8h.html">TFileCollection.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TFrame_8h.html">TFrame.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="THashList_8h.html">THashList.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TList_8h.html">TList.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TPad_8h.html">TPad.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TPaveText_8h.html">TPaveText.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TProof_8h.html">TProof.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TProofDebug_8h.html">TProofDebug.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TString_8h.html">TString.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="getProof_8C.html">getProof.C</a>&quot;</span></div><div class="line"><span class="keywordtype">void</span> plotNtuple(<a class="code" href="classTProof.html">TProof</a> *p, <span class="keyword">const</span> <span class="keywordtype">char</span> *ds, <span class="keyword">const</span> <span class="keywordtype">char</span> *ntptitle);</div><div class="line"><span class="keywordtype">void</span> SavePerfTree(<a class="code" href="classTProof.html">TProof</a> *proof, <span class="keyword">const</span> <span class="keywordtype">char</span> *fn);</div><div class="line"></div><div class="line"><span class="comment">// Variable used to locate the Pythia8 directory for the Pythia8 example</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *pythia8dir = 0;</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *pythia8data = 0;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> runProof(<span class="keyword">const</span> <span class="keywordtype">char</span> *what = <span class="stringliteral">&quot;simple&quot;</span>,</div><div class="line">              <span class="keyword">const</span> <span class="keywordtype">char</span> *masterurl = <span class="stringliteral">&quot;proof://localhost:40000&quot;</span>,</div><div class="line">              <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nwrks = -1, <a class="code" href="classTList.html">TList</a> *ins = 0)</div><div class="line">{</div><div class="line"></div><div class="line">   <a class="code" href="TEnv_8h.html#a11202e6eff8457ae349087e34c0549c9">gEnv</a>-&gt;<a class="code" href="classTEnv.html#a9a475d58efbf47b9304783b0bb156461">SetValue</a>(<span class="stringliteral">&quot;Proof.StatsHist&quot;</span>,1);</div><div class="line"></div><div class="line">   <a class="code" href="classTString.html">TString</a> u(masterurl);</div><div class="line">   <span class="comment">// Determine locality of this session</span></div><div class="line">   <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> isProofLocal = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line">   <span class="keywordflow">if</span> (!u.IsNull() &amp;&amp; u != <span class="stringliteral">&quot;lite://&quot;</span>) {</div><div class="line">      <a class="code" href="classTUrl.html">TUrl</a> uu(masterurl);</div><div class="line">      <a class="code" href="classTString.html">TString</a> uopts(uu.GetOptions());</div><div class="line">      <span class="keywordflow">if</span> ((!strcmp(uu.GetHost(), <span class="stringliteral">&quot;localhost&quot;</span>) &amp;&amp; !uopts.Contains(<span class="stringliteral">&quot;external&quot;</span>)) ||</div><div class="line">         !strcmp(uu.GetHostFQDN(), <a class="code" href="classTUrl.html">TUrl</a>(<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#aab4a8ac24bc42a135aa6584be2cb415c">HostName</a>()).GetHostFQDN())) {</div><div class="line">         isProofLocal = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line">      }</div><div class="line">      <span class="comment">// Adjust URL</span></div><div class="line">      <span class="keywordflow">if</span> (!u.BeginsWith(uu.GetProtocol())) uu.SetProtocol(<span class="stringliteral">&quot;proof&quot;</span>);</div><div class="line">      uopts.ReplaceAll(<span class="stringliteral">&quot;external&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">      uu.SetOptions(uopts.Data());</div><div class="line">      u = uu.GetUrl();</div><div class="line">   }</div><div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span> *url = u.Data();</div><div class="line"></div><div class="line">   <span class="comment">// Temp dir for PROOF tutorials</span></div><div class="line">   <span class="comment">// Force &quot;/tmp/&lt;user&gt;&quot; whenever possible to avoid length problems on MacOsX</span></div><div class="line">   <a class="code" href="classTString.html">TString</a> tmpdir(<span class="stringliteral">&quot;/tmp&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(tmpdir, <a class="code" href="TSystem_8h.html#a5ea512734402935ca6e68723f6398862a6bbfbcbc91e3111f9439d326d5520c22">kWritePermission</a>)) tmpdir = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#af7a7b489e21d45c75948e1cc58bdf73c">TempDirectory</a>();</div><div class="line">   <a class="code" href="classTString.html">TString</a> <a class="code" href="namespaceTGeant4Unit.html#a51e773a12804883ce6e6702e975a636b">us</a>;</div><div class="line">   <a class="code" href="structUserGroup__t.html">UserGroup_t</a> *ug = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#af2028da5e7644a078cc7fb1160c1024c">GetUserInfo</a>(<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#adfcda8afc1264159bb4edff77199e475">GetUid</a>());</div><div class="line">   <span class="keywordflow">if</span> (!ug) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not get user info&quot;</span>);</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line">   <a class="code" href="namespaceTGeant4Unit.html#a51e773a12804883ce6e6702e975a636b">us</a>.Form(<span class="stringliteral">&quot;/%s&quot;</span>, ug-&gt;<a class="code" href="structUserGroup__t.html#a88e91a97f4f89643973b41466774daf1">fUser</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">   <span class="keywordflow">if</span> (!tmpdir.EndsWith(<a class="code" href="namespaceTGeant4Unit.html#a51e773a12804883ce6e6702e975a636b">us</a>.Data())) tmpdir += <a class="code" href="namespaceTGeant4Unit.html#a51e773a12804883ce6e6702e975a636b">us</a>;</div><div class="line">   <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a5bd72c8b0e57e0aed8b418adf4650475">mkdir</a>(tmpdir.Data(), <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line">   <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(tmpdir, <a class="code" href="TSystem_8h.html#a5ea512734402935ca6e68723f6398862a6bbfbcbc91e3111f9439d326d5520c22">kWritePermission</a>)) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: unable to get a writable tutorial directory (tried: %s)&quot;</span></div><div class="line">             <span class="stringliteral">&quot; - cannot continue&quot;</span>, tmpdir.Data());</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line">   <a class="code" href="classTString.html">TString</a> tutdir = <a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/.proof-tutorial&quot;</span>, tmpdir.Data());</div><div class="line">   <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(tutdir)) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: creating the temporary directory&quot;</span></div><div class="line">                <span class="stringliteral">&quot; for the tutorial (%s) ... &quot;</span>, tutdir.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a5bd72c8b0e57e0aed8b418adf4650475">mkdir</a>(tutdir, <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>) != 0) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not assert / create the temporary directory&quot;</span></div><div class="line">                <span class="stringliteral">&quot; for the tutorial (%s)&quot;</span>, tutdir.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// For the Pythia8 example we need to set some environment variable;</span></div><div class="line">   <span class="comment">// This must be done BEFORE starting the PROOF session</span></div><div class="line">   <span class="keywordflow">if</span> (what &amp;&amp; !strncmp(what, <span class="stringliteral">&quot;pythia8&quot;</span>, 7)) {</div><div class="line">      <span class="comment">// We assume that the remote location of Pythia8 is the same as the local one</span></div><div class="line">      pythia8dir = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a4ae57a039e0d61296c386e89d6e4dce8">Getenv</a>(<span class="stringliteral">&quot;PYTHIA8&quot;</span>);</div><div class="line">      <span class="keywordflow">if</span> (!pythia8dir || strlen(pythia8dir) &lt;= 0) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: pythia8: environment variable PYTHIA8 undefined:&quot;</span></div><div class="line">                  <span class="stringliteral">&quot; it must contain the path to pythia81xx root directory (local and remote) !&quot;</span>);</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">      pythia8data = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a4ae57a039e0d61296c386e89d6e4dce8">Getenv</a>(<span class="stringliteral">&quot;PYTHIA8DATA&quot;</span>);</div><div class="line">      <span class="keywordflow">if</span> (!pythia8data || strlen(pythia8data) &lt;= 0) {</div><div class="line">         <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#ae0c40898c7702bf4592bb2de7a65a70b">Setenv</a>(<span class="stringliteral">&quot;PYTHIA8DATA&quot;</span>, <a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/xmldoc&quot;</span>, pythia8dir));</div><div class="line">         pythia8data = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a4ae57a039e0d61296c386e89d6e4dce8">Getenv</a>(<span class="stringliteral">&quot;PYTHIA8DATA&quot;</span>);</div><div class="line">         <span class="keywordflow">if</span> (!pythia8data || strlen(pythia8data) &lt;= 0) {</div><div class="line">            <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: pythia8: environment variable PYTHIA8DATA undefined:&quot;</span></div><div class="line">                   <span class="stringliteral">&quot; it one must contain the path to pythia81xx/xmldoc&quot;</span></div><div class="line">                   <span class="stringliteral">&quot; subdirectory (local and remote) !&quot;</span>);</div><div class="line">            <span class="keywordflow">return</span>;</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <a class="code" href="classTString.html">TString</a> env = <a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;echo export PYTHIA8=%s; export PYTHIA8DATA=%s&quot;</span>,</div><div class="line">                         pythia8dir, pythia8data);</div><div class="line">      <a class="code" href="classTProof.html#a60720f5f2c01cb830f5d749c6d5d5337">TProof::AddEnvVar</a>(<span class="stringliteral">&quot;PROOF_INITCMD&quot;</span>, env.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">   }</div><div class="line"></div><div class="line">   <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;tutorial dir:\t%s&quot;</span>, tutdir.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">   <span class="comment">// Get the PROOF Session</span></div><div class="line">   <a class="code" href="classTProof.html">TProof</a> *proof = getProof(url, nwrks, tutdir.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), <span class="stringliteral">&quot;ask&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> (!proof) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not start/attach a PROOF session&quot;</span>);</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Refine locality (PROOF-Lite always local)</span></div><div class="line">   <span class="keywordflow">if</span> (proof-&gt;IsLite()) isProofLocal = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef WIN32</span></div><div class="line">   <span class="keywordflow">if</span> (isProofLocal &amp;&amp; what &amp;&amp; !strcmp(what, <span class="stringliteral">&quot;ntuple&quot;</span>, 6)) {</div><div class="line">      <span class="comment">// Not support on windows</span></div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: the &#39;ntuple&#39; example needs to run xrootd to receive the output file, \n&quot;</span></div><div class="line">             <span class="stringliteral">&quot;          but xrootd is not supported on Windows - cannot continue&quot;</span>);</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">   <a class="code" href="classTString.html">TString</a> proofsessions(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/sessions&quot;</span>,tutdir.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>()));</div><div class="line">   <span class="comment">// Save tag of the used session</span></div><div class="line">   FILE *fs = fopen(proofsessions.Data(), <span class="stringliteral">&quot;a&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> (!fs) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not create files for sessions tags&quot;</span>);</div><div class="line">   } <span class="keywordflow">else</span> {</div><div class="line">      fprintf(fs,<span class="stringliteral">&quot;session-%s\n&quot;</span>, proof-&gt;GetSessionTag());</div><div class="line">      fclose(fs);</div><div class="line">   }</div><div class="line">   <span class="keywordflow">if</span> (!proof) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not start/attach a PROOF session&quot;</span>);</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Set the number of workers (may only reduce the number of active workers</span></div><div class="line">   <span class="comment">// in the session)</span></div><div class="line">   <span class="keywordflow">if</span> (nwrks &gt; 0)</div><div class="line">      proof-&gt;SetParallel(nwrks);</div><div class="line"></div><div class="line">   <span class="comment">// Where is the code to run</span></div><div class="line">   <span class="keywordtype">char</span> *rootbin = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#ac6c754bc2ea46cf01473c6b3439200f4">Which</a>(<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a4ae57a039e0d61296c386e89d6e4dce8">Getenv</a>(<span class="stringliteral">&quot;PATH&quot;</span>), <span class="stringliteral">&quot;root.exe&quot;</span>, <a class="code" href="TSystem_8h.html#a5ea512734402935ca6e68723f6398862a4e0f29e362565d37458b75699a46e53f">kExecutePermission</a>);</div><div class="line">   <span class="keywordflow">if</span> (!rootbin) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: root.exe not found: please check the environment!&quot;</span>);</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line">   <a class="code" href="classTString.html">TString</a> rootsys(<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a3c3721acfad243abf862010d2fecb1a5">DirName</a>(rootbin));</div><div class="line">   rootsys = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a3c3721acfad243abf862010d2fecb1a5">DirName</a>(rootsys);</div><div class="line">   <a class="code" href="classTString.html">TString</a> tutorials(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/tutorials&quot;</span>, rootsys.Data()));</div><div class="line">   <span class="keyword">delete</span>[] rootbin;</div><div class="line"></div><div class="line">   <span class="comment">// Parse &#39;what&#39;; it is in the form &#39;analysis(arg1,arg2,...)&#39;</span></div><div class="line">   <a class="code" href="classTString.html">TString</a> args(what);</div><div class="line">   args.ReplaceAll(<span class="stringliteral">&quot;(&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);</div><div class="line">   args.ReplaceAll(<span class="stringliteral">&quot;)&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);</div><div class="line">   args.ReplaceAll(<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);</div><div class="line">   <a class="code" href="RtypesCore_8h.html#a649fe0f43fc2d393d99c5d39848f96b9">Ssiz_t</a> from = 0;</div><div class="line">   <a class="code" href="classTString.html">TString</a> act, tok;</div><div class="line">   <span class="keywordflow">if</span> (!args.Tokenize(act, from, <span class="stringliteral">&quot; &quot;</span>)) {</div><div class="line">      <span class="comment">// Cannot continue</span></div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: action not found: check your arguments (%s)&quot;</span>, what);</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line">   <span class="comment">// Extract ACLiC mode</span></div><div class="line">   <a class="code" href="classTString.html">TString</a> aMode = <span class="stringliteral">&quot;+&quot;</span>;</div><div class="line">   <span class="keywordflow">if</span> (act.<a class="code" href="classTString.html#a2b2e907b9681d08cec32c853171c06a1">EndsWith</a>(<span class="stringliteral">&quot;+&quot;</span>)) {</div><div class="line">      aMode += <span class="stringliteral">&quot;+&quot;</span>;</div><div class="line">      <span class="keywordflow">while</span> (act.<a class="code" href="classTString.html#a2b2e907b9681d08cec32c853171c06a1">EndsWith</a>(<span class="stringliteral">&quot;+&quot;</span>)) { act.<a class="code" href="classTString.html#ab13a8694c4221435f86b85ae452ed376">Remove</a>(<a class="code" href="classTString.html#a59bc72041107a9df1db27b7c68d4702ca9aed0215b68e05083569f100620e2481">TString::kTrailing</a>,<span class="charliteral">&#39;+&#39;</span>); }</div><div class="line">   }</div><div class="line">   <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: ACLiC mode: &#39;%s&#39;&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">   <span class="comment">// Parse out number of events and  &#39;asyn&#39; option, used almost by every test</span></div><div class="line">   <a class="code" href="classTString.html">TString</a> aNevt, aFirst, aNwrk, opt, sel, punzip(<span class="stringliteral">&quot;off&quot;</span>), aCache, aOutFile,</div><div class="line">           aH1Src(<span class="stringliteral">&quot;http://root.cern.ch/files/h1&quot;</span>),</div><div class="line">           aDebug, aDebugEnum, aRateEst, aPerfTree(<span class="stringliteral">&quot;perftree.root&quot;</span>),</div><div class="line">           aFeedback(<span class="stringliteral">&quot;fb=stats&quot;</span>);</div><div class="line">   <a class="code" href="RtypesCore_8h.html#adaf6e69e06203ab5ae4994d1e7590647">Long64_t</a> suf = 1;</div><div class="line">   <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> aSubMg = -1;</div><div class="line">   <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> useList = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>, makePerfTree = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line">   <span class="keywordflow">while</span> (args.Tokenize(tok, from, <span class="stringliteral">&quot; &quot;</span>)) {</div><div class="line">      <span class="comment">// Debug controllers</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;debug=&quot;</span>)) {</div><div class="line">         aDebug = tok;</div><div class="line">         aDebug.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;debug=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">         <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> icol = <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>;</div><div class="line">         <span class="keywordflow">if</span> ((icol = aDebug.Index(<span class="stringliteral">&quot;:&quot;</span>)) != <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>) {</div><div class="line">            aDebugEnum = aDebug(0, icol);</div><div class="line">            aDebug.Remove(0, icol+1);</div><div class="line">         }</div><div class="line">         <span class="keywordflow">if</span> (!aDebug.IsDigit()) {</div><div class="line">            <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: error parsing the &#39;debug=&#39; option (%s) - ignoring&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">            aDebug = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">            aDebugEnum = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="comment">// Number of events</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;nevt=&quot;</span>)) {</div><div class="line">         aNevt = tok;</div><div class="line">         aNevt.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;nevt=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">         <span class="keywordflow">if</span> (!aNevt.IsDigit()) {</div><div class="line">            <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: error parsing the &#39;nevt=&#39; option (%s) - ignoring&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">            aNevt = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="comment">// First event</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;first=&quot;</span>)) {</div><div class="line">         aFirst = tok;</div><div class="line">         aFirst.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;first=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">         <span class="keywordflow">if</span> (!aFirst.IsDigit()) {</div><div class="line">            <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: error parsing the &#39;first=&#39; option (%s) - ignoring&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">            aFirst = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="comment">// Sync or async ?</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;asyn&quot;</span>))</div><div class="line">         opt = <span class="stringliteral">&quot;ASYN&quot;</span>;</div><div class="line">      <span class="comment">// Number of workers</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;nwrk=&quot;</span>)) {</div><div class="line">         aNwrk = tok;</div><div class="line">         aNwrk.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;nwrk=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">         <span class="keywordflow">if</span> (!aNwrk.IsDigit()) {</div><div class="line">            <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: error parsing the &#39;nwrk=&#39; option (%s) - ignoring&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">            aNwrk = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="comment">// Parallel unzipping ?</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;punzip&quot;</span>))</div><div class="line">         punzip = <span class="stringliteral">&quot;on&quot;</span>;</div><div class="line">      <span class="comment">// Number of workers</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;cache=&quot;</span>)) {</div><div class="line">         aCache = tok;</div><div class="line">         aCache.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;cache=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">         <span class="keywordflow">if</span> (aCache.EndsWith(<span class="stringliteral">&quot;k&quot;</span>)) { aCache.<a class="code" href="classTString.html#ab13a8694c4221435f86b85ae452ed376">Remove</a>(<a class="code" href="classTString.html#a59bc72041107a9df1db27b7c68d4702ca9aed0215b68e05083569f100620e2481">TString::kTrailing</a>, <span class="charliteral">&#39;k&#39;</span>); suf = 1024; }</div><div class="line">         <span class="keywordflow">if</span> (aCache.EndsWith(<span class="stringliteral">&quot;K&quot;</span>)) { aCache.<a class="code" href="classTString.html#ab13a8694c4221435f86b85ae452ed376">Remove</a>(<a class="code" href="classTString.html#a59bc72041107a9df1db27b7c68d4702ca9aed0215b68e05083569f100620e2481">TString::kTrailing</a>, <span class="charliteral">&#39;K&#39;</span>); suf = 1024; }</div><div class="line">         <span class="keywordflow">if</span> (aCache.EndsWith(<span class="stringliteral">&quot;M&quot;</span>)) { aCache.<a class="code" href="classTString.html#ab13a8694c4221435f86b85ae452ed376">Remove</a>(<a class="code" href="classTString.html#a59bc72041107a9df1db27b7c68d4702ca9aed0215b68e05083569f100620e2481">TString::kTrailing</a>, <span class="charliteral">&#39;M&#39;</span>); suf = 1024*1024; }</div><div class="line">         <span class="keywordflow">if</span> (!aCache.IsDigit()) {</div><div class="line">            <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: error parsing the &#39;cache=&#39; option (%s) - ignoring&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">            aCache = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="comment">// Use submergers?</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;submergers&quot;</span>)) {</div><div class="line">         tok.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;submergers&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">         aSubMg = 0;</div><div class="line">         <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;=&quot;</span>)) {</div><div class="line">            tok.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a4573d335b3b16c9a33f724ba38b07fc6">IsDigit</a>()) aSubMg = tok.<a class="code" href="classTString.html#a2175ef79985227132380399df7ca45a9">Atoi</a>();</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="comment">// H1: use entry-lists ?</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;useList&quot;</span>)) {</div><div class="line">         useList = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line">      }</div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;fillList&quot;</span>)) {</div><div class="line">         opt += <span class="stringliteral">&quot;fillList&quot;</span>;</div><div class="line">      }</div><div class="line">      <span class="comment">// H1: change location of files?</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;h1src=&quot;</span>)) {</div><div class="line">         tok.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;h1src=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">         <span class="keywordflow">if</span> (!(tok.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>())) aH1Src = tok;</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: reading data files from &#39;%s&#39;&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), aH1Src.Data());</div><div class="line">      }</div><div class="line">      <span class="comment">// Rate estimation technique</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;rateest=&quot;</span>)) {</div><div class="line">         tok.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;rateest=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">         <span class="keywordflow">if</span> (!(tok.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>())) aRateEst = tok;</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: progress-bar rate estimation option: &#39;%s&#39;&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), aRateEst.Data());</div><div class="line">      }</div><div class="line">      <span class="comment">// Create and save the preformance tree?</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;perftree&quot;</span>)) {</div><div class="line">         makePerfTree = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line">         <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;perftree=&quot;</span>)) {</div><div class="line">            tok.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;perftree=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (!(tok.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>())) aPerfTree = tok;</div><div class="line">         }</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: saving performance tree to &#39;%s&#39;&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), aPerfTree.Data());</div><div class="line">      }</div><div class="line">      <span class="comment">// Location of the output file, if any</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;outfile&quot;</span>)) {</div><div class="line">         <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;outfile=&quot;</span>)) {</div><div class="line">            tok.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;outfile=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (!(tok.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>())) aOutFile = tok;</div><div class="line">         }</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: output file: &#39;%s&#39;&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), aOutFile.Data());</div><div class="line">      }</div><div class="line">      <span class="comment">// Feedback</span></div><div class="line">      <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;feedback=&quot;</span>)) {</div><div class="line">         tok.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;feedback=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">         <span class="keywordflow">if</span> (tok == <span class="stringliteral">&quot;off&quot;</span> || tok == <span class="stringliteral">&quot;OFF&quot;</span> || tok == <span class="stringliteral">&quot;0&quot;</span>) {</div><div class="line">            aFeedback = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(tok.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>())) {</div><div class="line">            <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;+&quot;</span>)) {</div><div class="line">               tok[0] = <span class="charliteral">&#39;,&#39;</span>;</div><div class="line">               aFeedback += tok;</div><div class="line">            } <span class="keywordflow">else</span> {</div><div class="line">               aFeedback.<a class="code" href="classTString.html#aeb44d6183d8b1f1b7090dbd3c93f5e39">Form</a>(<span class="stringliteral">&quot;fb=%s&quot;</span>, tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">            }</div><div class="line">         }</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: feedback: &#39;%s&#39;&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), aFeedback.Data());</div><div class="line">      }</div><div class="line">   }</div><div class="line">   <a class="code" href="RtypesCore_8h.html#adaf6e69e06203ab5ae4994d1e7590647">Long64_t</a> nevt = (aNevt.IsNull()) ? -1 : aNevt.Atoi();</div><div class="line">   <a class="code" href="RtypesCore_8h.html#adaf6e69e06203ab5ae4994d1e7590647">Long64_t</a> <a class="code" href="namespacefirst.html">first</a> = (aFirst.IsNull()) ? 0 : aFirst.Atoi();</div><div class="line">   <a class="code" href="RtypesCore_8h.html#adaf6e69e06203ab5ae4994d1e7590647">Long64_t</a> nwrk = (aNwrk.IsNull()) ? -1 : aNwrk.Atoi();</div><div class="line">   from = 0;</div><div class="line"></div><div class="line">   <span class="comment">// Set number workers</span></div><div class="line">   <span class="keywordflow">if</span> (nwrk &gt; 0) {</div><div class="line">      <span class="keywordflow">if</span> (proof-&gt;GetParallel() &lt; nwrk) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: request for a number of workers larger then available - ignored&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      } <span class="keywordflow">else</span> {</div><div class="line">         proof-&gt;SetParallel(nwrk);</div><div class="line">      }</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Debug controllers</span></div><div class="line">   <span class="keywordflow">if</span> (!aDebug.IsNull()) {</div><div class="line">      <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> dbg = aDebug.Atoi();</div><div class="line">      <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> scope = <a class="code" href="classTProofDebug.html#a71a38a507d22cb80172c1f59efab7939afd0dcc7f15c775468993d5dae3a66ea0">TProofDebug::kAll</a>;</div><div class="line">      <span class="keywordflow">if</span> (!aDebugEnum.IsNull()) scope = getDebugEnum(aDebugEnum.Data());</div><div class="line">      proof-&gt;SetLogLevel(dbg, scope);</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: verbose mode for &#39;%s&#39;; level: %d&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), aDebugEnum.Data(), dbg);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Have constant progress reporting based on estimated info</span></div><div class="line">   <span class="comment">// (NB: may screw up the progress bar in some cases)</span></div><div class="line">   <span class="keywordflow">if</span> (aRateEst == <span class="stringliteral">&quot;average&quot;</span>)</div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_RateEstimation&quot;</span>, aRateEst);</div><div class="line"></div><div class="line">   <span class="comment">// Parallel unzip</span></div><div class="line">   <span class="keywordflow">if</span> (punzip == <span class="stringliteral">&quot;on&quot;</span>) {</div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_UseParallelUnzip&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)1);</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: parallel unzip enabled&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">   } <span class="keywordflow">else</span> {</div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_UseParallelUnzip&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)0);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Tree cache</span></div><div class="line">   <span class="keywordflow">if</span> (!aCache.IsNull()) {</div><div class="line">      <a class="code" href="RtypesCore_8h.html#adaf6e69e06203ab5ae4994d1e7590647">Long64_t</a> cachesz = aCache.Atoi() * suf;</div><div class="line">      <span class="keywordflow">if</span> (cachesz &lt;= 0) {</div><div class="line">         proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_UseTreeCache&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)0);</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: disabling tree cache&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      } <span class="keywordflow">else</span> {</div><div class="line">         proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_UseTreeCache&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)1);</div><div class="line">         proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_CacheSize&quot;</span>, cachesz);</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: setting cache size to %lld&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), cachesz);</div><div class="line">      }</div><div class="line">   } <span class="keywordflow">else</span> {</div><div class="line">      <span class="comment">// Use defaults</span></div><div class="line">      proof-&gt;DeleteParameters(<span class="stringliteral">&quot;PROOF_UseTreeCache&quot;</span>);</div><div class="line">      proof-&gt;DeleteParameters(<span class="stringliteral">&quot;PROOF_CacheSize&quot;</span>);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Enable submergers, if required</span></div><div class="line">   <span class="keywordflow">if</span> (aSubMg &gt;= 0) {</div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_UseMergers&quot;</span>, aSubMg);</div><div class="line">      <span class="keywordflow">if</span> (aSubMg &gt; 0) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: enabling merging via %d sub-mergers&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), aSubMg);</div><div class="line">      } <span class="keywordflow">else</span> {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: enabling merging via sub-mergers (optimal number)&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      }</div><div class="line">   } <span class="keywordflow">else</span> {</div><div class="line">      proof-&gt;DeleteParameters(<span class="stringliteral">&quot;PROOF_UseMergers&quot;</span>);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// The performance tree</span></div><div class="line">   <span class="keywordflow">if</span> (makePerfTree) {</div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_StatsHist&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_StatsTrace&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_SlaveStatsTrace&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Additional inputs from the argument &#39;ins&#39;</span></div><div class="line">   <span class="keywordflow">if</span> (ins &amp;&amp; ins-&gt;GetSize() &gt; 0) {</div><div class="line">      <a class="code" href="classTObject.html">TObject</a> *oin = 0;</div><div class="line">      <a class="code" href="classTIter.html">TIter</a> nxo(ins);</div><div class="line">      <span class="keywordflow">while</span> ((oin = nxo())) { proof-&gt;AddInput(oin); }</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Full lits of inputs so far</span></div><div class="line">   proof-&gt;GetInputList()-&gt;Print();</div><div class="line"></div><div class="line">   <span class="comment">// Action</span></div><div class="line">   <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;simple&quot;</span>) {</div><div class="line">      <span class="comment">// ProofSimple is an example of non-data driven analysis; it</span></div><div class="line">      <span class="comment">// creates and fills with random numbers a given number of histos</span></div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="namespacefirst.html">first</a> &gt; 0)</div><div class="line">         <span class="comment">// Meaningless for this tutorial</span></div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: warning concept of &#39;first&#39; meaningless for this tutorial&quot;</span></div><div class="line">                <span class="stringliteral">&quot; - ignored&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">      <span class="comment">// Default 10000 events</span></div><div class="line">      nevt = (nevt &lt; 0) ? 100000 : nevt;</div><div class="line">      <span class="comment">// Find out the number of histograms</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> aNhist, aNhist3;</div><div class="line">      <span class="keywordflow">while</span> (args.Tokenize(tok, from, <span class="stringliteral">&quot; &quot;</span>)) {</div><div class="line">         <span class="comment">// Number of histos</span></div><div class="line">         <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;nhist=&quot;</span>)) {</div><div class="line">            aNhist = tok;</div><div class="line">            aNhist.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;nhist=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (!aNhist.<a class="code" href="classTString.html#a4573d335b3b16c9a33f724ba38b07fc6">IsDigit</a>()) {</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: error parsing the &#39;nhist=&#39; option (%s) - ignoring&quot;</span>, tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">               aNhist = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">            }</div><div class="line">         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;nhist3=&quot;</span>)) {</div><div class="line">            aNhist3 = tok;</div><div class="line">            aNhist3.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;nhist3=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (!aNhist3.<a class="code" href="classTString.html#a4573d335b3b16c9a33f724ba38b07fc6">IsDigit</a>()) {</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: error parsing the &#39;nhist3=&#39; option (%s) - ignoring&quot;</span>, tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">               aNhist3 = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">            }</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nhist = (aNhist.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>()) ? 100 : aNhist.<a class="code" href="classTString.html#a2175ef79985227132380399df7ca45a9">Atoi</a>();</div><div class="line">      <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nhist3 = (aNhist3.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>()) ? -1 : aNhist3.<a class="code" href="classTString.html#a2175ef79985227132380399df7ca45a9">Atoi</a>();</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: running \&quot;simple\&quot; with nhist= %d, nhist3=%d and nevt= %lld\n&quot;</span>, nhist, nhist3, nevt);</div><div class="line"></div><div class="line">      <span class="comment">// The number of histograms is added as parameter in the input list</span></div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;ProofSimple_NHist&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a84701346fdad56d1d91e06fcbc1b87dc">Long_t</a>)nhist);</div><div class="line">      <span class="comment">// The number of histograms is added as parameter in the input list</span></div><div class="line">      <span class="keywordflow">if</span> (nhist3 &gt; 0) proof-&gt;SetParameter(<span class="stringliteral">&quot;ProofSimple_NHist3&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a84701346fdad56d1d91e06fcbc1b87dc">Long_t</a>)nhist3);</div><div class="line">      <span class="comment">// The selector string</span></div><div class="line">      sel.Form(<span class="stringliteral">&quot;%s/proof/ProofSimple.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="comment">//</span></div><div class="line">      <span class="comment">// Run it for nevt times</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> xopt = aFeedback; <span class="keywordflow">if</span> (!opt.IsNull()) xopt += <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot; %s&quot;</span>, opt.Data());</div><div class="line">      proof-&gt;Process(sel.Data(), nevt, xopt);</div><div class="line"></div><div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;h1&quot;</span>) {</div><div class="line">      <span class="comment">// This is the famous &#39;h1&#39; example analysis run on Proof reading the</span></div><div class="line">      <span class="comment">// data from the ROOT http server.</span></div><div class="line"></div><div class="line">      <span class="comment">// Create the chain</span></div><div class="line">      <a class="code" href="classTChain.html">TChain</a> *chain = <span class="keyword">new</span> <a class="code" href="classTChain.html">TChain</a>(<span class="stringliteral">&quot;h42&quot;</span>);</div><div class="line">      chain-&gt;<a class="code" href="classTChain.html#a9510cc7fc76ff28c30e6775bd9085d6e">Add</a>(<a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;%s/dstarmb.root&quot;</span>, aH1Src.Data()));</div><div class="line">      chain-&gt;<a class="code" href="classTChain.html#a9510cc7fc76ff28c30e6775bd9085d6e">Add</a>(<a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;%s/dstarp1a.root&quot;</span>, aH1Src.Data()));</div><div class="line">      chain-&gt;<a class="code" href="classTChain.html#a9510cc7fc76ff28c30e6775bd9085d6e">Add</a>(<a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;%s/dstarp1b.root&quot;</span>, aH1Src.Data()));</div><div class="line">      chain-&gt;<a class="code" href="classTChain.html#a9510cc7fc76ff28c30e6775bd9085d6e">Add</a>(<a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;%s/dstarp2.root&quot;</span>, aH1Src.Data()));</div><div class="line">      chain-&gt;<a class="code" href="classTChain.html#addf9ed96c222f412b8fcc1cbf4a7f5df">ls</a>();</div><div class="line">      <span class="comment">// We run on Proof</span></div><div class="line">      chain-&gt;<a class="code" href="classTChain.html#aa3147845750a927ddf51071c1ff664f9">SetProof</a>();</div><div class="line">      <span class="comment">// Set entrylist, if required</span></div><div class="line">      <span class="keywordflow">if</span> (useList) {</div><div class="line">         <a class="code" href="classTString.html">TString</a> eln(<span class="stringliteral">&quot;elist&quot;</span>), elfn(<span class="stringliteral">&quot;elist.root&quot;</span>);</div><div class="line">         <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(elfn)) {</div><div class="line">            <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: asked to use an entry list but &#39;%s&#39; not found or not readable&quot;</span>, elfn.Data());</div><div class="line">            <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: did you forget to run with &#39;fillList=%s&#39;?\n&quot;</span>, elfn.Data());</div><div class="line">         } <span class="keywordflow">else</span> {</div><div class="line">            <a class="code" href="classTFile.html">TFile</a> <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>(elfn);</div><div class="line">            <span class="keywordflow">if</span> (!(<a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>.IsZombie())) {</div><div class="line">               <a class="code" href="classTEntryList.html">TEntryList</a> *elist = (<a class="code" href="classTEntryList.html">TEntryList</a> *)<a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>.Get(eln);</div><div class="line">               <span class="keywordflow">if</span> (elist) {</div><div class="line">                  elist-&gt;<a class="code" href="classTEntryList.html#a837a567022064bcb5729ad0777a2eaff">SetDirectory</a>(0); <span class="comment">//otherwise the file destructor will delete elist</span></div><div class="line">                  chain-&gt;<a class="code" href="classTChain.html#a687873d3ca44c4dfd927c86e4b618717">SetEntryList</a>(elist);</div><div class="line">               } <span class="keywordflow">else</span> {</div><div class="line">                  <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: could not find entry-list &#39;%s&#39; in file &#39;%s&#39;: ignoring&quot;</span>,</div><div class="line">                         eln.Data(), elfn.Data());</div><div class="line">               }</div><div class="line">            } <span class="keywordflow">else</span> {</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: requested entry-list file &#39;%s&#39; not existing (or not readable):&quot;</span></div><div class="line">                      <span class="stringliteral">&quot; ignoring&quot;</span>, elfn.Data());</div><div class="line">            }</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="comment">// The selector</span></div><div class="line">      sel.Form(<span class="stringliteral">&quot;%s/tree/h1analysis.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="comment">// Run it</span></div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: running \&quot;h1\&quot;\n&quot;</span>);</div><div class="line">      <a class="code" href="classTString.html">TString</a> xopt = aFeedback; <span class="keywordflow">if</span> (!opt.IsNull()) xopt += <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot; %s&quot;</span>, opt.Data());</div><div class="line">      chain-&gt;<a class="code" href="classTChain.html#a32bee5ea98365ef01c88f77a702948a8">Process</a>(sel.Data(),xopt,nevt,<a class="code" href="namespacefirst.html">first</a>);</div><div class="line">      <span class="comment">// Cleanup the input list</span></div><div class="line">      <a class="code" href="TProof_8h.html#acd69714682a1959656a21600ad2d7075">gProof</a>-&gt;<a class="code" href="classTProof.html#ac524664ecf9033de55a40e4bebf70bd0">ClearInputData</a>(<span class="stringliteral">&quot;elist&quot;</span>);</div><div class="line">      <a class="code" href="TProof_8h.html#acd69714682a1959656a21600ad2d7075">gProof</a>-&gt;<a class="code" href="classTProof.html#ac524664ecf9033de55a40e4bebf70bd0">ClearInputData</a>(<span class="stringliteral">&quot;elist.root&quot;</span>);</div><div class="line">      <a class="code" href="classTIter.html">TIter</a> nxi(<a class="code" href="TProof_8h.html#acd69714682a1959656a21600ad2d7075">gProof</a>-&gt;<a class="code" href="classTProof.html#af22ef8a5912d7d7174a2c110c37300d1">GetInputList</a>());</div><div class="line">      <a class="code" href="classTObject.html">TObject</a> *o = 0;</div><div class="line">      <span class="keywordflow">while</span> ((o = nxi())) {</div><div class="line">         <span class="keywordflow">if</span> (!strncmp(o-&gt;GetName(), <span class="stringliteral">&quot;elist&quot;</span>, 5)) {</div><div class="line">            <a class="code" href="TProof_8h.html#acd69714682a1959656a21600ad2d7075">gProof</a>-&gt;<a class="code" href="classTProof.html#af22ef8a5912d7d7174a2c110c37300d1">GetInputList</a>()-&gt;<a class="code" href="classTList.html#a3026e979d86376d2f362044d5a94c71b">Remove</a>(o);</div><div class="line">            <span class="keyword">delete</span> o;</div><div class="line">         }</div><div class="line">      }</div><div class="line"></div><div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;pythia8&quot;</span>) {</div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="namespacefirst.html">first</a> &gt; 0)</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: warning concept of &#39;first&#39; meaningless for this tutorial&quot;</span></div><div class="line">                <span class="stringliteral">&quot; - ignored&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">      <a class="code" href="classTString.html">TString</a> path(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/Index.xml&quot;</span>, pythia8data));</div><div class="line">      <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a269568802a00016471ede4ed5dc52048">ExpandPathName</a>(path);</div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(path)) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: pythia8: PYTHIA8DATA directory (%s) must&quot;</span></div><div class="line">                <span class="stringliteral">&quot; contain the Index.xml file !&quot;</span>, pythia8data);</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">      <a class="code" href="classTString.html">TString</a> pythia8par = <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;%s/proof/pythia8.par&quot;</span>, tutorials.Data());</div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(pythia8par.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>())) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: pythia8: par file not found (tried %s)&quot;</span>, pythia8par.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">      proof-&gt;UploadPackage(pythia8par);</div><div class="line">      proof-&gt;EnablePackage(<span class="stringliteral">&quot;pythia8&quot;</span>);</div><div class="line">      <span class="comment">// Show enabled packages</span></div><div class="line">      proof-&gt;ShowEnabledPackages();</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: pythia8: check settings:&quot;</span>);</div><div class="line">      proof-&gt;Exec(<span class="stringliteral">&quot;.!echo hostname = `hostname`; echo \&quot;ls pythia8:\&quot;; ls pythia8&quot;</span>);</div><div class="line">      <span class="comment">// Loading libraries needed</span></div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a6ff4c4c6cd8a75a199a30dd94359f205">Load</a>(<span class="stringliteral">&quot;libEG.so&quot;</span>) &lt; 0) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: pythia8: libEG not found \n&quot;</span>);</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a6ff4c4c6cd8a75a199a30dd94359f205">Load</a>(<span class="stringliteral">&quot;libEGPythia8.so&quot;</span>) &lt; 0) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: pythia8: libEGPythia8 not found \n&quot;</span>);</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">      <span class="comment">// Setting the default number of events, if needed</span></div><div class="line">      nevt = (nevt &lt; 0) ? 100 : nevt;</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: running \&quot;Pythia01\&quot; nevt= %lld\n&quot;</span>, nevt);</div><div class="line">      <span class="comment">// The selector string</span></div><div class="line">      sel.Form(<span class="stringliteral">&quot;%s/proof/ProofPythia.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="comment">// Run it for nevt times</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> xopt = aFeedback; <span class="keywordflow">if</span> (!opt.IsNull()) xopt += <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot; %s&quot;</span>, opt.Data());</div><div class="line">      proof-&gt;Process(sel.Data(), nevt, xopt);</div><div class="line"></div><div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;event&quot;</span>) {</div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="namespacefirst.html">first</a> &gt; 0)</div><div class="line">         <span class="comment">// Meaningless for this tutorial</span></div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: warning concept of &#39;first&#39; meaningless for this tutorial&quot;</span></div><div class="line">                <span class="stringliteral">&quot; - ignored&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">      <a class="code" href="classTString.html">TString</a> eventpar = <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;%s/proof/event.par&quot;</span>, tutorials.Data());</div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(eventpar.Data())) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: event: par file not found (tried %s)&quot;</span>, eventpar.Data());</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line"></div><div class="line">      proof-&gt;UploadPackage(eventpar);</div><div class="line">      proof-&gt;EnablePackage(<span class="stringliteral">&quot;event&quot;</span>);</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;Enabled packages...\n&quot;</span>);</div><div class="line">      proof-&gt;ShowEnabledPackages();</div><div class="line"></div><div class="line">      <span class="comment">// Setting the default number of events, if needed</span></div><div class="line">      nevt = (nevt &lt; 0) ? 100 : nevt;</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: running \&quot;event\&quot; nevt= %lld\n&quot;</span>, nevt);</div><div class="line">      <span class="comment">// The selector string</span></div><div class="line">      sel.Form(<span class="stringliteral">&quot;%s/proof/ProofEvent.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="comment">// Run it for nevt times</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> xopt = aFeedback; <span class="keywordflow">if</span> (!opt.IsNull()) xopt += <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot; %s&quot;</span>, opt.Data());</div><div class="line">      proof-&gt;Process(sel.Data(), nevt, xopt);</div><div class="line"></div><div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;eventproc&quot;</span>) {</div><div class="line"></div><div class="line">      <a class="code" href="classTString.html">TString</a> eventpar = <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;%s/proof/event.par&quot;</span>, tutorials.Data());</div><div class="line">      <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a269568802a00016471ede4ed5dc52048">ExpandPathName</a>(eventpar);</div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(eventpar.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>())) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: eventproc: par file not found (tried %s)&quot;</span>, eventpar.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line"></div><div class="line">      proof-&gt;UploadPackage(eventpar);</div><div class="line">      proof-&gt;EnablePackage(<span class="stringliteral">&quot;event&quot;</span>);</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;Enabled packages...\n&quot;</span>);</div><div class="line">      proof-&gt;ShowEnabledPackages();</div><div class="line"></div><div class="line">      <span class="comment">// Load ProcFileElements (to check processed ranges)</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> pfelem = <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;%s/proof/ProcFileElements.C&quot;</span>, tutorials.Data());</div><div class="line">      <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a269568802a00016471ede4ed5dc52048">ExpandPathName</a>(pfelem);</div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(pfelem.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>())) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: eventproc: ProcFileElements.C not found (tried %s)&quot;</span>, pfelem.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">      pfelem += aMode;</div><div class="line">      <span class="comment">// Add include to test trasmission</span></div><div class="line">      pfelem += <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;,%s/proof/EmptyInclude.h&quot;</span>, tutorials.Data());</div><div class="line">      proof-&gt;Load(pfelem);</div><div class="line"></div><div class="line">      <span class="comment">// Extract the number of files to process, data source and</span></div><div class="line">      <span class="comment">// other parameters controlling the run ...</span></div><div class="line">      <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> uneven = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line">      <a class="code" href="classTString.html">TString</a> aFiles, aDataSrc(<span class="stringliteral">&quot;http://root.cern.ch/files/data&quot;</span>), aPartitions;</div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;ProofEventProc_Read&quot;</span>, <span class="stringliteral">&quot;optimized&quot;</span>);</div><div class="line">      <span class="keywordflow">while</span> (args.Tokenize(tok, from, <span class="stringliteral">&quot; &quot;</span>)) {</div><div class="line">         <span class="comment">// Number of events</span></div><div class="line">         <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;files=&quot;</span>)) {</div><div class="line">            aFiles = tok;</div><div class="line">            aFiles.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;files=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (!aFiles.<a class="code" href="classTString.html#a4573d335b3b16c9a33f724ba38b07fc6">IsDigit</a>()) {</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: error parsing the &#39;files=&#39; option (%s) - ignoring&quot;</span>, tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">               aFiles = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">            }</div><div class="line">         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;datasrc=&quot;</span>)) {</div><div class="line">            tok.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;datasrc=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a4573d335b3b16c9a33f724ba38b07fc6">IsDigit</a>()) {</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: error parsing the &#39;datasrc=&#39; option (%s) - ignoring&quot;</span>, tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">            } <span class="keywordflow">else</span> {</div><div class="line">               aDataSrc = tok;</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: reading files from: %s&quot;</span>, aDataSrc.Data());</div><div class="line">            }</div><div class="line">         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tok == <span class="stringliteral">&quot;readall&quot;</span>) {</div><div class="line">            proof-&gt;SetParameter(<span class="stringliteral">&quot;ProofEventProc_Read&quot;</span>, <span class="stringliteral">&quot;readall&quot;</span>);</div><div class="line">            <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: eventproc: reading the full event&quot;</span>);</div><div class="line">         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tok == <span class="stringliteral">&quot;uneven&quot;</span>) {</div><div class="line">            uneven = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line">         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;partitions=&quot;</span>)) {</div><div class="line">            tok.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;partitions=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a4573d335b3b16c9a33f724ba38b07fc6">IsDigit</a>()) {</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: error parsing the &#39;partitions=&#39; option (%s) - ignoring&quot;</span>, tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">            } <span class="keywordflow">else</span> {</div><div class="line">               aPartitions = tok;</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: partitions: %s included in packetizer operations&quot;</span>, aPartitions.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">            }</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nFiles = (aFiles.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>()) ? 10 : aFiles.<a class="code" href="classTString.html#a2175ef79985227132380399df7ca45a9">Atoi</a>();</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: found aFiles: &#39;%s&#39;, nFiles: %d&quot;</span>, aFiles.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), nFiles);</div><div class="line">      <span class="keywordflow">if</span> (nFiles &gt; 50) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: max number of files is 50 - resizing request&quot;</span>);</div><div class="line">         nFiles = 50;</div><div class="line">      }</div><div class="line"></div><div class="line">      <span class="comment">// We create the chain now</span></div><div class="line">      <a class="code" href="classTChain.html">TChain</a> *<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> = <span class="keyword">new</span> <a class="code" href="classTChain.html">TChain</a>(<span class="stringliteral">&quot;EventTree&quot;</span>);</div><div class="line"></div><div class="line">      <a class="code" href="structFileStat__t.html">FileStat_t</a> fst;</div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a81a90c1f786d60ac48a95ab47ad23f3a">GetPathInfo</a>(aDataSrc, fst) == 0 &amp;&amp; <a class="code" href="TSystem_8h.html#a7a2eefc720cd9642447cc653efd88982">R_ISREG</a>(fst.<a class="code" href="structFileStat__t.html#a2ccf2c338ee3231f5876bae0b3b67c99">fMode</a>) &amp;&amp;</div><div class="line">         !<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(aDataSrc, <a class="code" href="TSystem_8h.html#a5ea512734402935ca6e68723f6398862a55bd40b14de9b4c0e5d0a5b5ad6fb537">kReadPermission</a>)) {</div><div class="line">         <span class="comment">// It is a local file, we get the TFileCollection and we inject it into the chain</span></div><div class="line">         <a class="code" href="classTFileCollection.html">TFileCollection</a> *<a class="code" href="civetweb_8c.html#a4d1e08e68d8456f97fbfe21f3e3c85bd">fc</a> = <span class="keyword">new</span> <a class="code" href="classTFileCollection.html">TFileCollection</a>(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, aDataSrc, nFiles);</div><div class="line">         <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>-&gt;AddFileInfoList(<a class="code" href="civetweb_8c.html#a4d1e08e68d8456f97fbfe21f3e3c85bd">fc</a>-&gt;GetList());</div><div class="line">         <span class="keyword">delete</span> <a class="code" href="civetweb_8c.html#a4d1e08e68d8456f97fbfe21f3e3c85bd">fc</a>;</div><div class="line"></div><div class="line">      } <span class="keywordflow">else</span> {</div><div class="line"></div><div class="line">         <span class="comment">// Tokenize the source: if more than 1 we rotate the assignment. More sources can be specified</span></div><div class="line">         <span class="comment">// separating them by a &#39;|&#39;</span></div><div class="line">         <a class="code" href="classTObjArray.html">TObjArray</a> *dsrcs = aDataSrc.Tokenize(<span class="stringliteral">&quot;|&quot;</span>);</div><div class="line">         <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nds = dsrcs-&gt;<a class="code" href="classTObjArray.html#a628fa501df79ce12d91bd2b3dd9c19f9">GetEntries</a>();</div><div class="line"></div><div class="line">         <span class="comment">// Fill the chain</span></div><div class="line">         <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> i = 1, k = 0;</div><div class="line">         <a class="code" href="classTString.html">TString</a> fn;</div><div class="line">         <span class="keywordflow">for</span> (i = 1; i &lt;= nFiles; i++) {</div><div class="line">            k = (i - 1) % nds;</div><div class="line">            <a class="code" href="classTObjString.html">TObjString</a> *os = (<a class="code" href="classTObjString.html">TObjString</a> *) (*dsrcs)[k];</div><div class="line">            <span class="keywordflow">if</span> (os) {</div><div class="line">               fn.<a class="code" href="classTString.html#aeb44d6183d8b1f1b7090dbd3c93f5e39">Form</a>(<span class="stringliteral">&quot;%s/event_%d.root&quot;</span>, os-&gt;<a class="code" href="classTObjString.html#a4004b639f59f97e02ba47dc05468cc82">GetName</a>(), i);</div><div class="line">               <span class="keywordflow">if</span> (uneven) {</div><div class="line">                  <span class="keywordflow">if</span> ((i - 1)%5 == 0)</div><div class="line">                     <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>-&gt;AddFile(fn.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), 50000);</div><div class="line">                  <span class="keywordflow">else</span></div><div class="line">                     <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>-&gt;AddFile(fn.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), 5000);</div><div class="line">               } <span class="keywordflow">else</span> {</div><div class="line">                  <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>-&gt;AddFile(fn.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">               }</div><div class="line">            }</div><div class="line">         }</div><div class="line">         dsrcs-&gt;<a class="code" href="classTCollection.html#aa8ef8d5ff9b79c1efe27205e894c99d6">SetOwner</a>();</div><div class="line">         <span class="keyword">delete</span> dsrcs;</div><div class="line">      }</div><div class="line">      <span class="comment">// Show the chain</span></div><div class="line">      <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>-&gt;ls();</div><div class="line">      <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>-&gt;SetProof();</div><div class="line"></div><div class="line">      <span class="comment">// Only validate the files really needed for the analysis</span></div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_ValidateByFile&quot;</span>, 1);</div><div class="line"></div><div class="line">      <span class="comment">// Send over the  partition information, if any</span></div><div class="line">      <span class="keywordflow">if</span> (!aPartitions.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>()) {</div><div class="line">         aPartitions.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;|&quot;</span>, <span class="stringliteral">&quot;,&quot;</span>);</div><div class="line">         proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_PacketizerPartitions&quot;</span>, aPartitions);</div><div class="line">      }</div><div class="line"></div><div class="line">      <span class="comment">// The selector</span></div><div class="line">      sel.<a class="code" href="classTString.html#aeb44d6183d8b1f1b7090dbd3c93f5e39">Form</a>(<span class="stringliteral">&quot;%s/proof/ProofEventProc.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="comment">// Run it</span></div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: running \&quot;eventproc\&quot;\n&quot;</span>);</div><div class="line">      <a class="code" href="classTString.html">TString</a> xopt = aFeedback; <span class="keywordflow">if</span> (!opt.IsNull()) xopt += <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot; %s&quot;</span>, opt.Data());</div><div class="line">      <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>-&gt;Process(sel.Data(), xopt, nevt, <a class="code" href="namespacefirst.html">first</a>);</div><div class="line"></div><div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;ntuple&quot;</span>) {</div><div class="line"></div><div class="line">      <span class="comment">// ProofNtuple is an example of non-data driven analysis; it</span></div><div class="line">      <span class="comment">// creates and fills a disk resident ntuple with automatic file merging</span></div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="namespacefirst.html">first</a> &gt; 0)</div><div class="line">         <span class="comment">// Meaningless for this tutorial</span></div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: warning concept of &#39;first&#39; meaningless for this tutorial&quot;</span></div><div class="line">                <span class="stringliteral">&quot; - ignored&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">      <span class="comment">// Set the default number of events, if needed</span></div><div class="line">      nevt = (nevt &lt; 0) ? 1000 : nevt;</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: running \&quot;ntuple\&quot; with nevt= %lld\n&quot;</span>, nevt);</div><div class="line"></div><div class="line">      <span class="comment">// Which randoms to use</span></div><div class="line">      <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> usentprndm = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line">      <span class="keywordflow">while</span> (args.Tokenize(tok, from, <span class="stringliteral">&quot; &quot;</span>)) {</div><div class="line">         <span class="keywordflow">if</span> (tok == <span class="stringliteral">&quot;inputrndm&quot;</span>) {</div><div class="line">            usentprndm = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="keywordflow">if</span> (usentprndm) <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: taking randoms from input ntuple\n&quot;</span>);</div><div class="line"></div><div class="line">      <span class="comment">// Output file</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> fout(aOutFile);</div><div class="line">      <span class="keywordflow">if</span> (fout.IsNull()) {</div><div class="line">         fout.Form(<span class="stringliteral">&quot;%s/ProofNtuple.root&quot;</span>, <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#ac5d9e723943c459f731e0b729dc9f7fa">WorkingDirectory</a>());</div><div class="line">         <span class="comment">// Cleanup any existing instance of the output file</span></div><div class="line">         <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#af029c44ab5002d353abf8c0e51659bd9">Unlink</a>(fout);</div><div class="line"></div><div class="line">         <span class="keywordflow">if</span> (!isProofLocal) {</div><div class="line">            <span class="comment">// Setup a local basic xrootd to receive the file</span></div><div class="line">            <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> xrdok = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line">            <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> port = 9000;</div><div class="line">            <span class="keywordflow">while</span> (port &lt; 9010) {</div><div class="line">               <span class="keywordflow">if</span> (checkXrootdAt(port) != 1) {</div><div class="line">                  <span class="keywordflow">if</span> (startXrootdAt(port, <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#ac5d9e723943c459f731e0b729dc9f7fa">WorkingDirectory</a>(), <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>) == 0) {</div><div class="line">                     xrdok = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line">                     <span class="keywordflow">break</span>;</div><div class="line">                  }</div><div class="line">               }</div><div class="line">               port++;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">if</span> (!xrdok) {</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not start basic xrootd on ports 9000-9009 - cannot continue&quot;</span>);</div><div class="line">               <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line">            fout.Insert(0, <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;root://%s:%d/&quot;</span>, <a class="code" href="classTUrl.html">TUrl</a>(<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#aab4a8ac24bc42a135aa6584be2cb415c">HostName</a>()).GetHostFQDN(), port));</div><div class="line">            <span class="comment">// Make a copy of the files on the master before merging</span></div><div class="line">            proof-&gt;AddInput(<span class="keyword">new</span> <a class="code" href="classTNamed.html">TNamed</a>(<span class="stringliteral">&quot;PROOF_OUTPUTFILE_LOCATION&quot;</span>, <span class="stringliteral">&quot;LOCAL&quot;</span>));</div><div class="line">         }</div><div class="line">      }</div><div class="line">      proof-&gt;AddInput(<span class="keyword">new</span> <a class="code" href="classTNamed.html">TNamed</a>(<span class="stringliteral">&quot;PROOF_OUTPUTFILE&quot;</span>, fout.Data()));</div><div class="line"></div><div class="line">      <span class="comment">// If using the &#39;NtpRndm&#39; for a fixed values of randoms, send over the file</span></div><div class="line">      <span class="keywordflow">if</span> (usentprndm) {</div><div class="line">         <span class="comment">// The file with &#39;NtpRndm&#39;</span></div><div class="line">         <a class="code" href="classTString.html">TString</a> fnr = <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;%s/proof/ntprndm.root&quot;</span>, tutorials.Data());</div><div class="line">         <span class="comment">// Set as input data</span></div><div class="line">         proof-&gt;SetInputDataFile(fnr);</div><div class="line">         <span class="comment">// Set the related parameter</span></div><div class="line">         proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_USE_NTP_RNDM&quot;</span>,<span class="stringliteral">&quot;yes&quot;</span>);</div><div class="line">         <span class="comment">// Notify</span></div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: taking randoms from &#39;%s&#39;&quot;</span>, fnr.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      }</div><div class="line"></div><div class="line">      <span class="comment">// The selector string</span></div><div class="line">      sel.Form(<span class="stringliteral">&quot;%s/proof/ProofNtuple.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">      <span class="comment">// Run it for nevt times</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> xopt = aFeedback; <span class="keywordflow">if</span> (!opt.IsNull()) xopt += <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot; %s&quot;</span>, opt.Data());</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: selector file &#39;%s&#39;, options: &#39;%s&#39;&quot;</span>, sel.Data(), xopt.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      proof-&gt;Process(sel.Data(), nevt, xopt);</div><div class="line"></div><div class="line">      <span class="comment">// Reset input variables</span></div><div class="line">      <span class="keywordflow">if</span> (usentprndm) {</div><div class="line">         proof-&gt;DeleteParameters(<span class="stringliteral">&quot;PROOF_USE_NTP_RNDM&quot;</span>);</div><div class="line">         proof-&gt;SetInputDataFile(0);</div><div class="line">      }</div><div class="line"></div><div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;dataset&quot;</span>) {</div><div class="line"></div><div class="line">      <span class="comment">// This is an example of analysis creating data files on each node which are</span></div><div class="line">      <span class="comment">// automatically registered as dataset; the newly created dataset is used to create</span></div><div class="line">      <span class="comment">// the final plots. The data are of the same type as for the &#39;ntuple&#39; example.</span></div><div class="line">      <span class="comment">// Selector used: ProofNtuple</span></div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="namespacefirst.html">first</a> &gt; 0)</div><div class="line">         <span class="comment">// Meaningless for this tutorial</span></div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: warning concept of &#39;first&#39; meaningless for this tutorial&quot;</span></div><div class="line">                <span class="stringliteral">&quot; - ignored&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">      <span class="comment">// Set the default number of events, if needed</span></div><div class="line">      nevt = (nevt &lt; 0) ? 1000000 : nevt;</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: running \&quot;dataset\&quot; with nevt= %lld\n&quot;</span>, nevt);</div><div class="line"></div><div class="line">      <span class="comment">// Ask for registration of the dataset (the default is the the TFileCollection is return</span></div><div class="line">      <span class="comment">// without registration; the name of the TFileCollection is the name of the dataset</span></div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;SimpleNtuple.root&quot;</span>,<span class="stringliteral">&quot;testNtuple&quot;</span>);</div><div class="line"></div><div class="line">      <span class="comment">// Do not plot the ntuple at this level</span></div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_NTUPLE_DONT_PLOT&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">      <span class="comment">// The selector string</span></div><div class="line">      sel.Form(<span class="stringliteral">&quot;%s/proof/ProofNtuple.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="comment">//</span></div><div class="line">      <span class="comment">// Run it for nevt times</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> xopt = aFeedback; <span class="keywordflow">if</span> (!opt.IsNull()) xopt += <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot; %s&quot;</span>, opt.Data());</div><div class="line">      proof-&gt;Process(sel.Data(), nevt, xopt);</div><div class="line"></div><div class="line">      <span class="comment">// The TFileCollection must be in the output</span></div><div class="line">      <span class="keywordflow">if</span> (proof-&gt;GetOutputList()-&gt;FindObject(<span class="stringliteral">&quot;testNtuple&quot;</span>)) {</div><div class="line"></div><div class="line">         <span class="comment">// Plot the ntuple via PROOF (example of drawing PROOF actions)</span></div><div class="line">         plotNtuple(proof, <span class="stringliteral">&quot;testNtuple&quot;</span>, <span class="stringliteral">&quot;proof ntuple from dataset&quot;</span>);</div><div class="line"></div><div class="line">      } <span class="keywordflow">else</span> {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: dataset &#39;testNtuple&#39; not found in the output list&quot;</span>);</div><div class="line">      }</div><div class="line">      <span class="comment">// Do not plot the ntuple at this level</span></div><div class="line">      proof-&gt;DeleteParameters(<span class="stringliteral">&quot;PROOF_NTUPLE_DONT_PLOT&quot;</span>);</div><div class="line">      proof-&gt;DeleteParameters(<span class="stringliteral">&quot;SimpleNtuple.root&quot;</span>);</div><div class="line"></div><div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;friends&quot;</span>) {</div><div class="line"></div><div class="line">      <span class="comment">// This is an example of analysis creating two data files on each node (the main tree</span></div><div class="line">      <span class="comment">// and its friend) which are then processed as &#39;friends&#39; to create the final plots.</span></div><div class="line">      <span class="comment">// Selector used: ProofFriends, ProofAux</span></div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="namespacefirst.html">first</a> &gt; 0)</div><div class="line">         <span class="comment">// Meaningless for this tutorial</span></div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: warning concept of &#39;first&#39; meaningless for this tutorial&quot;</span></div><div class="line">                <span class="stringliteral">&quot; - ignored&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">      <span class="comment">// Find out whether to use the same file or separate files</span></div><div class="line">      <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> sameFile = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line">      <span class="keywordflow">while</span> (args.Tokenize(tok, from, <span class="stringliteral">&quot; &quot;</span>)) {</div><div class="line">         <span class="comment">// Number of histos</span></div><div class="line">         <span class="keywordflow">if</span> (tok == <span class="stringliteral">&quot;samefile&quot;</span>) {</div><div class="line">            sameFile = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">         }</div><div class="line">      }</div><div class="line"></div><div class="line">      <span class="comment">// File generation: we use TPacketizerFile in here to create two files per node</span></div><div class="line">      <a class="code" href="classTList.html">TList</a> *wrks = proof-&gt;GetListOfSlaveInfos();</div><div class="line">      <span class="keywordflow">if</span> (!wrks) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not get the list of information about the workers&quot;</span>);</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">      <span class="comment">// Create the map</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> fntree;</div><div class="line">      <a class="code" href="classTMap.html">TMap</a> *files = <span class="keyword">new</span> <a class="code" href="classTMap.html">TMap</a>;</div><div class="line">      files-&gt;<a class="code" href="classTCollection.html#a6d6c3b2d795b309c0d8d2a7eebbb30d4">SetName</a>(<span class="stringliteral">&quot;PROOF_FilesToProcess&quot;</span>);</div><div class="line">      <a class="code" href="classTIter.html">TIter</a> nxwi(wrks);</div><div class="line">      <a class="code" href="classTSlaveInfo.html">TSlaveInfo</a> *wi = 0;</div><div class="line">      <span class="keywordflow">while</span> ((wi = (<a class="code" href="classTSlaveInfo.html">TSlaveInfo</a> *) nxwi())) {</div><div class="line">         fntree.<a class="code" href="classTString.html#aeb44d6183d8b1f1b7090dbd3c93f5e39">Form</a>(<span class="stringliteral">&quot;tree_%s.root&quot;</span>, wi-&gt;<a class="code" href="classTSlaveInfo.html#ad4b23262abfd7f744ef6c0ea15d81409">GetOrdinal</a>());</div><div class="line">         <a class="code" href="classTHashList.html">THashList</a> *wrklist = (<a class="code" href="classTHashList.html">THashList</a> *) files-&gt;<a class="code" href="classTMap.html#acc52a729b6e110bb8dab01248c7a5a06">GetValue</a>(wi-&gt;<a class="code" href="classTSlaveInfo.html#aa185b628e86f943435844031aa20f256">GetName</a>());</div><div class="line">         <span class="keywordflow">if</span> (!wrklist) {</div><div class="line">            wrklist = <span class="keyword">new</span> <a class="code" href="classTHashList.html">THashList</a>;</div><div class="line">            wrklist-&gt;<a class="code" href="classTCollection.html#a6d6c3b2d795b309c0d8d2a7eebbb30d4">SetName</a>(wi-&gt;<a class="code" href="classTSlaveInfo.html#aa185b628e86f943435844031aa20f256">GetName</a>());</div><div class="line">            files-&gt;<a class="code" href="classTMap.html#a3b5deac1c2345ce1a466134730c8d942">Add</a>(<span class="keyword">new</span> <a class="code" href="classTObjString.html">TObjString</a>(wi-&gt;<a class="code" href="classTSlaveInfo.html#aa185b628e86f943435844031aa20f256">GetName</a>()), wrklist);</div><div class="line">         }</div><div class="line">         wrklist-&gt;<a class="code" href="classTList.html#a1b90ccfbde1729266b585194fa45df14">Add</a>(<span class="keyword">new</span> <a class="code" href="classTObjString.html">TObjString</a>(fntree));</div><div class="line">      }</div><div class="line"></div><div class="line">      <span class="comment">// Generate the files</span></div><div class="line">      proof-&gt;AddInput(files);</div><div class="line">      <span class="keywordflow">if</span> (sameFile) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: friend tree stored in the same file as the main tree&quot;</span>);</div><div class="line">         proof-&gt;SetParameter(<span class="stringliteral">&quot;ProofAux_Action&quot;</span>, <span class="stringliteral">&quot;GenerateTreesSameFile&quot;</span>);</div><div class="line">      } <span class="keywordflow">else</span> {</div><div class="line">         proof-&gt;SetParameter(<span class="stringliteral">&quot;ProofAux_Action&quot;</span>, <span class="stringliteral">&quot;GenerateTrees&quot;</span>);</div><div class="line">      }</div><div class="line">      <span class="comment">// Default 1000 events</span></div><div class="line">      nevt = (nevt &lt; 0) ? 10000 : nevt;</div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;ProofAux_NEvents&quot;</span>, (<a class="code" href="RtypesCore_8h.html#adaf6e69e06203ab5ae4994d1e7590647">Long64_t</a>)nevt);</div><div class="line">      <span class="comment">// Special Packetizer</span></div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;PROOF_Packetizer&quot;</span>, <span class="stringliteral">&quot;TPacketizerFile&quot;</span>);</div><div class="line">      <span class="comment">// Now process</span></div><div class="line">      sel.Form(<span class="stringliteral">&quot;%s/proof/ProofAux.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      proof-&gt;Process(sel.Data(), 1);</div><div class="line">      <span class="comment">// Remove the packetizer specifications</span></div><div class="line">      proof-&gt;DeleteParameters(<span class="stringliteral">&quot;PROOF_Packetizer&quot;</span>);</div><div class="line"></div><div class="line">      <span class="comment">// Print the lists and create the TDSet objects</span></div><div class="line">      <a class="code" href="classTDSet.html">TDSet</a> *dset = <span class="keyword">new</span> <a class="code" href="classTDSet.html">TDSet</a>(<span class="stringliteral">&quot;Tmain&quot;</span>, <span class="stringliteral">&quot;Tmain&quot;</span>);</div><div class="line">      <a class="code" href="classTDSet.html">TDSet</a> *dsetf = <span class="keyword">new</span> <a class="code" href="classTDSet.html">TDSet</a>(<span class="stringliteral">&quot;Tfrnd&quot;</span>, <span class="stringliteral">&quot;Tfrnd&quot;</span>);</div><div class="line">      <span class="keywordflow">if</span> (proof-&gt;GetOutputList()) {</div><div class="line">         <a class="code" href="classTIter.html">TIter</a> nxo(proof-&gt;GetOutputList());</div><div class="line">         <a class="code" href="classTObject.html">TObject</a> *o = 0;</div><div class="line">         <a class="code" href="classTObjString.html">TObjString</a> *os = 0;</div><div class="line">         <span class="keywordflow">while</span> ((o = nxo())) {</div><div class="line">            <a class="code" href="classTList.html">TList</a> *<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a> = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classTList.html">TList</a> *<span class="keyword">&gt;</span> (o);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a> &amp;&amp; !strncmp(<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a>-&gt;GetName(), <span class="stringliteral">&quot;MainList-&quot;</span>, 9)) {</div><div class="line">               <a class="code" href="classTIter.html">TIter</a> nxf(<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a>);</div><div class="line">               <span class="keywordflow">while</span> ((os = (<a class="code" href="classTObjString.html">TObjString</a> *) nxf()))</div><div class="line">                  dset-&gt;<a class="code" href="classTDSet.html#a247933d7af143f474e3d99ded3b08c56">Add</a>(os-&gt;<a class="code" href="classTObjString.html#a4004b639f59f97e02ba47dc05468cc82">GetName</a>());</div><div class="line">            }</div><div class="line">         }</div><div class="line">         nxo.Reset();</div><div class="line">         <span class="keywordflow">while</span> ((o = nxo())) {</div><div class="line">            <a class="code" href="classTList.html">TList</a> *<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a> = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classTList.html">TList</a> *<span class="keyword">&gt;</span> (o);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a> &amp;&amp; !strncmp(<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a>-&gt;GetName(), <span class="stringliteral">&quot;FriendList-&quot;</span>, 11)) {</div><div class="line">               <a class="code" href="classTIter.html">TIter</a> nxf(<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a>);</div><div class="line">               <span class="keywordflow">while</span> ((os = (<a class="code" href="classTObjString.html">TObjString</a> *) nxf()))</div><div class="line">                  dsetf-&gt;<a class="code" href="classTDSet.html#a247933d7af143f474e3d99ded3b08c56">Add</a>(os-&gt;<a class="code" href="classTObjString.html#a4004b639f59f97e02ba47dc05468cc82">GetName</a>());</div><div class="line">            }</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="comment">// Process with friends</span></div><div class="line">      dset-&gt;<a class="code" href="classTDSet.html#a647220c372cad6cbff6f0c3622b162b2">AddFriend</a>(dsetf, <span class="stringliteral">&quot;friend&quot;</span>);</div><div class="line">      sel.Form(<span class="stringliteral">&quot;%s/proof/ProofFriends.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <a class="code" href="classTString.html">TString</a> xopt = aFeedback; <span class="keywordflow">if</span> (!opt.IsNull()) xopt += <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot; %s&quot;</span>, opt.Data());</div><div class="line">      dset-&gt;<a class="code" href="classTDSet.html#ad63213aa7b9c8acbfc5ba43bb988be4b">Process</a>(sel, xopt);</div><div class="line">      <span class="comment">// Clear the files created by this run</span></div><div class="line">      proof-&gt;ClearData(<a class="code" href="classTProof.html#a62679c153c1f767dff9cbf749211ac65a84b0032ac241d585d452a768d82a61b5">TProof::kUnregistered</a> | <a class="code" href="classTProof.html#a62679c153c1f767dff9cbf749211ac65aacee6243fab44cbfdfa34ef242f46d9d">TProof::kForceClear</a>);</div><div class="line"></div><div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;simplefile&quot;</span>) {</div><div class="line"></div><div class="line">      <span class="comment">// ProofSimpleFile is an example of non-data driven analysis with merging</span></div><div class="line">      <span class="comment">// via file and objcets saved in different directories; it creates and</span></div><div class="line">      <span class="comment">// fills with random numbers two sets of a given number of histos</span></div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="namespacefirst.html">first</a> &gt; 0)</div><div class="line">         <span class="comment">// Meaningless for this tutorial</span></div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: warning concept of &#39;first&#39; meaningless for this tutorial&quot;</span></div><div class="line">                <span class="stringliteral">&quot; - ignored&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">      <span class="comment">// Default 100000 events</span></div><div class="line">      nevt = (nevt &lt; 0) ? 1000000 : nevt;</div><div class="line">      <span class="comment">// Find out the number of histograms</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> aNhist;</div><div class="line">      <span class="keywordflow">while</span> (args.Tokenize(tok, from, <span class="stringliteral">&quot; &quot;</span>)) {</div><div class="line">         <span class="comment">// Number of histos</span></div><div class="line">         <span class="keywordflow">if</span> (tok.<a class="code" href="classTString.html#a6d92a45f8b4c0c4d2ed7f318a2cb6f95">BeginsWith</a>(<span class="stringliteral">&quot;nhist=&quot;</span>)) {</div><div class="line">            aNhist = tok;</div><div class="line">            aNhist.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;nhist=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (!aNhist.<a class="code" href="classTString.html#a4573d335b3b16c9a33f724ba38b07fc6">IsDigit</a>()) {</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: error parsing the &#39;nhist=&#39; option (%s) - ignoring&quot;</span>, tok.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">               aNhist = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">            }</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nhist = (aNhist.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>()) ? 16 : aNhist.<a class="code" href="classTString.html#a2175ef79985227132380399df7ca45a9">Atoi</a>();</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: running \&quot;simplefile\&quot; with nhist= %d and nevt= %lld\n&quot;</span>, nhist, nevt);</div><div class="line"></div><div class="line">      <span class="comment">// The number of histograms is added as parameter in the input list</span></div><div class="line">      proof-&gt;SetParameter(<span class="stringliteral">&quot;ProofSimple_NHist&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a84701346fdad56d1d91e06fcbc1b87dc">Long_t</a>)nhist);</div><div class="line"></div><div class="line">      <span class="comment">// Output file</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> fout(aOutFile);</div><div class="line">      <span class="keywordflow">if</span> (fout.IsNull()) {</div><div class="line">         fout.Form(<span class="stringliteral">&quot;%s/SimpleFile.root&quot;</span>, <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#ac5d9e723943c459f731e0b729dc9f7fa">WorkingDirectory</a>());</div><div class="line">         <span class="comment">// Cleanup any existing instance of the output file</span></div><div class="line">         <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#af029c44ab5002d353abf8c0e51659bd9">Unlink</a>(fout);</div><div class="line"></div><div class="line">         <span class="keywordflow">if</span> (!isProofLocal) {</div><div class="line">            <span class="comment">// Setup a local basic xrootd to receive the file</span></div><div class="line">            <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> xrdok = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line">            <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> port = 9000;</div><div class="line">            <span class="keywordflow">while</span> (port &lt; 9010) {</div><div class="line">               <span class="keywordflow">if</span> (checkXrootdAt(port) != 1) {</div><div class="line">                  <span class="keywordflow">if</span> (startXrootdAt(port, <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#ac5d9e723943c459f731e0b729dc9f7fa">WorkingDirectory</a>(), <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>) == 0) {</div><div class="line">                     xrdok = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line">                     <span class="keywordflow">break</span>;</div><div class="line">                  }</div><div class="line">               }</div><div class="line">               port++;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">if</span> (!xrdok) {</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not start basic xrootd on ports 9000-9009 - cannot continue&quot;</span>);</div><div class="line">               <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line">            fout.Insert(0, <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;root://%s:%d/&quot;</span>, <a class="code" href="classTUrl.html">TUrl</a>(<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#aab4a8ac24bc42a135aa6584be2cb415c">HostName</a>()).GetHostFQDN(), port));</div><div class="line">            <span class="comment">// Make a copy of the files on the master before merging</span></div><div class="line">            proof-&gt;AddInput(<span class="keyword">new</span> <a class="code" href="classTNamed.html">TNamed</a>(<span class="stringliteral">&quot;PROOF_OUTPUTFILE_LOCATION&quot;</span>, <span class="stringliteral">&quot;LOCAL&quot;</span>));</div><div class="line">         }</div><div class="line">      }</div><div class="line">      proof-&gt;AddInput(<span class="keyword">new</span> <a class="code" href="classTNamed.html">TNamed</a>(<span class="stringliteral">&quot;PROOF_OUTPUTFILE&quot;</span>, fout.Data()));</div><div class="line"></div><div class="line">      <span class="comment">// The selector string</span></div><div class="line">      sel.Form(<span class="stringliteral">&quot;%s/proof/ProofSimpleFile.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="comment">//</span></div><div class="line">      <span class="comment">// Run it for nevt times</span></div><div class="line">      <a class="code" href="classTString.html">TString</a> xopt = aFeedback; <span class="keywordflow">if</span> (!opt.IsNull()) xopt += <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot; %s&quot;</span>, opt.Data());</div><div class="line">      proof-&gt;Process(sel.Data(), nevt, xopt);</div><div class="line"></div><div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;stdvec&quot;</span>) {</div><div class="line"></div><div class="line">      <span class="comment">// This is an example of runnign a TSelector using standard vectors</span></div><div class="line">      <span class="comment">// Selector used: ProofStdVect</span></div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="namespacefirst.html">first</a> &gt; 0)</div><div class="line">         <span class="comment">// Meaningless for this tutorial</span></div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: %s: warning concept of &#39;first&#39; meaningless for this tutorial&quot;</span></div><div class="line">                <span class="stringliteral">&quot; - ignored&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">      <span class="comment">// Set the default number of events, if needed</span></div><div class="line">      nevt = (nevt &lt; 0) ? 50000 * proof-&gt;GetParallel() : nevt;</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;\nrunProof: running \&quot;stdvec\&quot; with nevt= %lld\n&quot;</span>, nevt);</div><div class="line"></div><div class="line">      <span class="comment">// The selector string</span></div><div class="line">      sel.Form(<span class="stringliteral">&quot;%s/proof/ProofStdVect.C%s&quot;</span>, tutorials.Data(), aMode.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"></div><div class="line">      <a class="code" href="classTString.html">TString</a> xopt;</div><div class="line">      <span class="comment">// Create the dataset &#39;TestStdVect&#39; with &#39;nevt&#39; events</span></div><div class="line">      xopt.<a class="code" href="classTString.html#aeb44d6183d8b1f1b7090dbd3c93f5e39">Form</a>(<span class="stringliteral">&quot;%s %s create&quot;</span>, aFeedback.Data(), opt.Data());</div><div class="line">      proof-&gt;Process(sel.Data(), nevt, xopt);</div><div class="line"></div><div class="line">      <span class="comment">// The dataset must have been registered</span></div><div class="line">      <span class="keywordflow">if</span> (proof-&gt;ExistsDataSet(<span class="stringliteral">&quot;TestStdVect&quot;</span>)) {</div><div class="line"></div><div class="line">         <span class="comment">// Use dataset &#39;TestStdVect&#39;</span></div><div class="line">         xopt.<a class="code" href="classTString.html#aeb44d6183d8b1f1b7090dbd3c93f5e39">Form</a>(<span class="stringliteral">&quot;%s %s&quot;</span>, aFeedback.Data(), opt.Data());</div><div class="line">         proof-&gt;Process(<span class="stringliteral">&quot;TestStdVect&quot;</span>, sel.Data(), xopt);</div><div class="line"></div><div class="line">      } <span class="keywordflow">else</span> {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: dataset &#39;TestStdVect&#39; not available!&quot;</span>);</div><div class="line">      }</div><div class="line"></div><div class="line">   } <span class="keywordflow">else</span> {</div><div class="line">      <span class="comment">// Do not know what to run</span></div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: unknown tutorial: %s&quot;</span>, what);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Save the performance tree</span></div><div class="line">   <span class="keywordflow">if</span> (makePerfTree) {</div><div class="line">      SavePerfTree(proof, aPerfTree.Data());</div><div class="line">      <span class="comment">// Cleanup parameters</span></div><div class="line">      <a class="code" href="TProof_8h.html#acd69714682a1959656a21600ad2d7075">gProof</a>-&gt;<a class="code" href="classTProof.html#a6bfbb1aed742536f1d6b6ea608a84684">DeleteParameters</a>(<span class="stringliteral">&quot;PROOF_StatsHist&quot;</span>);</div><div class="line">      <a class="code" href="TProof_8h.html#acd69714682a1959656a21600ad2d7075">gProof</a>-&gt;<a class="code" href="classTProof.html#a6bfbb1aed742536f1d6b6ea608a84684">DeleteParameters</a>(<span class="stringliteral">&quot;PROOF_StatsTrace&quot;</span>);</div><div class="line">      <a class="code" href="TProof_8h.html#acd69714682a1959656a21600ad2d7075">gProof</a>-&gt;<a class="code" href="classTProof.html#a6bfbb1aed742536f1d6b6ea608a84684">DeleteParameters</a>(<span class="stringliteral">&quot;PROOF_SlaveStatsTrace&quot;</span>);</div><div class="line">   }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//_______________________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> plotNtuple(<a class="code" href="classTProof.html">TProof</a> *p, <span class="keyword">const</span> <span class="keywordtype">char</span> *ds, <span class="keyword">const</span> <span class="keywordtype">char</span> *ntptitle)</div><div class="line">{</div><div class="line">   <span class="comment">// Make some plots from the ntuple &#39;ntp&#39; via PROOF</span></div><div class="line"></div><div class="line">   <span class="comment">//</span></div><div class="line">   <span class="comment">// Create a canvas, with 2 pads</span></div><div class="line">   <span class="comment">//</span></div><div class="line">   <a class="code" href="classTCanvas.html">TCanvas</a> *<a class="code" href="legend1_8C.html#a1259eec59a19080ae1da77e79182c60e">c1</a> = <span class="keyword">new</span> <a class="code" href="classTCanvas.html">TCanvas</a>(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;cv-%s&quot;</span>, ds), ntptitle,800,10,700,780);</div><div class="line">   <a class="code" href="legend1_8C.html#a1259eec59a19080ae1da77e79182c60e">c1</a>-&gt;Divide(1,2);</div><div class="line">   <a class="code" href="classTPad.html">TPad</a> *pad1 = (<a class="code" href="classTPad.html">TPad</a> *) <a class="code" href="legend1_8C.html#a1259eec59a19080ae1da77e79182c60e">c1</a>-&gt;GetPad(1);</div><div class="line">   <a class="code" href="classTPad.html">TPad</a> *pad2 = (<a class="code" href="classTPad.html">TPad</a> *) <a class="code" href="legend1_8C.html#a1259eec59a19080ae1da77e79182c60e">c1</a>-&gt;GetPad(2);</div><div class="line">   <span class="comment">//</span></div><div class="line">   <span class="comment">// Display a function of one ntuple column imposing a condition</span></div><div class="line">   <span class="comment">// on another column.</span></div><div class="line">   pad1-&gt;<a class="code" href="classTPad.html#aec4a3ba705d14dc2fd95ca64a0886620">cd</a>();</div><div class="line">   pad1-&gt;<a class="code" href="classTPad.html#ae1e5e13e5a066bdd5fff06466e63b862">SetGrid</a>();</div><div class="line">   pad1-&gt;<a class="code" href="classTPad.html#a148366f3d7b780d821b56e4ed35d47ea">SetLogy</a>();</div><div class="line">   pad1-&gt;<a class="code" href="classTPad.html#aec568b866da2f20428a961ac594ad1bd">GetFrame</a>()-&gt;<a class="code" href="classTAttFill.html#a4c21db248e10de0dca2300f07f379ec9">SetFillColor</a>(15);</div><div class="line"></div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a767a8703d9e20217a097fa807073ae8b">SetParameter</a>(<span class="stringliteral">&quot;PROOF_LineColor&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)1);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a767a8703d9e20217a097fa807073ae8b">SetParameter</a>(<span class="stringliteral">&quot;PROOF_FillStyle&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)1001);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a767a8703d9e20217a097fa807073ae8b">SetParameter</a>(<span class="stringliteral">&quot;PROOF_FillColor&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)45);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a8ed63ebbf77962581e83a70c7cbcb02a">DrawSelect</a>(ds, <span class="stringliteral">&quot;3*px+2&quot;</span>,<span class="stringliteral">&quot;px**2+py**2&gt;1&quot;</span>);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a767a8703d9e20217a097fa807073ae8b">SetParameter</a>(<span class="stringliteral">&quot;PROOF_FillColor&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)38);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a8ed63ebbf77962581e83a70c7cbcb02a">DrawSelect</a>(ds, <span class="stringliteral">&quot;2*px+2&quot;</span>,<span class="stringliteral">&quot;pz&gt;2&quot;</span>,<span class="stringliteral">&quot;same&quot;</span>);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a767a8703d9e20217a097fa807073ae8b">SetParameter</a>(<span class="stringliteral">&quot;PROOF_FillColor&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)5);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a8ed63ebbf77962581e83a70c7cbcb02a">DrawSelect</a>(ds, <span class="stringliteral">&quot;1.3*px+2&quot;</span>,<span class="stringliteral">&quot;(px^2+py^2&gt;4) &amp;&amp; py&gt;0&quot;</span>,<span class="stringliteral">&quot;same&quot;</span>);</div><div class="line">   pad1-&gt;<a class="code" href="classTPad.html#a1d4c3a9aa04ecfadbc0230c1ce5d0d88">RedrawAxis</a>();</div><div class="line"></div><div class="line">   <span class="comment">//</span></div><div class="line">   <span class="comment">// Display a 3-D scatter plot of 3 columns. Superimpose a different selection.</span></div><div class="line">   pad2-&gt;<a class="code" href="classTPad.html#aec4a3ba705d14dc2fd95ca64a0886620">cd</a>();</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a8ed63ebbf77962581e83a70c7cbcb02a">DrawSelect</a>(ds, <span class="stringliteral">&quot;pz:py:px&quot;</span>,<span class="stringliteral">&quot;(pz&lt;10 &amp;&amp; pz&gt;6)+(pz&lt;4 &amp;&amp; pz&gt;3)&quot;</span>);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a767a8703d9e20217a097fa807073ae8b">SetParameter</a>(<span class="stringliteral">&quot;PROOF_MarkerColor&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)4);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a8ed63ebbf77962581e83a70c7cbcb02a">DrawSelect</a>(ds, <span class="stringliteral">&quot;pz:py:px&quot;</span>,<span class="stringliteral">&quot;pz&lt;6 &amp;&amp; pz&gt;4&quot;</span>,<span class="stringliteral">&quot;same&quot;</span>);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a767a8703d9e20217a097fa807073ae8b">SetParameter</a>(<span class="stringliteral">&quot;PROOF_MarkerColor&quot;</span>, (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)5);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a8ed63ebbf77962581e83a70c7cbcb02a">DrawSelect</a>(ds, <span class="stringliteral">&quot;pz:py:px&quot;</span>,<span class="stringliteral">&quot;pz&lt;4 &amp;&amp; pz&gt;3&quot;</span>,<span class="stringliteral">&quot;same&quot;</span>);</div><div class="line">   <a class="code" href="classTPaveText.html">TPaveText</a> *l2 = <span class="keyword">new</span> <a class="code" href="classTPaveText.html">TPaveText</a>(0.,0.6,0.9,0.95);</div><div class="line">   l2-&gt;<a class="code" href="classTAttFill.html#a4c21db248e10de0dca2300f07f379ec9">SetFillColor</a>(42);</div><div class="line">   l2-&gt;<a class="code" href="classTAttText.html#a3ccefe554f443f21fa9695afca230275">SetTextAlign</a>(12);</div><div class="line">   l2-&gt;<a class="code" href="classTPaveText.html#a0358c389da35224e49876ca14d422860">AddText</a>(<span class="stringliteral">&quot;You can interactively rotate this view in 2 ways:&quot;</span>);</div><div class="line">   l2-&gt;<a class="code" href="classTPaveText.html#a0358c389da35224e49876ca14d422860">AddText</a>(<span class="stringliteral">&quot;  - With the RotateCube in clicking in this pad&quot;</span>);</div><div class="line">   l2-&gt;<a class="code" href="classTPaveText.html#a0358c389da35224e49876ca14d422860">AddText</a>(<span class="stringliteral">&quot;  - Selecting View with x3d in the View menu&quot;</span>);</div><div class="line">   l2-&gt;<a class="code" href="classTPaveText.html#a0af35def1a3f2f0f9ef5e796e08e04e4">Draw</a>();</div><div class="line"></div><div class="line">   <span class="comment">// Final update</span></div><div class="line">   <a class="code" href="legend1_8C.html#a1259eec59a19080ae1da77e79182c60e">c1</a>-&gt;cd();</div><div class="line">   <a class="code" href="legend1_8C.html#a1259eec59a19080ae1da77e79182c60e">c1</a>-&gt;Update();</div><div class="line"></div><div class="line">   <span class="comment">// Clear parameters used for the plots</span></div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a6bfbb1aed742536f1d6b6ea608a84684">DeleteParameters</a>(<span class="stringliteral">&quot;PROOF_*Color&quot;</span>);</div><div class="line">   p-&gt;<a class="code" href="classTProof.html#a6bfbb1aed742536f1d6b6ea608a84684">DeleteParameters</a>(<span class="stringliteral">&quot;PROOF_*Style&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> SavePerfTree(<a class="code" href="classTProof.html">TProof</a> *proof, <span class="keyword">const</span> <span class="keywordtype">char</span> *fn)</div><div class="line">{</div><div class="line">   <span class="comment">// Save PROOF timing information from TPerfStats to file &#39;fn&#39;</span></div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (!proof) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;PROOF must be run to save output performance information&quot;</span>);;</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line">   <span class="keywordflow">if</span> (!proof-&gt;<a class="code" href="classTProof.html#ab541e7258934a4b15b8ce51ebe4c227b">GetOutputList</a>() || proof-&gt;<a class="code" href="classTProof.html#ab541e7258934a4b15b8ce51ebe4c227b">GetOutputList</a>()-&gt;<a class="code" href="classTCollection.html#af0ca154693eeb1e9d9a0ff3a8d43e466">GetSize</a>() &lt;= 0) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;PROOF outputlist undefined or empty&quot;</span>);;</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line"></div><div class="line">   <a class="code" href="classTFile.html">TFile</a> <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>(fn, <span class="stringliteral">&quot;RECREATE&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> (<a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>.IsZombie()) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;ERROR: could not open file &#39;%s&#39; for writing&quot;</span>, fn);;</div><div class="line">   } <span class="keywordflow">else</span> {</div><div class="line">      <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>.cd();</div><div class="line">      <a class="code" href="classTIter.html">TIter</a> nxo(proof-&gt;<a class="code" href="classTProof.html#ab541e7258934a4b15b8ce51ebe4c227b">GetOutputList</a>());</div><div class="line">      <a class="code" href="classTObject.html">TObject</a>* obj = 0;</div><div class="line">      <span class="keywordflow">while</span> ((obj = nxo())) {</div><div class="line">         <a class="code" href="classTString.html">TString</a> objname(obj-&gt;GetName());</div><div class="line">         <span class="keywordflow">if</span> (objname.BeginsWith(<span class="stringliteral">&quot;PROOF_&quot;</span>)) {</div><div class="line">            <span class="comment">// Must list the objects since other PROOF_ objects exist</span></div><div class="line">            <span class="comment">// besides timing objects</span></div><div class="line">            <span class="keywordflow">if</span> (objname == <span class="stringliteral">&quot;PROOF_PerfStats&quot;</span> ||</div><div class="line">                objname == <span class="stringliteral">&quot;PROOF_PacketsHist&quot;</span> ||</div><div class="line">                objname == <span class="stringliteral">&quot;PROOF_EventsHist&quot;</span> ||</div><div class="line">                objname == <span class="stringliteral">&quot;PROOF_NodeHist&quot;</span> ||</div><div class="line">                objname == <span class="stringliteral">&quot;PROOF_LatencyHist&quot;</span> ||</div><div class="line">                objname == <span class="stringliteral">&quot;PROOF_ProcTimeHist&quot;</span> ||</div><div class="line">                objname == <span class="stringliteral">&quot;PROOF_CpuTimeHist&quot;</span>)</div><div class="line">               obj-&gt;Write();</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>.Close();</div><div class="line">   }</div><div class="line"></div><div class="line">}</div></div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Gerardo Ganis </dd></dl>

<p class="definition">Definition in file <a class="el" href="runProof_8C_source.html">runProof.C</a>.</p>
</div></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:10:22 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
