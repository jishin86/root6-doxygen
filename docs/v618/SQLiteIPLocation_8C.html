<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tutorials/sql/SQLiteIPLocation.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_677901ba582ee8d5c0d16eec52845ba7.html">sql</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SQLiteIPLocation.C File Reference<div class="ingroups"><a class="el" href="group__Tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorial__sql.html">SQL tutorials</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p> <a href="http://nbviewer.jupyter.org/url/root.cern.ch/doc/master/notebooks/SQLiteIPLocation.C.nbconvert.ipynb" target="_blank"><img src= notebook.gif alt="View in nbviewer" style="height:1em" ></a> <a href="https://cern.ch/swanserver/cgi-bin/go?projurl=https://root.cern.ch/doc/master/notebooks/SQLiteIPLocation.C.nbconvert.ipynb" target="_blank"><img src="http://swanserver.web.cern.ch/swanserver/images/badge_swan_white_150.png"  alt="Open in SWAN" style="height:1em" ></a>  </p>
<p>This tutorial demonstrates how <a class="el" href="classTSQLServer.html">TSQLServer</a> can be used to create a connection with a SQlite3 database. It accesses the Sqlite data base. Download from <a href="https://root.cern/download/root_download_stats.sqlite">https://root.cern/download/root_download_stats.sqlite</a> The world map is hold by a <a class="el" href="classTH2Poly.html" title="2D Histogram with Polygonal Bins ">TH2Poly</a> histogram which, after filling, will show the world wide dispersion of <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a>'s users. To histogram filling, is done having as input parameters the two columns of the database: "IPLongitude' - for the longitude, and the
"IPLatitude" - for the latitude. The data related to the latitude and the longitude has been provided from the log files storing the users IP. This product includes GeoLite2 data created by MaxMind, available from <a href="http://www.maxmind.com">http://www.maxmind.com</a>.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="TSQLiteServer_8h.html">TSQLiteServer.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="TSQLiteResult_8h.html">TSQLiteResult.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="TSQLRow_8h.html">TSQLRow.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="TString_8h.html">TString.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="TH2F_8h.html">TH2F.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> SQLiteIPLocation() {</div><div class="line"></div><div class="line">   <a class="code" href="classTSQLServer.html">TSQLServer</a> *db = <a class="code" href="classTSQLServer.html#ac43690d7d591204f2eb1bea4dfdfccdf">TSQLServer::Connect</a>(<span class="stringliteral">&quot;sqlite://root_download_stats.sqlite&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">   <a class="code" href="classTFile.html">TFile</a> *<a class="code" href="md5_8inl.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="classTFile.html#aec5f3fae0774aabfc615ebb4b00fe5e0">TFile::Open</a>(<span class="stringliteral">&quot;http://root.cern.ch/files/WM.root&quot;</span>);</div><div class="line">   <a class="code" href="classTH2Poly.html">TH2Poly</a> *WM;</div><div class="line">   WM = (<a class="code" href="classTH2Poly.html">TH2Poly</a>*) <a class="code" href="md5_8inl.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;Get(<span class="stringliteral">&quot;WM&quot;</span>);</div><div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span> *location = <span class="stringliteral">&quot;SELECT IPLatitude, IPLongitude FROM accesslog;&quot;</span>;</div><div class="line">   <a class="code" href="classTSQLResult.html">TSQLResult</a> *locationRes = db-&gt;<a class="code" href="classTSQLServer.html#a55949eb405de0f9c06cbda41ce043868">Query</a>(location);</div><div class="line"></div><div class="line">   <span class="keywordflow">while</span> (<a class="code" href="classTSQLRow.html">TSQLRow</a> *row = locationRes-&gt;<a class="code" href="classTSQLResult.html#aeedbb85f5eb07b80bf3c544687e85871">Next</a>()) {</div><div class="line">      <span class="keywordflow">if</span> (!row-&gt;GetField(0)[0])</div><div class="line">         <span class="keywordflow">continue</span>;</div><div class="line">      std::string sLatitude(row-&gt;GetField(0));</div><div class="line">      std::string sLongitude(row-&gt;GetField(1));</div><div class="line">      <span class="keywordtype">float</span> latitude = std::stof(sLatitude);</div><div class="line">      <span class="keywordtype">float</span> longitude = std::stof(sLongitude);</div><div class="line">      WM-&gt;<a class="code" href="classTH2Poly.html#a581e82636c2883c94453eee35176308c">Fill</a>(longitude, latitude);</div><div class="line"></div><div class="line">     <span class="keyword">delete</span> row;</div><div class="line">   }</div><div class="line"></div><div class="line">   <a class="code" href="classTCanvas.html">TCanvas</a> *locationHistogram = <span class="keyword">new</span> <a class="code" href="classTCanvas.html">TCanvas</a>();</div><div class="line"></div><div class="line">   locationHistogram-&gt;<a class="code" href="classTPad.html#ae303bd04bf8d378074e6e714ec57d70b">SetLogz</a>(1);</div><div class="line">   locationHistogram-&gt;<a class="code" href="classTCanvas.html#a2ebf630e28575140d5031494dc2bfc67">ToggleEventStatus</a>();</div><div class="line">   WM-&gt;<a class="code" href="classTH1.html#aa53a024a9e94d5ec91e3ef49e49563da">Draw</a>(<span class="stringliteral">&quot;colz&quot;</span>);</div><div class="line">}</div></div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Alexandra-Maria Dobrescu 08/2018 </dd></dl>

<p class="definition">Definition in file <a class="el" href="SQLiteIPLocation_8C_source.html">SQLiteIPLocation.C</a>.</p>
</div></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:10:29 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
