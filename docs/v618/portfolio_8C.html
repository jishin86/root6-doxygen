<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tutorials/quadp/portfolio.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_5f9a1c2ccc36d491e9852f6adb006178.html">quadp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">portfolio.C File Reference<div class="ingroups"><a class="el" href="group__Tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorial__quadp.html">Quadratic programming package.</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p> <a href="http://nbviewer.jupyter.org/url/root.cern.ch/doc/master/notebooks/portfolio.C.nbconvert.ipynb" target="_blank"><img src= notebook.gif alt="View in nbviewer" style="height:1em" ></a> <a href="https://cern.ch/swanserver/cgi-bin/go?projurl=https://root.cern.ch/doc/master/notebooks/portfolio.C.nbconvert.ipynb" target="_blank"><img src="http://swanserver.web.cern.ch/swanserver/images/badge_swan_white_150.png"  alt="Open in SWAN" style="height:1em" ></a>  This macro shows in detail the use of the quadratic programming package quadp . </p>
<p>Running this macro :</p>
<div class="fragment"><div class="line">.x portfolio.C+</div></div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line"><a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a6ff4c4c6cd8a75a199a30dd94359f205">Load</a>(<span class="stringliteral">&quot;libQuadp&quot;</span>);</div><div class="line">.L portFolio.C+; portfolio()</div></div><!-- fragment --><p>Let's first review what we exactly mean by "quadratic programming" :</p>
<p>We want to minimize the following objective function :</p>
<p>\( c^T x + ( 1/2 ) x^T Q x \) wrt. the vector \( x \)</p>
<p>\( c \) is a vector and \( Q \) a symmetric positive definite matrix</p>
<p>You might wonder what is so special about this objective which is quadratic in the unknowns, that can not be done by Minuit/Fumili . Well, we have in addition the following boundary conditions on \( x \):</p>
<p class="formulaDsp">
\[ A x = b \\ clo \le C x \le cup \\ xlo \le x \le xup \]
</p>
<p> where A and C are arbitrary matrices and the rest are vectors</p>
<p>Not all these constraints have to be defined . Our example will only use \( xlo \), \( A \) and \( b \) Still, this could be handled by a general non-linear minimizer like Minuit by introducing so-called "slack" variables . However, quadp is tailored to objective functions not more complex than being quadratic . This allows usage of solving techniques which are even stable for problems involving for instance 500 variables, 100 inequality conditions and 50 equality conditions .</p>
<p>Enough said about quadratic programming, let's return to our example . Suppose, after a long day of doing physics, you have a look at your investments and realize that an early retirement is not possible, given the returns of your stocks . So what now ? <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a> to the rescue ...</p>
<p>In 1990 Harry Markowitz was awarded the Nobel prize for economics: " his work provided new tools
for weighing the risks and rewards of different investments and for valuing corporate stocks and bonds" . In plain English, he developed the tools to balance greed and fear, we want the maximum return with the minimum amount of risk. Our stock portfolio should be at the <a href="see http://www.riskglossary.com/articles/efficient_frontier.htm">"Efficient Frontier"</a>. To quantify better the risk we are willing to take, we define a utility function \( U(x) \). It describes as a function of our total assets \( x \), our "satisfaction" . A common choice is \( 1-exp(-k*x) \) (the reason for the exponent will be clear later) . The parameter \( k \) is the risk-aversion factor . For small values of \( k \) the satisfaction is small for small values of \( x \); by increasing \( x \) the satisfaction can still be increased significantly . For large values of \( k \), \( U(x) \) increases rapidly to 1, there is no increase in satisfaction for additional dollars earned .</p>
<p>In summary :</p><ul>
<li>small \( k \) ==&gt; risk-loving investor</li>
<li>large \( k \) ==&gt; risk-averse investor</li>
</ul>
<p>Suppose we have for nrStocks the historical daily returns \( r = closing_price(n) - closing_price(n-1) \). Define a vector \( x \) of length of \( nrStocks \), which contains the fraction of our money invested in each stock . We can calculate the average daily return \( z \) of our portfolio and its variance using the portfolio covariance Covar :</p>
<p>\( z = r^T x \) and \( var = x^T Covar x \)</p>
<p>Assuming that the daily returns have a Normal distribution, \( N(x) \), so will \( z \) with mean \( r^T x \) and variance \( x^T Covar x \)</p>
<p>The expected value of the utility function is :</p>
<p class="formulaDsp">
\[ E(u(x)) = Int (1-exp(-k*x) N(x) dx \\ = 1-exp(-k (r^T x - 0.5 k x^T Covar x) ) \\ \]
</p>
<p>Its value is maximised by maximising \( r^T x -0.5 k x^T Covar x \) under the condition \( sum (x_i) = 1 \), meaning we want all our money invested and \( x_i \ge 0 \), we can not "short" a stock</p>
<p>For 10 stocks we got the historical daily data for Sep-2000 to Jun-2004:</p>
<ul>
<li>GE : General Electric Co</li>
<li>SUNW : Sun Microsystems Inc</li>
<li>QCOM : Qualcomm Inc</li>
<li>BRCM : Broadcom Corp</li>
<li>TYC : Tyco International Ltd</li>
<li>IBM : International Business Machines Corp</li>
<li>AMAT : Applied Materials Inc</li>
<li>C : Citigroup Inc</li>
<li>PFE : Pfizer Inc</li>
<li>HD : Home Depot Inc</li>
</ul>
<p>We calculate the optimal portfolio for 2.0 and 10.0 .</p>
<p>Food for thought :</p><ul>
<li>We assumed that the stock returns have a Normal distribution . Check this assumption by histogramming the stock returns !</li>
<li>We used for the expected return in the objective function, the flat average over a time period . Investment firms will put significant resources in improving the return prediction .</li>
<li>If you want to trade significant number of shares, several other considerations have to be taken into account :<ul>
<li>If you are going to buy, you will drive the price up (so-called "slippage") . This can be taken into account by adding terms to the objective (Google for "slippage optimization")</li>
<li>FTC regulations might have to be added to the inequality constraints</li>
</ul>
</li>
<li>Investment firms do not want to be exposed to the "market" as defined by a broad index like the S&amp;P and "hedge" this exposure away . A perfect hedge this can be added as an equality constrain, otherwise add an inequality constrain .</li>
</ul>
<div class="image">
<img src="pict1_portfolio.C.png" alt="pict1_portfolio.C.png" width="800"/>
</div>
 <div class="fragment"><div class="line"></div><div class="line">stock     daily  daily   w1     w2</div><div class="line">symb      return sdv              </div><div class="line">GE : 1.001  0.022  0.000  0.134</div><div class="line">SUNW  : 1.004  0.047  0.676  0.145</div><div class="line">QCOM  : 1.001  0.039  0.000  0.000</div><div class="line">BRCM  : 1.003  0.056  0.179  0.035</div><div class="line">TYC   : 1.001  0.042  0.145  0.069</div><div class="line">IBM   : 1.001  0.023  0.000  0.096</div><div class="line">AMAT  : 1.001  0.040  0.000  0.000</div><div class="line">C  : 1.000  0.023  0.000  0.000</div><div class="line">PFE   : 1.000  0.019  0.000  0.424</div><div class="line">HD : 1.001  0.029  0.000  0.098</div></div><!-- fragment --> <div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Riostream_8h.html">Riostream.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TCanvas_8h.html">TCanvas.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TFile_8h.html">TFile.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TMath_8h.html">TMath.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TTree_8h.html">TTree.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TArrayF_8h.html">TArrayF.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TH1_8h.html">TH1.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TF1_8h.html">TF1.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TLegend_8h.html">TLegend.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TSystem_8h.html">TSystem.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TMatrixD_8h.html">TMatrixD.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TMatrixDSym_8h.html">TMatrixDSym.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TVectorD_8h.html">TVectorD.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TQpProbDens_8h.html">TQpProbDens.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGondzioSolver_8h.html">TGondzioSolver.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nrStocks = 10;</div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a72a4388b7fc57f981af8c65fefcceb1f">Char_t</a> *stocks[] =</div><div class="line">     {<span class="stringliteral">&quot;GE&quot;</span>,<span class="stringliteral">&quot;SUNW&quot;</span>,<span class="stringliteral">&quot;QCOM&quot;</span>,<span class="stringliteral">&quot;BRCM&quot;</span>,<span class="stringliteral">&quot;TYC&quot;</span>,<span class="stringliteral">&quot;IBM&quot;</span>,<span class="stringliteral">&quot;AMAT&quot;</span>,<span class="stringliteral">&quot;C&quot;</span>,<span class="stringliteral">&quot;PFE&quot;</span>,<span class="stringliteral">&quot;HD&quot;</span>};</div><div class="line"></div><div class="line"><span class="keyword">class </span>TStockDaily  {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> fDate;</div><div class="line">  <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> fOpen;     <span class="comment">// 100*open_price</span></div><div class="line">  <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> fHigh;     <span class="comment">// 100*high_price</span></div><div class="line">  <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> fLow;      <span class="comment">// 100*low_price</span></div><div class="line">  <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> fClose;    <span class="comment">// 100*close_price</span></div><div class="line">  <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> fVol;</div><div class="line">  <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> fCloseAdj; <span class="comment">// 100*close_price adjusted for splits and dividend</span></div><div class="line"></div><div class="line">  TStockDaily() {</div><div class="line">     fDate = fVol = fOpen = fHigh = fLow = fClose = fCloseAdj = 0;</div><div class="line">  }</div><div class="line">  <span class="keyword">virtual</span> ~TStockDaily() {}</div><div class="line"></div><div class="line">  <a class="code" href="Rtypes_8h.html#a0f5f4feb8484fa7bec8adf82b6c3836b">ClassDef</a>(TStockDaily,1)</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------</span></div><div class="line"><a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> RiskProfile(<a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> *<a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>, <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> *par) {</div><div class="line">  <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> riskFactor = par[0];</div><div class="line">  <span class="keywordflow">return</span> 1-<a class="code" href="namespaceTMath.html#a428950de9bddacfb35915a9603880005">TMath::Exp</a>(-riskFactor*<a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>[0]);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------</span></div><div class="line"><a class="code" href="classTArrayF.html">TArrayF</a> &amp;StockReturn(<a class="code" href="classTFile.html">TFile</a> *<a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>,<span class="keyword">const</span> <a class="code" href="classTString.html">TString</a> &amp;name,<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> sDay,<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> eDay)</div><div class="line">{</div><div class="line">  <a class="code" href="classTTree.html">TTree</a> *tDaily = (<a class="code" href="classTTree.html">TTree</a>*)<a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>-&gt;Get(name);</div><div class="line">  TStockDaily *data = 0;</div><div class="line">  tDaily-&gt;<a class="code" href="classTTree.html#a39b867210e4a77ef44917fd5e7898a1d">SetBranchAddress</a>(<span class="stringliteral">&quot;daily&quot;</span>,&amp;data);</div><div class="line">  <a class="code" href="classTBranch.html">TBranch</a> *b_closeAdj = tDaily-&gt;<a class="code" href="classTTree.html#a0b37fd6f19f6ef70b37c36b64242c2f4">GetBranch</a>(<span class="stringliteral">&quot;fCloseAdj&quot;</span>);</div><div class="line">  <a class="code" href="classTBranch.html">TBranch</a> *b_date     = tDaily-&gt;<a class="code" href="classTTree.html#a0b37fd6f19f6ef70b37c36b64242c2f4">GetBranch</a>(<span class="stringliteral">&quot;fDate&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">//read only the &quot;adjusted close&quot; branch for all entries</span></div><div class="line">  <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nrEntries = (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)tDaily-&gt;<a class="code" href="classTTree.html#a6d2d812b687b34a8185c955727fb9575">GetEntries</a>();</div><div class="line">  <a class="code" href="classTArrayF.html">TArrayF</a> closeAdj(nrEntries);</div><div class="line">  <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> i = 0; i &lt; nrEntries; i++) {</div><div class="line">    b_date-&gt;<a class="code" href="classTBranch.html#a4f9c8c55ab275930f2fc2f9262e31f91">GetEntry</a>(i);</div><div class="line">    b_closeAdj-&gt;<a class="code" href="classTBranch.html#a4f9c8c55ab275930f2fc2f9262e31f91">GetEntry</a>(i);</div><div class="line">    <span class="keywordflow">if</span> (data-&gt;fDate &gt;= sDay &amp;&amp; data-&gt;fDate &lt;= eDay)</div><div class="line">      closeAdj[i] = data-&gt;fCloseAdj/100.;</div><div class="line">  }</div><div class="line"></div><div class="line">  <a class="code" href="classTArrayF.html">TArrayF</a> *<a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a> = <span class="keyword">new</span> <a class="code" href="classTArrayF.html">TArrayF</a>(nrEntries-1);</div><div class="line">  <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> i = 1; i &lt; nrEntries; i++)</div><div class="line"><span class="comment">//    (*r)[i-1] = closeAdj[i]-closeAdj[i-1];</span></div><div class="line">    (*<a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>)[i-1] = closeAdj[i]/closeAdj[i-1];</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> *<a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#ifndef __MAKECINT__</span></div><div class="line"><span class="comment">//---------------------------------------------------------------------------</span></div><div class="line"><a class="code" href="classTVectorT.html">TVectorD</a> OptimalInvest(<a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> riskFactor,<a class="code" href="classTVectorT.html">TVectorD</a> <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>,<a class="code" href="classTMatrixTSym.html">TMatrixDSym</a> Covar)</div><div class="line">{</div><div class="line"><span class="comment">// what the quadratic programming package will do:</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  minimize    c^T x + ( 1/2 ) x^T Q x</span></div><div class="line"><span class="comment">//  subject to                A x  = b</span></div><div class="line"><span class="comment">//                    clo &lt;=  C x &lt;= cup</span></div><div class="line"><span class="comment">//                    xlo &lt;=    x &lt;= xup</span></div><div class="line"><span class="comment">// what we want :</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  maximize    c^T x - k ( 1/2 ) x^T Q x</span></div><div class="line"><span class="comment">//  subject to        sum_x x_i = 1</span></div><div class="line"><span class="comment">//                    0 &lt;= x_i</span></div><div class="line"></div><div class="line">  <span class="comment">// We have nrStocks weights to determine,</span></div><div class="line">  <span class="comment">// 1 equality- and 0 inequality- equations (the simple square boundary</span></div><div class="line">  <span class="comment">// condition (xlo &lt;= x &lt;= xup) does not count)</span></div><div class="line"></div><div class="line">  <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nrVar     = nrStocks;</div><div class="line">  <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nrEqual   = 1;</div><div class="line">  <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nrInEqual = 0;</div><div class="line"></div><div class="line">  <span class="comment">// flip the sign of the objective function because we want to maximize</span></div><div class="line">  <a class="code" href="classTVectorT.html">TVectorD</a>    <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> = -1.*<a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>;</div><div class="line">  <a class="code" href="classTMatrixTSym.html">TMatrixDSym</a> <a class="code" href="namespaceROOT_1_1Math_1_1Cephes.html#a509213a0da1af164d90173ee780e089e">Q</a> = riskFactor*Covar;</div><div class="line"></div><div class="line">  <span class="comment">// equality equation</span></div><div class="line">  <a class="code" href="classTMatrixT.html">TMatrixD</a> <a class="code" href="namespaceROOT_1_1Math_1_1Cephes.html#a96aa5ae65c196960b1b7cf2ab4d487f3">A</a>(nrEqual,nrVar); <a class="code" href="namespaceROOT_1_1Math_1_1Cephes.html#a96aa5ae65c196960b1b7cf2ab4d487f3">A</a> = 1;</div><div class="line">  <a class="code" href="classTVectorT.html">TVectorD</a> <a class="code" href="TRolke_8cxx.html#a1a2354f40e332ad13673b70afc2c0dbf">b</a>(nrEqual); <a class="code" href="TRolke_8cxx.html#a1a2354f40e332ad13673b70afc2c0dbf">b</a> = 1;</div><div class="line"></div><div class="line">  <span class="comment">// inequality equation</span></div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="comment">// - although not applicable in the current situation since nrInEqual = 0, one</span></div><div class="line">  <span class="comment">//   has to specify not only clo and cup but also an index vector iclo and icup,</span></div><div class="line">  <span class="comment">//   whose values are either 0 or 1 . If iclo[j] = 1, the lower boundary condition</span></div><div class="line">  <span class="comment">//   is active on x[j], etc. ...</span></div><div class="line"></div><div class="line">  <a class="code" href="classTMatrixT.html">TMatrixD</a> <a class="code" href="namespaceROOT_1_1Math_1_1Cephes.html#ae4a80ce521bd09f94f06eec25c975c0e">C</a>   (nrInEqual,nrVar);</div><div class="line">  <a class="code" href="classTVectorT.html">TVectorD</a> clo (nrInEqual);</div><div class="line">  <a class="code" href="classTVectorT.html">TVectorD</a> cup (nrInEqual);</div><div class="line">  <a class="code" href="classTVectorT.html">TVectorD</a> iclo(nrInEqual);</div><div class="line">  <a class="code" href="classTVectorT.html">TVectorD</a> icup(nrInEqual);</div><div class="line"></div><div class="line">  <span class="comment">// simple square boundary condition : 0 &lt;= x_i, so only xlo is relevant .</span></div><div class="line">  <span class="comment">// Like for clo and cup above, we have to define an index vector ixlo and ixup .</span></div><div class="line">  <span class="comment">// Since each variable has the lower boundary, we can set the whole vector</span></div><div class="line">  <span class="comment">// ixlo = 1</span></div><div class="line"></div><div class="line">  <a class="code" href="classTVectorT.html">TVectorD</a> xlo (nrVar); xlo  = 0;</div><div class="line">  <a class="code" href="classTVectorT.html">TVectorD</a> xup (nrVar); xup  = 0;</div><div class="line">  <a class="code" href="classTVectorT.html">TVectorD</a> ixlo(nrVar); ixlo = 1;</div><div class="line">  <a class="code" href="classTVectorT.html">TVectorD</a> ixup(nrVar); ixup = 0;</div><div class="line"></div><div class="line">  <span class="comment">// setup the quadratic programming problem . Since a small number of variables are</span></div><div class="line">  <span class="comment">// involved and &quot;Q&quot; has everywhere entries, we chose the dense version &quot;TQpProbDens&quot; .</span></div><div class="line">  <span class="comment">// In case of a sparse formulation, simply replace all &quot;Dens&quot; by &quot;Sparse&quot; below and</span></div><div class="line">  <span class="comment">// use TMatrixDSparse instead of TMatrixDSym and TMatrixD</span></div><div class="line"></div><div class="line">  <a class="code" href="classTQpProbDens.html">TQpProbDens</a> *qp = <span class="keyword">new</span> <a class="code" href="classTQpProbDens.html">TQpProbDens</a>(nrVar,nrEqual,nrInEqual);</div><div class="line"></div><div class="line">  <span class="comment">// stuff all the matrices/vectors defined above in the proper places</span></div><div class="line"></div><div class="line">  <a class="code" href="classTQpDataDens.html">TQpDataDens</a> *prob = (<a class="code" href="classTQpDataDens.html">TQpDataDens</a> *)qp-&gt;<a class="code" href="classTQpProbDens.html#a4632d0a150eb31bc022ca358cb2ec22b">MakeData</a>(<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>,<a class="code" href="namespaceROOT_1_1Math_1_1Cephes.html#a509213a0da1af164d90173ee780e089e">Q</a>,xlo,ixlo,xup,ixup,<a class="code" href="namespaceROOT_1_1Math_1_1Cephes.html#a96aa5ae65c196960b1b7cf2ab4d487f3">A</a>,<a class="code" href="TRolke_8cxx.html#a1a2354f40e332ad13673b70afc2c0dbf">b</a>,<a class="code" href="namespaceROOT_1_1Math_1_1Cephes.html#ae4a80ce521bd09f94f06eec25c975c0e">C</a>,clo,iclo,cup,icup);</div><div class="line"></div><div class="line">  <span class="comment">// setup the nrStock variables, vars-&gt;fX will contain the final solution</span></div><div class="line"></div><div class="line">  <a class="code" href="classTQpVar.html">TQpVar</a>      *vars  = qp-&gt;<a class="code" href="classTQpProbDens.html#ac6dafe9d585967c51cba8f7af4cc8b9c">MakeVariables</a>(prob);</div><div class="line">  <a class="code" href="classTQpResidual.html">TQpResidual</a> *resid = qp-&gt;<a class="code" href="classTQpProbDens.html#a7b69c5917c1479f6171133ad030ab8e4">MakeResiduals</a>(prob);</div><div class="line"></div><div class="line">  <span class="comment">// Now we have to choose the method of solving, either TGondzioSolver or TMehrotraSolver</span></div><div class="line">  <span class="comment">// The Gondzio method is more sophisticated and therefore numerically more involved</span></div><div class="line">  <span class="comment">// If one want the Mehrotra method, simply replace &quot;Gondzio&quot; by &quot;Mehrotra&quot; .</span></div><div class="line"></div><div class="line">  <a class="code" href="classTGondzioSolver.html">TGondzioSolver</a> *<a class="code" href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">s</a> = <span class="keyword">new</span> <a class="code" href="classTGondzioSolver.html">TGondzioSolver</a>(qp,prob);</div><div class="line">  <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> status = <a class="code" href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">s</a>-&gt;Solve(prob,vars,resid);</div><div class="line"></div><div class="line">  <span class="keyword">const</span> <a class="code" href="classTVectorT.html">TVectorD</a> weight = vars-&gt;<a class="code" href="classTQpVar.html#a059103fe1a38d0066681562834bdd7b1">fX</a>;</div><div class="line"></div><div class="line">  <span class="keyword">delete</span> qp; <span class="keyword">delete</span> prob; <span class="keyword">delete</span> vars; <span class="keyword">delete</span> resid; <span class="keyword">delete</span> <a class="code" href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">s</a>;</div><div class="line">  <span class="keywordflow">if</span> (status != 0) {</div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Could not solve this problem.&quot;</span> &lt;&lt;endl;</div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="TVectorDfwd_8h.html#a901d7ac901e3fd3b94ba0aef558b4a0e">TVectorD</a>(nrStocks);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> weight;</div><div class="line">}</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"> <span class="comment">//---------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> portfolio()</div><div class="line">{</div><div class="line">   <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> sDay = 20000809;</div><div class="line">   <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> eDay = 20040602;</div><div class="line"></div><div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span> *fname = <span class="stringliteral">&quot;stock.root&quot;</span>;</div><div class="line">   <a class="code" href="classTFile.html">TFile</a> *<a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a> = 0;</div><div class="line">   <span class="keywordflow">if</span> (!<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(fname)) {</div><div class="line">      <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a> = <a class="code" href="classTFile.html#aec5f3fae0774aabfc615ebb4b00fe5e0">TFile::Open</a>(fname);</div><div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/quadp/%s&quot;</span>, <a class="code" href="classTROOT.html#a8a0fd945f4d3715691afe55c9730378e">TROOT::GetTutorialDir</a>().Data(), fname))) {</div><div class="line">      <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a> = <a class="code" href="classTFile.html#aec5f3fae0774aabfc615ebb4b00fe5e0">TFile::Open</a>(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/quadp/%s&quot;</span>, <a class="code" href="classTROOT.html#a8a0fd945f4d3715691afe55c9730378e">TROOT::GetTutorialDir</a>().Data(), fname));</div><div class="line">   } <span class="keywordflow">else</span> {</div><div class="line">      printf(<span class="stringliteral">&quot;accessing %s file from http://root.cern.ch/files\n&quot;</span>,fname);</div><div class="line">      <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a> = <a class="code" href="classTFile.html#aec5f3fae0774aabfc615ebb4b00fe5e0">TFile::Open</a>(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;http://root.cern.ch/files/%s&quot;</span>,fname));</div><div class="line">   }</div><div class="line">   <span class="keywordflow">if</span> (!<a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>) <span class="keywordflow">return</span>;</div><div class="line"></div><div class="line">   <a class="code" href="classTArrayF.html">TArrayF</a> *data = <span class="keyword">new</span> <a class="code" href="classTArrayF.html">TArrayF</a>[nrStocks];</div><div class="line">   <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> i = 0; i &lt; nrStocks; i++) {</div><div class="line">      <span class="keyword">const</span> <a class="code" href="classTString.html">TString</a> symbol = stocks[i];</div><div class="line">      data[i] = StockReturn(<a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>,symbol,sDay,eDay);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nrData = data[0].<a class="code" href="classTArray.html#a964c1746eff2d27a0b9c667bf9151488">GetSize</a>();</div><div class="line"></div><div class="line">   <a class="code" href="classTVectorT.html">TVectorD</a> <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>(nrStocks);</div><div class="line">   <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> i = 0; i &lt; nrStocks; i++)</div><div class="line">      <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[i] = data[i].GetSum()/nrData;</div><div class="line"></div><div class="line">   <a class="code" href="classTMatrixTSym.html">TMatrixDSym</a> Covar(nrStocks);</div><div class="line">   <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> i = 0; i &lt; nrStocks; i++) {</div><div class="line">      <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> j = 0; j &lt;= i; j++) {</div><div class="line">         <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> <a class="code" href="tmva_2tmva_2src_2Factory_8cxx.html#a73e5b6a37db0af518793b45eba2bbe8e">sum</a> = 0.;</div><div class="line">         <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> k = 0; k &lt; nrData; k++) {</div><div class="line">            <a class="code" href="tmva_2tmva_2src_2Factory_8cxx.html#a73e5b6a37db0af518793b45eba2bbe8e">sum</a> += (data[i][k] - <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[i]) * (data[j][k] - <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[j]);</div><div class="line">         }</div><div class="line">         Covar(i,j) = Covar(j,i) = <a class="code" href="tmva_2tmva_2src_2Factory_8cxx.html#a73e5b6a37db0af518793b45eba2bbe8e">sum</a>/nrData;</div><div class="line">      }</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="keyword">const</span> <a class="code" href="classTVectorT.html">TVectorD</a> weight1 = OptimalInvest(2.0,<a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>,Covar);</div><div class="line">   <span class="keyword">const</span> <a class="code" href="classTVectorT.html">TVectorD</a> weight2 = OptimalInvest(10.,<a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>,Covar);</div><div class="line"></div><div class="line">   cout &lt;&lt; <span class="stringliteral">&quot;stock     daily  daily   w1     w2&quot;</span> &lt;&lt;endl;</div><div class="line">   cout &lt;&lt; <span class="stringliteral">&quot;symb      return sdv              &quot;</span> &lt;&lt;endl;</div><div class="line">   <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> i = 0; i &lt; nrStocks; i++)</div><div class="line">      printf(<span class="stringliteral">&quot;%s\t: %.3f  %.3f  %.3f  %.3f\n&quot;</span>,stocks[i],<a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[i],<a class="code" href="namespaceTMath.html#a9ea900c956031cb12057acf7c322b0fa">TMath::Sqrt</a>(Covar[i][i]),weight1[i],weight2[i]);</div><div class="line"></div><div class="line">   <a class="code" href="classTCanvas.html">TCanvas</a> *<a class="code" href="legend1_8C.html#a1259eec59a19080ae1da77e79182c60e">c1</a> = <span class="keyword">new</span> <a class="code" href="classTCanvas.html">TCanvas</a>(<span class="stringliteral">&quot;c1&quot;</span>,<span class="stringliteral">&quot;Portfolio Optimizations&quot;</span>,10,10,800,900);</div><div class="line">   <a class="code" href="legend1_8C.html#a1259eec59a19080ae1da77e79182c60e">c1</a>-&gt;Divide(1,2);</div><div class="line"></div><div class="line">   <span class="comment">// utility function / risk profile</span></div><div class="line"></div><div class="line">   <a class="code" href="legend1_8C.html#a1259eec59a19080ae1da77e79182c60e">c1</a>-&gt;cd(1);</div><div class="line">   <a class="code" href="TVirtualPad_8h.html#a376b3a920d36f3366fb6a4c9e424aa8c">gPad</a>-&gt;SetGridx();</div><div class="line">   <a class="code" href="TVirtualPad_8h.html#a376b3a920d36f3366fb6a4c9e424aa8c">gPad</a>-&gt;SetGridy();</div><div class="line"></div><div class="line">   <a class="code" href="classTF1.html">TF1</a> *<a class="code" href="legend1_8C.html#abeb628b1c10a75ff3a4579f727637979">f1</a> = <span class="keyword">new</span> <a class="code" href="classTF1.html">TF1</a>(<span class="stringliteral">&quot;f1&quot;</span>,RiskProfile,0,2.5,1);</div><div class="line">   <a class="code" href="legend1_8C.html#abeb628b1c10a75ff3a4579f727637979">f1</a>-&gt;<a class="code" href="classTF1.html#ade6e54171210c6b1b955c9f813040eb8">SetParameter</a>(0,2.0);</div><div class="line">   <a class="code" href="legend1_8C.html#abeb628b1c10a75ff3a4579f727637979">f1</a>-&gt;<a class="code" href="classTAttLine.html#a718156d3be0e4b3e0c52b2257a9d4e7a">SetLineColor</a>(49);</div><div class="line">   <a class="code" href="legend1_8C.html#abeb628b1c10a75ff3a4579f727637979">f1</a>-&gt;<a class="code" href="classTF1.html#ab2c6b27e1558988dc7399408666588fa">Draw</a>(<span class="stringliteral">&quot;AC&quot;</span>);</div><div class="line">   <a class="code" href="legend1_8C.html#abeb628b1c10a75ff3a4579f727637979">f1</a>-&gt;<a class="code" href="classTF1.html#a16926c77f916376d4781c037fd5aae17">GetHistogram</a>()-&gt;<a class="code" href="classTH1.html#a43442cd79fbb1fd210e2746dad3c2cae">SetXTitle</a>(<span class="stringliteral">&quot;dollar&quot;</span>);</div><div class="line">   <a class="code" href="legend1_8C.html#abeb628b1c10a75ff3a4579f727637979">f1</a>-&gt;<a class="code" href="classTF1.html#a16926c77f916376d4781c037fd5aae17">GetHistogram</a>()-&gt;<a class="code" href="classTH1.html#adc75900136245b43bf1fd9185959a470">SetYTitle</a>(<span class="stringliteral">&quot;utility&quot;</span>);</div><div class="line">   <a class="code" href="legend1_8C.html#abeb628b1c10a75ff3a4579f727637979">f1</a>-&gt;<a class="code" href="classTF1.html#a16926c77f916376d4781c037fd5aae17">GetHistogram</a>()-&gt;<a class="code" href="classTH1.html#a89a5d8fc84154b504566f367ba8d0238">SetMinimum</a>(0.0);</div><div class="line">   <a class="code" href="legend1_8C.html#abeb628b1c10a75ff3a4579f727637979">f1</a>-&gt;<a class="code" href="classTF1.html#a16926c77f916376d4781c037fd5aae17">GetHistogram</a>()-&gt;<a class="code" href="classTH1.html#a68e78664002d109dd4747964d66778a3">SetMaximum</a>(1.0);</div><div class="line">   <a class="code" href="classTF1.html">TF1</a> *f2 = <span class="keyword">new</span> <a class="code" href="classTF1.html">TF1</a>(<span class="stringliteral">&quot;f2&quot;</span>,RiskProfile,0,2.5,1);</div><div class="line">   f2-&gt;<a class="code" href="classTF1.html#ade6e54171210c6b1b955c9f813040eb8">SetParameter</a>(0,10.);</div><div class="line">   f2-&gt;<a class="code" href="classTAttLine.html#a718156d3be0e4b3e0c52b2257a9d4e7a">SetLineColor</a>(50);</div><div class="line">   f2-&gt;<a class="code" href="classTF1.html#ab2c6b27e1558988dc7399408666588fa">Draw</a>(<span class="stringliteral">&quot;CSAME&quot;</span>);</div><div class="line"></div><div class="line">   <a class="code" href="classTLegend.html">TLegend</a> *legend1 = <span class="keyword">new</span> <a class="code" href="classTLegend.html">TLegend</a>(0.50,0.65,0.70,0.82);</div><div class="line">   legend1-&gt;<a class="code" href="classTLegend.html#a0fa2f13a4fea32bf9e1558a7b8df2d24">AddEntry</a>(<a class="code" href="legend1_8C.html#abeb628b1c10a75ff3a4579f727637979">f1</a>,<span class="stringliteral">&quot;1-exp(-2.0*x)&quot;</span>,<span class="stringliteral">&quot;l&quot;</span>);</div><div class="line">   legend1-&gt;<a class="code" href="classTLegend.html#a0fa2f13a4fea32bf9e1558a7b8df2d24">AddEntry</a>(f2,<span class="stringliteral">&quot;1-exp(-10.*x)&quot;</span>,<span class="stringliteral">&quot;l&quot;</span>);</div><div class="line">   legend1-&gt;<a class="code" href="classTLegend.html#a4b12d96eb53756211a0a58b0cb71599e">Draw</a>();</div><div class="line"></div><div class="line">   <span class="comment">// vertical bar chart of portfolio distribution</span></div><div class="line"></div><div class="line">   <a class="code" href="legend1_8C.html#a1259eec59a19080ae1da77e79182c60e">c1</a>-&gt;cd(2);</div><div class="line">   <a class="code" href="classTH1F.html">TH1F</a> *<a class="code" href="legend1_8C.html#aaf2545ecc018288fcf442904a5af9e83">h1</a> = <span class="keyword">new</span> <a class="code" href="classTH1F.html">TH1F</a>(<span class="stringliteral">&quot;h1&quot;</span>,<span class="stringliteral">&quot;Portfolio Distribution&quot;</span>,nrStocks,0,0);</div><div class="line">   <a class="code" href="classTH1F.html">TH1F</a> *h2 = <span class="keyword">new</span> <a class="code" href="classTH1F.html">TH1F</a>(<span class="stringliteral">&quot;h2&quot;</span>,<span class="stringliteral">&quot;Portfolio Distribution&quot;</span>,nrStocks,0,0);</div><div class="line">   <a class="code" href="legend1_8C.html#aaf2545ecc018288fcf442904a5af9e83">h1</a>-&gt;<a class="code" href="classTH1.html#afd36e57d93056e578d73291ae3e1bb01">SetStats</a>(0);</div><div class="line">   <a class="code" href="legend1_8C.html#aaf2545ecc018288fcf442904a5af9e83">h1</a>-&gt;<a class="code" href="classTAttFill.html#a4c21db248e10de0dca2300f07f379ec9">SetFillColor</a>(49);</div><div class="line">   h2-&gt;<a class="code" href="classTAttFill.html#a4c21db248e10de0dca2300f07f379ec9">SetFillColor</a>(50);</div><div class="line">   <a class="code" href="legend1_8C.html#aaf2545ecc018288fcf442904a5af9e83">h1</a>-&gt;<a class="code" href="classTH1.html#a92a17d9f0bee8e637539d5f517c81723">SetBarWidth</a>(0.45);</div><div class="line">   <a class="code" href="legend1_8C.html#aaf2545ecc018288fcf442904a5af9e83">h1</a>-&gt;<a class="code" href="classTH1.html#aa6299a300421a94c27af7c454b597c78">SetBarOffset</a>(0.1);</div><div class="line">   h2-&gt;<a class="code" href="classTH1.html#a92a17d9f0bee8e637539d5f517c81723">SetBarWidth</a>(0.4);</div><div class="line">   h2-&gt;<a class="code" href="classTH1.html#aa6299a300421a94c27af7c454b597c78">SetBarOffset</a>(0.55);</div><div class="line">   <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> i = 0; i &lt; nrStocks; i++) {</div><div class="line">      <a class="code" href="legend1_8C.html#aaf2545ecc018288fcf442904a5af9e83">h1</a>-&gt;<a class="code" href="classTH1.html#a77e71290a82517d317ea8d05e96b6c4a">Fill</a>(stocks[i],weight1[i]);</div><div class="line">      h2-&gt;<a class="code" href="classTH1.html#a77e71290a82517d317ea8d05e96b6c4a">Fill</a>(stocks[i],weight2[i]);</div><div class="line">   }</div><div class="line"></div><div class="line">   <a class="code" href="legend1_8C.html#aaf2545ecc018288fcf442904a5af9e83">h1</a>-&gt;<a class="code" href="classTH1.html#aa53a024a9e94d5ec91e3ef49e49563da">Draw</a>(<span class="stringliteral">&quot;BAR2 HIST&quot;</span>);</div><div class="line">   h2-&gt;<a class="code" href="classTH1.html#aa53a024a9e94d5ec91e3ef49e49563da">Draw</a>(<span class="stringliteral">&quot;BAR2SAME HIST&quot;</span>);</div><div class="line"></div><div class="line">   <a class="code" href="classTLegend.html">TLegend</a> *legend2 = <span class="keyword">new</span> <a class="code" href="classTLegend.html">TLegend</a>(0.50,0.65,0.70,0.82);</div><div class="line">   legend2-&gt;<a class="code" href="classTLegend.html#a0fa2f13a4fea32bf9e1558a7b8df2d24">AddEntry</a>(<a class="code" href="legend1_8C.html#aaf2545ecc018288fcf442904a5af9e83">h1</a>,<span class="stringliteral">&quot;high risk&quot;</span>,<span class="stringliteral">&quot;f&quot;</span>);</div><div class="line">   legend2-&gt;<a class="code" href="classTLegend.html#a0fa2f13a4fea32bf9e1558a7b8df2d24">AddEntry</a>(h2,<span class="stringliteral">&quot;low  risk&quot;</span>,<span class="stringliteral">&quot;f&quot;</span>);</div><div class="line">   legend2-&gt;<a class="code" href="classTLegend.html#a4b12d96eb53756211a0a58b0cb71599e">Draw</a>();</div><div class="line">}</div></div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Eddy Offermann </dd></dl>

<p class="definition">Definition in file <a class="el" href="portfolio_8C_source.html">portfolio.C</a>.</p>
</div></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:10:23 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
