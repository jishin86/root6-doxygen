<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: net/http/src/THttpServer.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_427baa8a9a5be237f298d4545d0d1ce2.html">net</a></li><li class="navelem"><a class="el" href="dir_9bd64669663d8070920c6d48caff524f.html">http</a></li><li class="navelem"><a class="el" href="dir_52291944311d399d618a0e2cb6bd7aa5.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">THttpServer.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="THttpServer_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// $Id$</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Author: Sergey Linev   21/12/2013</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/*************************************************************************</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (C) 1995-2013, Rene Brun and Fons Rademakers.               *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * All rights reserved.                                                  *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *                                                                       *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * For the licensing terms see $ROOTSYS/LICENSE.                         *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * For the list of contributors see $ROOTSYS/README/CREDITS.             *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *************************************************************************/</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="THttpServer_8h.html">THttpServer.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TThread_8h.html">TThread.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TTimer_8h.html">TTimer.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TSystem_8h.html">TSystem.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TROOT_8h.html">TROOT.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TUrl_8h.html">TUrl.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TEnv_8h.html">TEnv.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TError_8h.html">TError.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TClass_8h.html">TClass.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RVersion_8h.html">RVersion.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;RConfigure.h&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TRegexp_8h.html">TRegexp.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="THttpEngine_8h.html">THttpEngine.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="THttpLongPollEngine_8h.html">THttpLongPollEngine.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="THttpWSHandler_8h.html">THttpWSHandler.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TRootSniffer_8h.html">TRootSniffer.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TRootSnifferStore_8h.html">TRootSnifferStore.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TCivetweb_8h.html">TCivetweb.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TFastCgi_8h.html">TFastCgi.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;chrono&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"></span><span class="comment"></span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">//////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"></span><span class="comment">//                                                                      //</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// THttpTimer                                                           //</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//                                                                      //</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// Specialized timer for THttpServer                                    //</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// Provides regular calls of THttpServer::ProcessRequests() method      //</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//                                                                      //</span><span class="comment"></span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">//////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">class </span>THttpTimer : <span class="keyword">public</span> <a class="code" href="classTTimer.html">TTimer</a> {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;   <a class="code" href="classTHttpServer.html">THttpServer</a> &amp;fServer; <span class="comment">///!&lt; server processing requests</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span><span class="comment"></span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">   /// constructor</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span>   THttpTimer(<a class="code" href="RtypesCore_8h.html#a84701346fdad56d1d91e06fcbc1b87dc">Long_t</a> milliSec, <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> mode, <a class="code" href="classTHttpServer.html">THttpServer</a> &amp;serv) : <a class="code" href="classTTimer.html">TTimer</a>(milliSec, mode), fServer(serv) {}</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">   /// timeout handler</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">   /// used to process http requests in main ROOT thread</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"></span>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classTTimer.html#afd52db45899ab85daefa61bd3debe1f3">Timeout</a>() { fServer.<a class="code" href="classTHttpServer.html#a2cc31189a85c33d447decf98ddc0aedc">ProcessRequests</a>(); }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;};</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">//////////////////////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span><span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">//////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span><span class="comment">//                                                                      //</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">// THttpServer                                                          //</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//                                                                      //</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// Online http server for arbitrary ROOT application                    //</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//                                                                      //</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// Idea of THttpServer - provide remote http access to running          //</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">// ROOT application and enable HTML/JavaScript user interface.          //</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// Any registered object can be requested and displayed in the browser. //</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// There are many benefits of such approach:                            //</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//     * standard http interface to ROOT application                    //</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//     * no any temporary ROOT files when access data                   //</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//     * user interface running in all browsers                         //</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//                                                                      //</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// Starting HTTP server                                                 //</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//                                                                      //</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// To start http server, at any time  create instance                   //</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">// of the THttpServer class like:                                       //</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">//    serv = new THttpServer(&quot;http:8080&quot;);                              //</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">//                                                                      //</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">// This will starts civetweb-based http server with http port 8080.     //</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">// Than one should be able to open address &quot;http://localhost:8080&quot;      //</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">// in any modern browser (IE, Firefox, Chrome) and browse objects,      //</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">// created in application. By default, server can access files,         //</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">// canvases and histograms via gROOT pointer. All such objects          //</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">// can be displayed with JSROOT graphics.                               //</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">//                                                                      //</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">// At any time one could register other objects with the command:       //</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">//                                                                      //</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">// TGraph* gr = new TGraph(10);                                         //</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// gr-&gt;SetName(&quot;gr1&quot;);                                                  //</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">// serv-&gt;Register(&quot;graphs/subfolder&quot;, gr);                              //</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">//                                                                      //</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">// If objects content is changing in the application, one could         //</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">// enable monitoring flag in the browser - than objects view            //</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">// will be regularly updated.                                           //</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">//                                                                      //</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">// More information: https://root.cern/root/htmldoc/guides/HttpServer/HttpServer.html  //</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//                                                                      //</span><span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">//////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<a class="code" href="Rtypes_8h.html#a3f9bf160bbbb44209e95556960836b96">ClassImp</a>(<a class="code" href="classTHttpServer.html">THttpServer</a>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/// constructor</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">/// As argument, one specifies engine kind which should be</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">/// created like &quot;http:8080&quot;. One could specify several engines</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">/// at once, separating them with semicolon (&quot;;&quot;). Following engines are supported:</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">///       http - TCivetweb, civetweb-based implementation of http protocol</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">///       fastcgi - TFastCgi, special protocol for communicating with web servers</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/// For each created engine one should provide socket port number like &quot;http:8080&quot; or &quot;fastcgi:9000&quot;.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/// Additional engine-specific options can be supplied with URL syntax like &quot;http:8080?thrds=10&quot;.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/// Full list of supported options should be checked in engines docu.</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/// One also can configure following options, separated by semicolon:</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">///     readonly, ro   - set read-only mode (default)</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">///     readwrite, rw  - allows methods execution of registered objects</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">///     global         - scans global ROOT lists for existing objects (default)</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">///     noglobal       - disable scan of global lists</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">///     cors           - enable CORS header with origin=&quot;*&quot;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">///     cors=domain    - enable CORS header with origin=&quot;domain&quot;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">///     basic_sniffer  - use basic sniffer without support of hist, gpad, graph classes</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">/// For example, create http server, which allows cors headers and disable scan of global lists,</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">/// one should provide &quot;http:8080;cors;noglobal&quot; as parameter</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">/// THttpServer uses JavaScript ROOT (https://root.cern/js) to implement web clients UI.</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">/// Normally JSROOT sources are used from $ROOTSYS/js directory,</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">/// but one could set JSROOTSYS shell variable to specify alternative location</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a50d946836d71454d7f005278aa4722d8">  140</a></span>&#160;<a class="code" href="classTHttpServer.html#a50d946836d71454d7f005278aa4722d8">THttpServer::THttpServer</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *engine) : <a class="code" href="classTNamed.html">TNamed</a>(<span class="stringliteral">&quot;http&quot;</span>, <span class="stringliteral">&quot;ROOT http server&quot;</span>)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *jsrootsys = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a4ae57a039e0d61296c386e89d6e4dce8">Getenv</a>(<span class="stringliteral">&quot;JSROOTSYS&quot;</span>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   <span class="keywordflow">if</span> (!jsrootsys)</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      jsrootsys = <a class="code" href="TEnv_8h.html#a11202e6eff8457ae349087e34c0549c9">gEnv</a>-&gt;<a class="code" href="classTEnv.html#a1311d2dfe5c00b40e9f4a4fdf046f0e3">GetValue</a>(<span class="stringliteral">&quot;HttpServ.JSRootPath&quot;</span>, jsrootsys);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   <span class="keywordflow">if</span> (jsrootsys &amp;&amp; *jsrootsys) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">if</span> ((strncmp(jsrootsys, <span class="stringliteral">&quot;http://&quot;</span>, 7)==0) || (strncmp(jsrootsys, <span class="stringliteral">&quot;https://&quot;</span>, 8)==0))</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;         <a class="code" href="classTHttpServer.html#a03a997f0f0b770a21a5b2368239e462c">fJSROOT</a> = jsrootsys;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;         <a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a> = jsrootsys;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a>.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() == 0) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <a class="code" href="classTString.html">TString</a> jsdir = <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;%s/js&quot;</span>, <a class="code" href="classTROOT.html#af338b992735a139b516ab19540c7521a">TROOT::GetDataDir</a>().Data());</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a269568802a00016471ede4ed5dc52048">ExpandPathName</a>(jsdir)) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;         <a class="code" href="classTObject.html#a75fddd7eef38a13c1374130ec7dc5cf8">::Warning</a>(<span class="stringliteral">&quot;THttpServer::THttpServer&quot;</span>, <span class="stringliteral">&quot;problems resolving &#39;%s&#39;, set JSROOTSYS to proper JavaScript ROOT location&quot;</span>,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                 jsdir.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;         <a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a> = <span class="stringliteral">&quot;.&quot;</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;         <a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a> = jsdir;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <a class="code" href="classTHttpServer.html#a5322c3bbfddb8eb6849297d83ccaf87f">AddLocation</a>(<span class="stringliteral">&quot;currentdir/&quot;</span>, <span class="stringliteral">&quot;.&quot;</span>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <a class="code" href="classTHttpServer.html#a5322c3bbfddb8eb6849297d83ccaf87f">AddLocation</a>(<span class="stringliteral">&quot;jsrootsys/&quot;</span>, <a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <a class="code" href="classTHttpServer.html#a5322c3bbfddb8eb6849297d83ccaf87f">AddLocation</a>(<span class="stringliteral">&quot;rootsys/&quot;</span>, <a class="code" href="classTROOT.html#a9d1567f86b50c3e4faeee9de0089e6eb">TROOT::GetRootSys</a>());</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   <a class="code" href="classTHttpServer.html#ac641d38d05f9d2e0a03ada64bec6e33d">fDefaultPage</a> = <a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a> + <span class="stringliteral">&quot;/files/online.htm&quot;</span>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   <a class="code" href="classTHttpServer.html#aae6cc8a2446a8cb5c65cd60eddf85adb">fDrawPage</a> = <a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a> + <span class="stringliteral">&quot;/files/draw.htm&quot;</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <a class="code" href="classTRootSniffer.html">TRootSniffer</a> *sniff = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keywordflow">if</span> (strstr(engine, <span class="stringliteral">&quot;basic_sniffer&quot;</span>)) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      sniff = <span class="keyword">new</span> <a class="code" href="classTRootSniffer.html">TRootSniffer</a>(<span class="stringliteral">&quot;sniff&quot;</span>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      sniff-&gt;<a class="code" href="classTRootSniffer.html#aa0dcd6a36b187dfcb04f7a25c32c1c1e">SetScanGlobalDir</a>(<a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      sniff-&gt;<a class="code" href="classTRootSniffer.html#a76a12b3526c8bf34c2e205abe65e96d5">CreateOwnTopFolder</a>(); <span class="comment">// use dedicated folder</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      sniff = (<a class="code" href="classTRootSniffer.html">TRootSniffer</a> *)<a class="code" href="TROOT_8h.html#a851dd11b3478372a25ba6eff6dcfa5b1">gROOT</a>-&gt;ProcessLineSync(<span class="stringliteral">&quot;new TRootSnifferFull(\&quot;sniff\&quot;);&quot;</span>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <a class="code" href="classTHttpServer.html#a24b3835dfac6b294c90c61070122a34b">SetSniffer</a>(sniff);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <span class="comment">// start timer</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <a class="code" href="classTHttpServer.html#a17e2427c25b65950f092b463677e163e">SetTimer</a>(20, <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="keywordflow">if</span> (strchr(engine, <span class="charliteral">&#39;;&#39;</span>) == 0) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="classTHttpServer.html#aaa630d2ceaff4f15b9579d27b242fd63">CreateEngine</a>(engine);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <a class="code" href="classTObjArray.html">TObjArray</a> *lst = <a class="code" href="classTString.html">TString</a>(engine).<a class="code" href="classTString.html#a689ddf39f10539c879dcee0c5f4113ec">Tokenize</a>(<span class="stringliteral">&quot;;&quot;</span>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> <a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a> = 0; <a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a> &lt;= lst-&gt;<a class="code" href="classTObjArray.html#a9d86066a7071cd85bca8130b65584390">GetLast</a>(); <a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>++) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *opt = lst-&gt;<a class="code" href="classTObjArray.html#afc2e394af1d0f104a67f6cd7f9043c12">At</a>(<a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>)-&gt;<a class="code" href="classTObject.html#a1d6abd2708ecd7578d7ff03c07037bd1">GetName</a>();</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;         <span class="keywordflow">if</span> ((strcmp(opt, <span class="stringliteral">&quot;readonly&quot;</span>) == 0) || (strcmp(opt, <span class="stringliteral">&quot;ro&quot;</span>) == 0)) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <a class="code" href="classTHttpServer.html#a892722050c557fe6299c73910f6256c1">GetSniffer</a>()-&gt;<a class="code" href="classTRootSniffer.html#a8f76a743ab11d861b6a628484cb44eb1">SetReadOnly</a>(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((strcmp(opt, <span class="stringliteral">&quot;readwrite&quot;</span>) == 0) || (strcmp(opt, <span class="stringliteral">&quot;rw&quot;</span>) == 0)) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <a class="code" href="classTHttpServer.html#a892722050c557fe6299c73910f6256c1">GetSniffer</a>()-&gt;<a class="code" href="classTRootSniffer.html#a8f76a743ab11d861b6a628484cb44eb1">SetReadOnly</a>(<a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(opt, <span class="stringliteral">&quot;global&quot;</span>) == 0) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <a class="code" href="classTHttpServer.html#a892722050c557fe6299c73910f6256c1">GetSniffer</a>()-&gt;<a class="code" href="classTRootSniffer.html#aa0dcd6a36b187dfcb04f7a25c32c1c1e">SetScanGlobalDir</a>(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(opt, <span class="stringliteral">&quot;noglobal&quot;</span>) == 0) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <a class="code" href="classTHttpServer.html#a892722050c557fe6299c73910f6256c1">GetSniffer</a>()-&gt;<a class="code" href="classTRootSniffer.html#aa0dcd6a36b187dfcb04f7a25c32c1c1e">SetScanGlobalDir</a>(<a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp(opt, <span class="stringliteral">&quot;cors=&quot;</span>, 5) == 0) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <a class="code" href="classTHttpServer.html#a793dd9ce7676d0a5af9b62527bccd084">SetCors</a>(opt + 5);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(opt, <span class="stringliteral">&quot;cors&quot;</span>) == 0) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <a class="code" href="classTHttpServer.html#a793dd9ce7676d0a5af9b62527bccd084">SetCors</a>(<span class="stringliteral">&quot;*&quot;</span>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <a class="code" href="classTHttpServer.html#aaa630d2ceaff4f15b9579d27b242fd63">CreateEngine</a>(opt);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keyword">delete</span> lst;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/// destructor</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">/// delete all http engines and sniffer</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a1d2396e2e9fbcd585bfa268ded853c84">  216</a></span>&#160;<a class="code" href="classTHttpServer.html#a1d2396e2e9fbcd585bfa268ded853c84">THttpServer::~THttpServer</a>()</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;{</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   <a class="code" href="classTHttpServer.html#a2b9f44ee22d3fa34a14bd75e858bff6c">StopServerThread</a>();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#af3ca757b2ff9ab349adaf20a8d2687f7">fTerminated</a>) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <a class="code" href="classTIter.html">TIter</a> iter(&amp;<a class="code" href="classTHttpServer.html#a7577c2b6dc702cb6bb7f0e59a552ba63">fEngines</a>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">while</span> (<span class="keyword">auto</span> engine = dynamic_cast&lt;THttpEngine *&gt;(iter()))</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;         engine-&gt;Terminate();</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <a class="code" href="classTHttpServer.html#a7577c2b6dc702cb6bb7f0e59a552ba63">fEngines</a>.<a class="code" href="classTList.html#abfc59852231e4c8050b581e890d05c36">Delete</a>();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <a class="code" href="classTHttpServer.html#a24b3835dfac6b294c90c61070122a34b">SetSniffer</a>(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <a class="code" href="classTHttpServer.html#a17e2427c25b65950f092b463677e163e">SetTimer</a>(0);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">/// Set TRootSniffer to the server</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/// Server takes ownership over sniffer</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a24b3835dfac6b294c90c61070122a34b">  237</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a24b3835dfac6b294c90c61070122a34b">THttpServer::SetSniffer</a>(<a class="code" href="classTRootSniffer.html">TRootSniffer</a> *sniff)</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>)</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keyword">delete</span> <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a> = sniff;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">/// Set termination flag,</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">/// No any further requests will be processed, server only can be destroyed afterwards</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a1e088985033d056caf3ad6924f9afd7c">  248</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a1e088985033d056caf3ad6924f9afd7c">THttpServer::SetTerminate</a>()</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <a class="code" href="classTHttpServer.html#af3ca757b2ff9ab349adaf20a8d2687f7">fTerminated</a> = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">/// returns read-only mode</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a01ad6fa9b6faa282bbf50116aaf9bbac">  256</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#a01ad6fa9b6faa282bbf50116aaf9bbac">THttpServer::IsReadOnly</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a> ? <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a3cd9f9afca96ef33b7e9bf4e3a7e311c">IsReadOnly</a>() : <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">/// Set read-only mode for the server (default on)</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/// In read-only server is not allowed to change any ROOT object, registered to the server</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">/// Server also cannot execute objects method via exe.json request</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="classTHttpServer.html#ab6ae169a73b6201e6cb5ddcd7281684d">  266</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#ab6ae169a73b6201e6cb5ddcd7281684d">THttpServer::SetReadOnly</a>(<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> readonly)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;{</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>)</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a8f76a743ab11d861b6a628484cb44eb1">SetReadOnly</a>(readonly);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;}</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">/// add files location, which could be used in the server</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">/// one could map some system folder to the server like AddLocation(&quot;mydir/&quot;,&quot;/home/user/specials&quot;);</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">/// Than files from this directory could be addressed via server like</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">/// http://localhost:8080/mydir/myfile.root</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a5322c3bbfddb8eb6849297d83ccaf87f">  278</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a5322c3bbfddb8eb6849297d83ccaf87f">THttpServer::AddLocation</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *prefix, <span class="keyword">const</span> <span class="keywordtype">char</span> *path)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;{</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <span class="keywordflow">if</span> (!prefix || (*prefix == 0))</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <span class="keywordflow">if</span> (!path)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <a class="code" href="classTHttpServer.html#a5e8cadab74729873e3419c08ad8e5230">fLocations</a>.erase(<a class="code" href="classTHttpServer.html#a5e8cadab74729873e3419c08ad8e5230">fLocations</a>.find(prefix));</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="classTHttpServer.html#a5e8cadab74729873e3419c08ad8e5230">fLocations</a>[prefix] = path;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">/// Set location of JSROOT to use with the server</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">/// One could specify address like:</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">///   https://root.cern.ch/js/5.6.3/</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">///   http://jsroot.gsi.de/5.6.3/</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">/// This allows to get new JSROOT features with old server,</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">/// reduce load on THttpServer instance, also startup time can be improved</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">/// When empty string specified (default), local copy of JSROOT is used (distributed with ROOT)</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="classTHttpServer.html#ac10a7c4ecb65fdf6eb32739772ca9c90">  298</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#ac10a7c4ecb65fdf6eb32739772ca9c90">THttpServer::SetJSROOT</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *location)</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;{</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <a class="code" href="classTHttpServer.html#a03a997f0f0b770a21a5b2368239e462c">fJSROOT</a> = location ? location : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">/// Set file name of HTML page, delivered by the server when</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">/// http address is opened in the browser.</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">/// By default, $ROOTSYS/js/files/online.htm page is used</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">/// When empty filename is specified, default page will be used</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a83fc25568b1407c8d4743f5197220d03">  309</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a83fc25568b1407c8d4743f5197220d03">THttpServer::SetDefaultPage</a>(<span class="keyword">const</span> std::string &amp;filename)</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordflow">if</span> (!filename.empty())</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <a class="code" href="classTHttpServer.html#ac641d38d05f9d2e0a03ada64bec6e33d">fDefaultPage</a> = filename;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <a class="code" href="classTHttpServer.html#ac641d38d05f9d2e0a03ada64bec6e33d">fDefaultPage</a> = <a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a> + <span class="stringliteral">&quot;/files/online.htm&quot;</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="comment">// force to read page content next time again</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <a class="code" href="classTHttpServer.html#aaeb89c6e2e4eddd3b883fbd091ebaf6b">fDefaultPageCont</a>.clear();</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">/// Set file name of HTML page, delivered by the server when</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">/// objects drawing page is requested from the browser</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">/// By default, $ROOTSYS/js/files/draw.htm page is used</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">/// When empty filename is specified, default page will be used</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a40a4bc73f6952dc400784e22b730aa64">  326</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a40a4bc73f6952dc400784e22b730aa64">THttpServer::SetDrawPage</a>(<span class="keyword">const</span> std::string &amp;filename)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <span class="keywordflow">if</span> (!filename.empty())</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <a class="code" href="classTHttpServer.html#aae6cc8a2446a8cb5c65cd60eddf85adb">fDrawPage</a> = filename;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <a class="code" href="classTHttpServer.html#aae6cc8a2446a8cb5c65cd60eddf85adb">fDrawPage</a> = <a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a> + <span class="stringliteral">&quot;/files/draw.htm&quot;</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="comment">// force to read page content next time again</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <a class="code" href="classTHttpServer.html#a8a88ffca1b50053aea525cf0e8895d55">fDrawPageCont</a>.clear();</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">/// factory method to create different http engines</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">/// At the moment two engine kinds are supported:</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">///   civetweb (default) and fastcgi</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">/// Examples:</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">///   &quot;http:8080&quot; or &quot;civetweb:8080&quot; or &quot;:8080&quot;  - creates civetweb web server with http port 8080</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">///   &quot;fastcgi:9000&quot; - creates fastcgi server with port 9000</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">/// One could apply additional parameters, using URL syntax:</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">///    &quot;http:8080?thrds=10&quot;</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="classTHttpServer.html#aaa630d2ceaff4f15b9579d27b242fd63">  347</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#aaa630d2ceaff4f15b9579d27b242fd63">THttpServer::CreateEngine</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *engine)</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;{</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="keywordflow">if</span> (!engine)</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *arg = strchr(engine, <span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keywordflow">if</span> (!arg)</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <a class="code" href="classTString.html">TString</a> clname;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keywordflow">if</span> (arg != engine)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      clname.<a class="code" href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">Append</a>(engine, arg - engine);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <a class="code" href="classTHttpEngine.html">THttpEngine</a> *eng = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">if</span> ((clname.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() == 0) || (clname == <span class="stringliteral">&quot;http&quot;</span>) || (clname == <span class="stringliteral">&quot;civetweb&quot;</span>)) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      eng = <span class="keyword">new</span> <a class="code" href="classTCivetweb.html">TCivetweb</a>(<a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clname == <span class="stringliteral">&quot;https&quot;</span>) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      eng = <span class="keyword">new</span> <a class="code" href="classTCivetweb.html">TCivetweb</a>(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clname == <span class="stringliteral">&quot;fastcgi&quot;</span>) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      eng = <span class="keyword">new</span> <a class="code" href="classTFastCgi.html">TFastCgi</a>();</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;   }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keywordflow">if</span> (!eng) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="comment">// ensure that required engine class exists before we try to create it</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <a class="code" href="classTClass.html">TClass</a> *engine_class = <a class="code" href="TROOT_8h.html#a851dd11b3478372a25ba6eff6dcfa5b1">gROOT</a>-&gt;LoadClass(clname.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordflow">if</span> (!engine_class)</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      eng = (<a class="code" href="classTHttpEngine.html">THttpEngine</a> *)engine_class-&gt;<a class="code" href="classTClass.html#abe3ce6afbd40ae5684c0468f7e9e5d8d">New</a>();</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">if</span> (!eng)</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   eng-&gt;<a class="code" href="classTHttpEngine.html#a3fb9904eb8ce7476bf26a52e1a89292b">SetServer</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keywordflow">if</span> (!eng-&gt;<a class="code" href="classTHttpEngine.html#a461fc508343a4e0d8ecb15b061a2b3f5">Create</a>(arg + 1)) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keyword">delete</span> eng;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <a class="code" href="classTHttpServer.html#a7577c2b6dc702cb6bb7f0e59a552ba63">fEngines</a>.<a class="code" href="classTList.html#a1b90ccfbde1729266b585194fa45df14">Add</a>(eng);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">/// create timer which will invoke ProcessRequests() function periodically</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">/// Timer is required to perform all actions in main ROOT thread</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">/// Method arguments are the same as for TTimer constructor</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">/// By default, sync timer with 100 ms period is created</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">/// It is recommended to always use sync timer mode and only change period to</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/// adjust server reaction time. Use of async timer requires, that application regularly</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">/// calls gSystem-&gt;ProcessEvents(). It happens automatically in ROOT interactive shell.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">/// If milliSec == 0, no timer will be created.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">/// In this case application should regularly call ProcessRequests() method.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">/// Async timer allows to use THttpServer in applications, which does not have explicit</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">/// gSystem-&gt;ProcessEvents() calls. But be aware, that such timer can interrupt any system call</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">/// (like malloc) and can lead to dead locks, especially in multi-threaded applications.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a17e2427c25b65950f092b463677e163e">  409</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a17e2427c25b65950f092b463677e163e">THttpServer::SetTimer</a>(<a class="code" href="RtypesCore_8h.html#a84701346fdad56d1d91e06fcbc1b87dc">Long_t</a> milliSec, <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> mode)</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;{</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a8f95843c844cc4a187f43c94746441d1">fTimer</a>) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <a class="code" href="classTHttpServer.html#a8f95843c844cc4a187f43c94746441d1">fTimer</a>-&gt;Stop();</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keyword">delete</span> <a class="code" href="classTHttpServer.html#a8f95843c844cc4a187f43c94746441d1">fTimer</a>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="classTHttpServer.html#a8f95843c844cc4a187f43c94746441d1">fTimer</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="keywordflow">if</span> (milliSec &gt; 0) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a24440d2fcf3a3545555b4680efe175f6">fOwnThread</a>) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;         <a class="code" href="classTObject.html#abe1fb206304cfa1b8d1e77a4a4fd0120">Error</a>(<span class="stringliteral">&quot;SetTimer&quot;</span>, <span class="stringliteral">&quot;Server runs already in special thread, therefore no any timer can be created&quot;</span>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;         <a class="code" href="classTHttpServer.html#a8f95843c844cc4a187f43c94746441d1">fTimer</a> = <span class="keyword">new</span> THttpTimer(milliSec, mode, *<span class="keyword">this</span>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;         <a class="code" href="classTHttpServer.html#a8f95843c844cc4a187f43c94746441d1">fTimer</a>-&gt;TurnOn();</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">/// Creates special thread to process all requests, directed to http server</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">/// Should be used with care - only dedicated instance of TRootSniffer is allowed</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">/// By default THttpServer allows to access global lists pointers gROOT or gFile.</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">/// To be on the safe side, all kind of such access performed from the main thread.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">/// Therefore usage of specialized thread means that no any global pointers will</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">/// be accessible by THttpServer</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a8a17205fdd6f4d9f4d0567e026530a70">  435</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a8a17205fdd6f4d9f4d0567e026530a70">THttpServer::CreateServerThread</a>()</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;{</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a24440d2fcf3a3545555b4680efe175f6">fOwnThread</a>)</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   <a class="code" href="classTHttpServer.html#a17e2427c25b65950f092b463677e163e">SetTimer</a>(0);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <a class="code" href="classTHttpServer.html#a68704101f3c08b5edfe653c5d9c99835">fMainThrdId</a> = 0;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <a class="code" href="classTHttpServer.html#a24440d2fcf3a3545555b4680efe175f6">fOwnThread</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   std::thread thrd([<span class="keyword">this</span>] {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordtype">int</span> nempty = 0;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="classTHttpServer.html#a24440d2fcf3a3545555b4680efe175f6">fOwnThread</a> &amp;&amp; !<a class="code" href="classTHttpServer.html#af3ca757b2ff9ab349adaf20a8d2687f7">fTerminated</a>) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;         <span class="keywordtype">int</span> nprocess = <a class="code" href="classTHttpServer.html#a2cc31189a85c33d447decf98ddc0aedc">ProcessRequests</a>();</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;         <span class="keywordflow">if</span> (nprocess &gt; 0)</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            nempty = 0;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            nempty++;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;         <span class="keywordflow">if</span> (nempty &gt; 1000) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            nempty = 0;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            std::this_thread::sleep_for(std::chrono::milliseconds(1));</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;         }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   });</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <a class="code" href="classTHttpServer.html#a2a4daed62c2f6a8690a841c51b10d9a3">fThrd</a> = std::move(thrd);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">/// Stop server thread</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">/// Normally called shortly before http server destructor</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a2b9f44ee22d3fa34a14bd75e858bff6c">  466</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a2b9f44ee22d3fa34a14bd75e858bff6c">THttpServer::StopServerThread</a>()</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;{</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="classTHttpServer.html#a24440d2fcf3a3545555b4680efe175f6">fOwnThread</a>)</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <a class="code" href="classTHttpServer.html#a24440d2fcf3a3545555b4680efe175f6">fOwnThread</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <a class="code" href="classTHttpServer.html#a2a4daed62c2f6a8690a841c51b10d9a3">fThrd</a>.join();</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <a class="code" href="classTHttpServer.html#a68704101f3c08b5edfe653c5d9c99835">fMainThrdId</a> = 0;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">/// Checked that filename does not contains relative path below current directory</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">/// Used to prevent access to files below current directory</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="classTHttpServer.html#aaff10a82928b53bd56a3aa8776b90640">  480</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#aaff10a82928b53bd56a3aa8776b90640">THttpServer::VerifyFilePath</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *fname)</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;{</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keywordflow">if</span> (!fname || (*fname == 0))</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> level = 0;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="keywordflow">while</span> (*fname != 0) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="comment">// find next slash or backslash</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *next = strpbrk(fname, <span class="stringliteral">&quot;/\\&quot;</span>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">if</span> (next == 0)</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="comment">// most important - change to parent dir</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">if</span> ((next == fname + 2) &amp;&amp; (*fname == <span class="charliteral">&#39;.&#39;</span>) &amp;&amp; (*(fname + 1) == <span class="charliteral">&#39;.&#39;</span>)) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;         fname += 3;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;         level--;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;         <span class="keywordflow">if</span> (level &lt; 0)</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="comment">// ignore current directory</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">if</span> ((next == fname + 1) &amp;&amp; (*fname == <span class="charliteral">&#39;.&#39;</span>)) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;         fname += 2;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="comment">// ignore slash at the front</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">if</span> (next == fname) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;         fname++;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      fname = next + 1;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      level++;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">/// Verifies that request is just file name</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">/// File names typically contains prefix like &quot;jsrootsys/&quot;</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">/// If true, method returns real name of the file,</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">/// which should be delivered to the client</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">/// Method is thread safe and can be called from any thread</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00529"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a2527ed258d4e3c69ecd8a5e8b1f6a4de">  529</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#a2527ed258d4e3c69ecd8a5e8b1f6a4de">THttpServer::IsFileRequested</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *uri, <a class="code" href="classTString.html">TString</a> &amp;res)<span class="keyword"> const</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="keywordflow">if</span> (!uri || (*uri == 0))</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <a class="code" href="classTString.html">TString</a> fname(uri);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;entry : <a class="code" href="classTHttpServer.html#a5e8cadab74729873e3419c08ad8e5230">fLocations</a>) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <a class="code" href="RtypesCore_8h.html#a649fe0f43fc2d393d99c5d39848f96b9">Ssiz_t</a> pos = fname.<a class="code" href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">Index</a>(entry.first.c_str());</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">if</span> (pos == <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>)</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      fname.<a class="code" href="classTString.html#ab13a8694c4221435f86b85ae452ed376">Remove</a>(0, pos + (entry.first.length() - 1));</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classTHttpServer.html#aaff10a82928b53bd56a3aa8776b90640">VerifyFilePath</a>(fname.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>()))</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      res = entry.second.c_str();</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">if</span> ((fname[0] == <span class="charliteral">&#39;/&#39;</span>) &amp;&amp; (res[res.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() - 1] == <span class="charliteral">&#39;/&#39;</span>))</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;         res.<a class="code" href="classTString.html#a56664420fc73ace44af8f88b3b286d11">Resize</a>(res.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() - 1);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      res.<a class="code" href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">Append</a>(fname);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;}</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">/// Executes http request, specified in THttpCallArg structure</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">/// Method can be called from any thread</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">/// Actual execution will be done in main ROOT thread, where analysis code is running.</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00558"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a431fbf49cbcf695155c5f92f441da145">  558</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#a431fbf49cbcf695155c5f92f441da145">THttpServer::ExecuteHttp</a>(std::shared_ptr&lt;THttpCallArg&gt; arg)</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#af3ca757b2ff9ab349adaf20a8d2687f7">fTerminated</a>)</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="classTHttpServer.html#a68704101f3c08b5edfe653c5d9c99835">fMainThrdId</a> != 0) &amp;&amp; (<a class="code" href="classTHttpServer.html#a68704101f3c08b5edfe653c5d9c99835">fMainThrdId</a> == <a class="code" href="classTThread.html#a746ff9e6c404f46667f789758884d41a">TThread::SelfId</a>())) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="comment">// should not happen, but one could process requests directly without any signaling</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <a class="code" href="classTHttpServer.html#a074cf866f73fd2a36e7f8bd231dd2c31">ProcessRequest</a>(arg);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="comment">// add call arg to the list</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   std::unique_lock&lt;std::mutex&gt; lk(<a class="code" href="classTHttpServer.html#ac2f97adc699f59067de4e6d37b46ed23">fMutex</a>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <a class="code" href="classTHttpServer.html#a8123f2cb589be71202370aca380dbf20">fArgs</a>.push(arg);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="comment">// and now wait until request is processed</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   arg-&gt;fCond.wait(lk);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">/// Submit http request, specified in THttpCallArg structure</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">/// Contrary to ExecuteHttp, it will not block calling thread.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">/// User should reimplement THttpCallArg::HttpReplied() method</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">/// to react when HTTP request is executed.</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">/// Method can be called from any thread</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">/// Actual execution will be done in main ROOT thread, where analysis code is running.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">/// When called from main thread and can_run_immediately==kTRUE, will be</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">/// executed immediately.</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">/// Returns kTRUE when was executed.</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a641ac173cf8c6af4987795cdec8717aa">  591</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#a641ac173cf8c6af4987795cdec8717aa">THttpServer::SubmitHttp</a>(std::shared_ptr&lt;THttpCallArg&gt; arg, <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> can_run_immediately)</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;{</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#af3ca757b2ff9ab349adaf20a8d2687f7">fTerminated</a>)</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   <span class="keywordflow">if</span> (can_run_immediately &amp;&amp; (<a class="code" href="classTHttpServer.html#a68704101f3c08b5edfe653c5d9c99835">fMainThrdId</a> != 0) &amp;&amp; (<a class="code" href="classTHttpServer.html#a68704101f3c08b5edfe653c5d9c99835">fMainThrdId</a> == <a class="code" href="classTThread.html#a746ff9e6c404f46667f789758884d41a">TThread::SelfId</a>())) {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <a class="code" href="classTHttpServer.html#a074cf866f73fd2a36e7f8bd231dd2c31">ProcessRequest</a>(arg);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      arg-&gt;NotifyCondition();</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   <span class="comment">// add call arg to the list</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   std::unique_lock&lt;std::mutex&gt; lk(<a class="code" href="classTHttpServer.html#ac2f97adc699f59067de4e6d37b46ed23">fMutex</a>);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <a class="code" href="classTHttpServer.html#a8123f2cb589be71202370aca380dbf20">fArgs</a>.push(arg);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">/// Process requests, submitted for execution</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">/// Returns number of processed requests</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">/// Normally invoked by THttpTimer, when somewhere in the code</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">/// gSystem-&gt;ProcessEvents() is called.</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">/// User can call serv-&gt;ProcessRequests() directly, but only from main thread.</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/// If special server thread is created, called from that thread</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a2cc31189a85c33d447decf98ddc0aedc">  617</a></span>&#160;<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> <a class="code" href="classTHttpServer.html#a2cc31189a85c33d447decf98ddc0aedc">THttpServer::ProcessRequests</a>()</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;{</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a68704101f3c08b5edfe653c5d9c99835">fMainThrdId</a> == 0)</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="classTHttpServer.html#a68704101f3c08b5edfe653c5d9c99835">fMainThrdId</a> = <a class="code" href="classTThread.html#a746ff9e6c404f46667f789758884d41a">TThread::SelfId</a>();</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a68704101f3c08b5edfe653c5d9c99835">fMainThrdId</a> != <a class="code" href="classTThread.html#a746ff9e6c404f46667f789758884d41a">TThread::SelfId</a>()) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <a class="code" href="classTObject.html#abe1fb206304cfa1b8d1e77a4a4fd0120">Error</a>(<span class="stringliteral">&quot;ProcessRequests&quot;</span>, <span class="stringliteral">&quot;Should be called only from main ROOT thread&quot;</span>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> <a class="code" href="namespacexmlio.html#a7da9572bcb8815ae48bc1845efd235b5">cnt</a> = 0;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   std::unique_lock&lt;std::mutex&gt; lk(<a class="code" href="classTHttpServer.html#ac2f97adc699f59067de4e6d37b46ed23">fMutex</a>, std::defer_lock);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="comment">// first process requests in the queue</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      std::shared_ptr&lt;THttpCallArg&gt; arg;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      lk.lock();</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classTHttpServer.html#a8123f2cb589be71202370aca380dbf20">fArgs</a>.empty()) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;         arg = <a class="code" href="classTHttpServer.html#a8123f2cb589be71202370aca380dbf20">fArgs</a>.front();</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;         <a class="code" href="classTHttpServer.html#a8123f2cb589be71202370aca380dbf20">fArgs</a>.pop();</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      lk.unlock();</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordflow">if</span> (!arg)</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">if</span> (arg-&gt;fFileName == <span class="stringliteral">&quot;root_batch_holder.js&quot;</span>) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;         <a class="code" href="classTHttpServer.html#a1a134fb1d25ead2159fc046a73b2612a">ProcessBatchHolder</a>(arg);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a1e278992307ecb97e969a49af994a13d">SetCurrentCallArg</a>(arg.get());</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">try</span> {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;         <a class="code" href="namespacexmlio.html#a7da9572bcb8815ae48bc1845efd235b5">cnt</a>++;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;         <a class="code" href="classTHttpServer.html#a074cf866f73fd2a36e7f8bd231dd2c31">ProcessRequest</a>(arg);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;         <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a1e278992307ecb97e969a49af994a13d">SetCurrentCallArg</a>(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      } <span class="keywordflow">catch</span> (...) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;         <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a1e278992307ecb97e969a49af994a13d">SetCurrentCallArg</a>(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      arg-&gt;NotifyCondition();</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   <span class="comment">// regularly call Process() method of engine to let perform actions in ROOT context</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <a class="code" href="classTIter.html">TIter</a> iter(&amp;<a class="code" href="classTHttpServer.html#a7577c2b6dc702cb6bb7f0e59a552ba63">fEngines</a>);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <a class="code" href="classTHttpEngine.html">THttpEngine</a> *engine = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <span class="keywordflow">while</span> ((engine = (<a class="code" href="classTHttpEngine.html">THttpEngine</a> *)iter()) != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#af3ca757b2ff9ab349adaf20a8d2687f7">fTerminated</a>)</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;         engine-&gt;<a class="code" href="classTHttpEngine.html#aa4fb5bb8f51049204b006a3ca20ff516">Terminate</a>();</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      engine-&gt;<a class="code" href="classTHttpEngine.html#a63d967f28139672e010a79a8bec8e71a">Process</a>();</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="namespacexmlio.html#a7da9572bcb8815ae48bc1845efd235b5">cnt</a>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">/// Method called when THttpServer cannot process request</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">/// By default such requests replied with 404 code</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">/// One could overwrite with method in derived class to process all kinds of such non-standard requests</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a20f5158970ae299319b3d6168d820b4e">  680</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a20f5158970ae299319b3d6168d820b4e">THttpServer::MissedRequest</a>(<a class="code" href="classTHttpCallArg.html">THttpCallArg</a> *arg)</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;{</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   arg-&gt;<a class="code" href="classTHttpCallArg.html#a08009170e4f8cb104bc816edbaf341dc">Set404</a>();</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;}</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">/// Process special http request for root_batch_holder.js script</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">/// This kind of requests used to hold web browser running in headless mode</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">/// Intentionally requests does not replied immediately</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00690"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a1a134fb1d25ead2159fc046a73b2612a">  690</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a1a134fb1d25ead2159fc046a73b2612a">THttpServer::ProcessBatchHolder</a>(std::shared_ptr&lt;THttpCallArg&gt; &amp;arg)</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;{</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   <span class="keyword">auto</span> wsptr = <a class="code" href="classTHttpServer.html#a169f3032c003e3998144558ce9094cc4">FindWS</a>(arg-&gt;GetPathName());</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="keywordflow">if</span> (!wsptr || !wsptr-&gt;ProcessBatchHolder(arg)) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      arg-&gt;Set404();</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      arg-&gt;NotifyCondition();</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">/// Process single http request</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">/// Depending from requested path and filename different actions will be performed.</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">/// In most cases information is provided by TRootSniffer class</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a074cf866f73fd2a36e7f8bd231dd2c31">  705</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a074cf866f73fd2a36e7f8bd231dd2c31">THttpServer::ProcessRequest</a>(std::shared_ptr&lt;THttpCallArg&gt; arg)</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#af3ca757b2ff9ab349adaf20a8d2687f7">fTerminated</a>) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      arg-&gt;Set404();</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((arg-&gt;fFileName == <span class="stringliteral">&quot;root.websocket&quot;</span>) || (arg-&gt;fFileName == <span class="stringliteral">&quot;root.longpoll&quot;</span>)) {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <a class="code" href="classTHttpServer.html#a2f368218d71db4384e8ea30666b02a17">ExecuteWS</a>(arg);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <a class="code" href="classTHttpServer.html#a074cf866f73fd2a36e7f8bd231dd2c31">ProcessRequest</a>(arg.get());</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">/// \deprecated  One should use signature with std::shared_ptr</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">/// Process single http request</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">/// Depending from requested path and filename different actions will be performed.</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">/// In most cases information is provided by TRootSniffer class</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a0879e555ea2b97d97e034655567dfd96">  722</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a074cf866f73fd2a36e7f8bd231dd2c31">THttpServer::ProcessRequest</a>(<a class="code" href="classTHttpCallArg.html">THttpCallArg</a> *arg)</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#af3ca757b2ff9ab349adaf20a8d2687f7">fTerminated</a>) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#a08009170e4f8cb104bc816edbaf341dc">Set404</a>();</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">fFileName</a>.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>() || (arg-&gt;<a class="code" href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">fFileName</a> == <span class="stringliteral">&quot;index.htm&quot;</span>) || (arg-&gt;<a class="code" href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">fFileName</a> == <span class="stringliteral">&quot;default.htm&quot;</span>)) {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">fFileName</a> == <span class="stringliteral">&quot;default.htm&quot;</span>) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;         arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a> = <a class="code" href="classTHttpServer.html#a89198e636a495f8402bdc7e342401698">ReadFileContent</a>((<a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a> + <span class="stringliteral">&quot;/files/online.htm&quot;</span>).Data());</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;         <span class="keyword">auto</span> wsptr = <a class="code" href="classTHttpServer.html#a169f3032c003e3998144558ce9094cc4">FindWS</a>(arg-&gt;<a class="code" href="classTHttpCallArg.html#a841736f25f0f3901428432d62e64e2a6">GetPathName</a>());</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;         <span class="keyword">auto</span> handler = wsptr.get();</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;         <span class="keywordflow">if</span> (!handler)</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            handler = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classTHttpWSHandler.html">THttpWSHandler</a> *<span class="keyword">&gt;</span>(<a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#aab3bf29366f5bedc389e0db36816d82c">FindTObjectInHierarchy</a>(arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>()));</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;         <span class="keywordflow">if</span> (handler) {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a> = handler-&gt;GetDefaultPageContent().Data();</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a>.find(<span class="stringliteral">&quot;file:&quot;</span>) == 0) {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">char</span> *fname = arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a>.c_str() + 5;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;               <a class="code" href="classTString.html">TString</a> resolve;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="classTHttpServer.html#a2527ed258d4e3c69ecd8a5e8b1f6a4de">IsFileRequested</a>(fname, resolve)) resolve = fname;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;               arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a> = <a class="code" href="classTHttpServer.html#a89198e636a495f8402bdc7e342401698">ReadFileContent</a>(resolve.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;               arg-&gt;<a class="code" href="classTHttpCallArg.html#a9c92161d2901d7a836fe23bd360ee9a0">AddNoCacheHeader</a>();</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            arg-&gt;<a class="code" href="classTHttpCallArg.html#ad8f6f64725e0e62bfdf500de49f6ce57">CheckWSPageContent</a>(handler);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;         }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      }</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a>.empty()) {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#aaeb89c6e2e4eddd3b883fbd091ebaf6b">fDefaultPageCont</a>.empty())</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <a class="code" href="classTHttpServer.html#aaeb89c6e2e4eddd3b883fbd091ebaf6b">fDefaultPageCont</a> = <a class="code" href="classTHttpServer.html#a89198e636a495f8402bdc7e342401698">ReadFileContent</a>(<a class="code" href="classTHttpServer.html#ac641d38d05f9d2e0a03ada64bec6e33d">fDefaultPage</a>);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;         arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a> = <a class="code" href="classTHttpServer.html#aaeb89c6e2e4eddd3b883fbd091ebaf6b">fDefaultPageCont</a>;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a>.empty()) {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;         arg-&gt;<a class="code" href="classTHttpCallArg.html#a08009170e4f8cb104bc816edbaf341dc">Set404</a>();</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;         <span class="comment">// replace all references on JSROOT</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a03a997f0f0b770a21a5b2368239e462c">fJSROOT</a>.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() &gt; 0) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            std::string repl(<span class="stringliteral">&quot;=\&quot;&quot;</span>);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            repl.append(<a class="code" href="classTHttpServer.html#a03a997f0f0b770a21a5b2368239e462c">fJSROOT</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="keywordflow">if</span> (repl.back() != <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;               repl.append(<span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            arg-&gt;<a class="code" href="classTHttpCallArg.html#a4a2a7714aeb96b46241efe7aa24b654a">ReplaceAllinContent</a>(<span class="stringliteral">&quot;=\&quot;jsrootsys/&quot;</span>, repl);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;         }</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *hjsontag = <span class="stringliteral">&quot;\&quot;$$$h.json$$$\&quot;&quot;</span>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;         <span class="comment">// add h.json caching</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;         <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a>.find(hjsontag) != std::string::npos) {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <a class="code" href="classTString.html">TString</a> h_json;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <a class="code" href="classTRootSnifferStoreJson.html">TRootSnifferStoreJson</a> store(h_json, <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *topname = <a class="code" href="classTHttpServer.html#a3d85ff126751fdaa287fa1bf030fcfe1">fTopName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>();</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#a258f286f14cd8b7f698016a98e26cf85">fTopName</a>.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() &gt; 0)</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;               topname = arg-&gt;<a class="code" href="classTHttpCallArg.html#a258f286f14cd8b7f698016a98e26cf85">fTopName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>();</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a142aabf0bcc389a491cfc747a41a6d83">ScanHierarchy</a>(topname, arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), &amp;store);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            arg-&gt;<a class="code" href="classTHttpCallArg.html#a4a2a7714aeb96b46241efe7aa24b654a">ReplaceAllinContent</a>(hjsontag, h_json.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            arg-&gt;<a class="code" href="classTHttpCallArg.html#a9c92161d2901d7a836fe23bd360ee9a0">AddNoCacheHeader</a>();</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#a83bbc9eb5eae9a9dabd05f5cd0370720">fQuery</a>.<a class="code" href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">Index</a>(<span class="stringliteral">&quot;nozip&quot;</span>) == <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>)</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;               arg-&gt;<a class="code" href="classTHttpCallArg.html#aeb3a5fa8d34106e3700a71e359b51a39">SetZipping</a>();</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;         }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;         arg-&gt;<a class="code" href="classTHttpCallArg.html#ad23bf62c26d5fb506d774b1a5d646fad">SetContentType</a>(<span class="stringliteral">&quot;text/html&quot;</span>);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">fFileName</a> == <span class="stringliteral">&quot;draw.htm&quot;</span>) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a8a88ffca1b50053aea525cf0e8895d55">fDrawPageCont</a>.empty())</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;         <a class="code" href="classTHttpServer.html#a8a88ffca1b50053aea525cf0e8895d55">fDrawPageCont</a> = <a class="code" href="classTHttpServer.html#a89198e636a495f8402bdc7e342401698">ReadFileContent</a>(<a class="code" href="classTHttpServer.html#aae6cc8a2446a8cb5c65cd60eddf85adb">fDrawPage</a>);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a8a88ffca1b50053aea525cf0e8895d55">fDrawPageCont</a>.empty()) {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;         arg-&gt;<a class="code" href="classTHttpCallArg.html#a08009170e4f8cb104bc816edbaf341dc">Set404</a>();</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *rootjsontag = <span class="stringliteral">&quot;\&quot;$$$root.json$$$\&quot;&quot;</span>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *hjsontag = <span class="stringliteral">&quot;\&quot;$$$h.json$$$\&quot;&quot;</span>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;         arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a> = <a class="code" href="classTHttpServer.html#a8a88ffca1b50053aea525cf0e8895d55">fDrawPageCont</a>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;         <span class="comment">// replace all references on JSROOT</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a03a997f0f0b770a21a5b2368239e462c">fJSROOT</a>.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() &gt; 0) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            std::string repl(<span class="stringliteral">&quot;=\&quot;&quot;</span>);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            repl.append(<a class="code" href="classTHttpServer.html#a03a997f0f0b770a21a5b2368239e462c">fJSROOT</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            <span class="keywordflow">if</span> (repl.back() != <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;               repl.append(<span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            arg-&gt;<a class="code" href="classTHttpCallArg.html#a4a2a7714aeb96b46241efe7aa24b654a">ReplaceAllinContent</a>(<span class="stringliteral">&quot;=\&quot;jsrootsys/&quot;</span>, repl);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;         }</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;         <span class="keywordflow">if</span> ((arg-&gt;<a class="code" href="classTHttpCallArg.html#a83bbc9eb5eae9a9dabd05f5cd0370720">fQuery</a>.<a class="code" href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">Index</a>(<span class="stringliteral">&quot;no_h_json&quot;</span>) == <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>) &amp;&amp; (arg-&gt;<a class="code" href="classTHttpCallArg.html#a83bbc9eb5eae9a9dabd05f5cd0370720">fQuery</a>.<a class="code" href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">Index</a>(<span class="stringliteral">&quot;webcanvas&quot;</span>) == <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>) &amp;&amp;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;             (arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a>.find(hjsontag) != std::string::npos)) {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <a class="code" href="classTString.html">TString</a> h_json;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <a class="code" href="classTRootSnifferStoreJson.html">TRootSnifferStoreJson</a> store(h_json, <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *topname = <a class="code" href="classTHttpServer.html#a3d85ff126751fdaa287fa1bf030fcfe1">fTopName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>();</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#a258f286f14cd8b7f698016a98e26cf85">fTopName</a>.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() &gt; 0)</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;               topname = arg-&gt;<a class="code" href="classTHttpCallArg.html#a258f286f14cd8b7f698016a98e26cf85">fTopName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>();</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a142aabf0bcc389a491cfc747a41a6d83">ScanHierarchy</a>(topname, arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), &amp;store, <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            arg-&gt;<a class="code" href="classTHttpCallArg.html#a4a2a7714aeb96b46241efe7aa24b654a">ReplaceAllinContent</a>(hjsontag, h_json.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;         }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;         <span class="keywordflow">if</span> ((arg-&gt;<a class="code" href="classTHttpCallArg.html#a83bbc9eb5eae9a9dabd05f5cd0370720">fQuery</a>.<a class="code" href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">Index</a>(<span class="stringliteral">&quot;no_root_json&quot;</span>) == <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>) &amp;&amp; (arg-&gt;<a class="code" href="classTHttpCallArg.html#a83bbc9eb5eae9a9dabd05f5cd0370720">fQuery</a>.<a class="code" href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">Index</a>(<span class="stringliteral">&quot;webcanvas&quot;</span>) == <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>) &amp;&amp;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;             (arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a>.find(rootjsontag) != std::string::npos)) {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            std::string str;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a5f77bc2873e01b494e9156e53e0b43ee">Produce</a>(arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), <span class="stringliteral">&quot;root.json&quot;</span>, <span class="stringliteral">&quot;compact=23&quot;</span>, str))</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;               arg-&gt;<a class="code" href="classTHttpCallArg.html#a4a2a7714aeb96b46241efe7aa24b654a">ReplaceAllinContent</a>(rootjsontag, str);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;         }</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;         arg-&gt;<a class="code" href="classTHttpCallArg.html#a9c92161d2901d7a836fe23bd360ee9a0">AddNoCacheHeader</a>();</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;         <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#a83bbc9eb5eae9a9dabd05f5cd0370720">fQuery</a>.<a class="code" href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">Index</a>(<span class="stringliteral">&quot;nozip&quot;</span>) == <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>)</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            arg-&gt;<a class="code" href="classTHttpCallArg.html#aeb3a5fa8d34106e3700a71e359b51a39">SetZipping</a>();</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;         arg-&gt;<a class="code" href="classTHttpCallArg.html#ad23bf62c26d5fb506d774b1a5d646fad">SetContentType</a>(<span class="stringliteral">&quot;text/html&quot;</span>);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      }</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   }</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   <span class="keywordflow">if</span> ((arg-&gt;<a class="code" href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">fFileName</a> == <span class="stringliteral">&quot;favicon.ico&quot;</span>) &amp;&amp; arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>()) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#a1cfe659686013149db064a05fe52eac1">SetFile</a>(<a class="code" href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">fJSROOTSYS</a> + <span class="stringliteral">&quot;/img/RootIcon.ico&quot;</span>);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <a class="code" href="classTString.html">TString</a> filename;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a2527ed258d4e3c69ecd8a5e8b1f6a4de">IsFileRequested</a>(arg-&gt;<a class="code" href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">fFileName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), filename)) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#a1cfe659686013149db064a05fe52eac1">SetFile</a>(filename);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   <span class="comment">// check if websocket handler may serve file request</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   <span class="keywordflow">if</span> (!arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>() &amp;&amp; !arg-&gt;<a class="code" href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">fFileName</a>.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>()) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <a class="code" href="classTString.html">TString</a> wsname = arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>, fname;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="keyword">auto</span> pos = wsname.<a class="code" href="classTString.html#a3f534327b29fb2dcd7d131b990b5dc1c">First</a>(<span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">if</span> (pos == <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>) {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;         wsname = arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;         wsname = arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>(0, pos);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;         fname = arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>(pos + 1, arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() - pos);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;         fname.<a class="code" href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">Append</a>(<span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      }</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      fname.<a class="code" href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">Append</a>(arg-&gt;<a class="code" href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">fFileName</a>);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#aaff10a82928b53bd56a3aa8776b90640">VerifyFilePath</a>(fname.Data())) {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;         <span class="keyword">auto</span> <a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a> = <a class="code" href="classTHttpServer.html#a169f3032c003e3998144558ce9094cc4">FindWS</a>(wsname.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a> &amp;&amp; <a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a>-&gt;CanServeFiles()) {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            <a class="code" href="classTString.html">TString</a> fdir = <a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a>-&gt;GetDefaultPageContent();</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            <span class="comment">// only when file is specified, can take directory, append prefix and file name</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <span class="keywordflow">if</span> (fdir.<a class="code" href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">Index</a>(<span class="stringliteral">&quot;file:&quot;</span>) == 0) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;               fdir.<a class="code" href="classTString.html#ab13a8694c4221435f86b85ae452ed376">Remove</a>(0, 5);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;               <span class="keyword">auto</span> separ = fdir.<a class="code" href="classTString.html#a632fcf337fbd97665dc484cda395d533">Last</a>(<span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;               <span class="keywordflow">if</span> (separ != <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>)</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                  fdir.<a class="code" href="classTString.html#a56664420fc73ace44af8f88b3b286d11">Resize</a>(separ + 1);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;               <span class="keywordflow">else</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                  fdir = <span class="stringliteral">&quot;./&quot;</span>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;               fdir.<a class="code" href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">Append</a>(fname);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;               arg-&gt;<a class="code" href="classTHttpCallArg.html#a1cfe659686013149db064a05fe52eac1">SetFile</a>(fdir);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;               <span class="keywordflow">return</span>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            }</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;         }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   filename = arg-&gt;<a class="code" href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">fFileName</a>;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> iszip = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   <span class="keywordflow">if</span> (filename.<a class="code" href="classTString.html#a2b2e907b9681d08cec32c853171c06a1">EndsWith</a>(<span class="stringliteral">&quot;.gz&quot;</span>)) {</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      filename.<a class="code" href="classTString.html#a56664420fc73ace44af8f88b3b286d11">Resize</a>(filename.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() - 3);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      iszip = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   }</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <span class="keywordflow">if</span> ((filename == <span class="stringliteral">&quot;h.xml&quot;</span>) || (filename == <span class="stringliteral">&quot;get.xml&quot;</span>)) {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> compact = arg-&gt;<a class="code" href="classTHttpCallArg.html#a83bbc9eb5eae9a9dabd05f5cd0370720">fQuery</a>.<a class="code" href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">Index</a>(<span class="stringliteral">&quot;compact&quot;</span>) != <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <a class="code" href="classTString.html">TString</a> res;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      res.<a class="code" href="classTString.html#aeb44d6183d8b1f1b7090dbd3c93f5e39">Form</a>(<span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;&quot;</span>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <span class="keywordflow">if</span> (!compact)</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;         res.<a class="code" href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">Append</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      res.<a class="code" href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">Append</a>(<span class="stringliteral">&quot;&lt;root&gt;&quot;</span>);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">if</span> (!compact)</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;         res.<a class="code" href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">Append</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;         <a class="code" href="classTRootSnifferStoreXml.html">TRootSnifferStoreXml</a> store(res, compact);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *topname = <a class="code" href="classTHttpServer.html#a3d85ff126751fdaa287fa1bf030fcfe1">fTopName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>();</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;         <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#a258f286f14cd8b7f698016a98e26cf85">fTopName</a>.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() &gt; 0)</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            topname = arg-&gt;<a class="code" href="classTHttpCallArg.html#a258f286f14cd8b7f698016a98e26cf85">fTopName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>();</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;         <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a142aabf0bcc389a491cfc747a41a6d83">ScanHierarchy</a>(topname, arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), &amp;store, filename == <span class="stringliteral">&quot;get.xml&quot;</span>);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      res.<a class="code" href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">Append</a>(<span class="stringliteral">&quot;&lt;/root&gt;&quot;</span>);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keywordflow">if</span> (!compact)</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;         res.<a class="code" href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">Append</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#aa68d70d5a7254cf2c1d9652cf85bb328">SetContent</a>(std::string(res.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>()));</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#aa1c0de6ad787a4d7098bf290d320999e">SetXml</a>();</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (filename == <span class="stringliteral">&quot;h.json&quot;</span>) {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <a class="code" href="classTString.html">TString</a> res;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <a class="code" href="classTRootSnifferStoreJson.html">TRootSnifferStoreJson</a> store(res, arg-&gt;<a class="code" href="classTHttpCallArg.html#a83bbc9eb5eae9a9dabd05f5cd0370720">fQuery</a>.<a class="code" href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">Index</a>(<span class="stringliteral">&quot;compact&quot;</span>) != <a class="code" href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a>);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *topname = <a class="code" href="classTHttpServer.html#a3d85ff126751fdaa287fa1bf030fcfe1">fTopName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>();</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#a258f286f14cd8b7f698016a98e26cf85">fTopName</a>.<a class="code" href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">Length</a>() &gt; 0)</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;         topname = arg-&gt;<a class="code" href="classTHttpCallArg.html#a258f286f14cd8b7f698016a98e26cf85">fTopName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>();</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a142aabf0bcc389a491cfc747a41a6d83">ScanHierarchy</a>(topname, arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), &amp;store);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#aa68d70d5a7254cf2c1d9652cf85bb328">SetContent</a>(std::string(res.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>()));</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#a11c73c71c145dc22ef43fec01978f011">SetJson</a>();</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a5f77bc2873e01b494e9156e53e0b43ee">Produce</a>(arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), filename.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), arg-&gt;<a class="code" href="classTHttpCallArg.html#a83bbc9eb5eae9a9dabd05f5cd0370720">fQuery</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), arg-&gt;<a class="code" href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">fContent</a>)) {</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="comment">// define content type base on extension</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#ad23bf62c26d5fb506d774b1a5d646fad">SetContentType</a>(<a class="code" href="classTHttpServer.html#ae37d74254890d241ee51afe1d0cd0efa">GetMimeType</a>(filename.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>()));</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="comment">// miss request, user may process</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <a class="code" href="classTHttpServer.html#a20f5158970ae299319b3d6168d820b4e">MissedRequest</a>(arg);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="classTHttpCallArg.html#a82812d54bec142a627b896bc0c8e2cf7">Is404</a>())</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   <span class="keywordflow">if</span> (iszip)</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#aeb3a5fa8d34106e3700a71e359b51a39">SetZipping</a>(<a class="code" href="classTHttpCallArg.html#afee2c0a98770daee5ad9e0fab0bd4864ae78f8e17378b51537fd50ab8cf1adb2d">THttpCallArg::kZipAlways</a>);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   <span class="keywordflow">if</span> (filename == <span class="stringliteral">&quot;root.bin&quot;</span>) {</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <span class="comment">// only for binary data master version is important</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <span class="comment">// it allows to detect if streamer info was modified</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *parname = <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a5b866ebc275d1d925b322297a6f2fcb0">IsStreamerInfoItem</a>(arg-&gt;<a class="code" href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">fPathName</a>.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>()) ? <span class="stringliteral">&quot;BVersion&quot;</span> : <span class="stringliteral">&quot;MVersion&quot;</span>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#a36133ade6baed90cb7026f306e8251a7">AddHeader</a>(parname, <a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%u&quot;</span>, (<span class="keywordtype">unsigned</span>)<a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#add13e574f43681357eb8a5c272f24415">GetStreamerInfoHash</a>()));</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   }</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <span class="comment">// try to avoid caching on the browser</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   arg-&gt;<a class="code" href="classTHttpCallArg.html#a9c92161d2901d7a836fe23bd360ee9a0">AddNoCacheHeader</a>();</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   <span class="comment">// potentially add cors header</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#a7ac4c804e99ba9bcbe88c916f649fbf6">IsCors</a>())</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      arg-&gt;<a class="code" href="classTHttpCallArg.html#a36133ade6baed90cb7026f306e8251a7">AddHeader</a>(<span class="stringliteral">&quot;Access-Control-Allow-Origin&quot;</span>, <a class="code" href="classTHttpServer.html#ae3eba6eba61cf4a90102f1dd78dace40">GetCors</a>());</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;}</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">/// Register object in folders hierarchy</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">/// See TRootSniffer::RegisterObject() for more details</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00976"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a73658daf379e87a4832fe9dc5c1483ed">  976</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#a73658daf379e87a4832fe9dc5c1483ed">THttpServer::Register</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *subfolder, <a class="code" href="classTObject.html">TObject</a> *obj)</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;{</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a25661502e8c3a298f967ef1ecad845b4">RegisterObject</a>(subfolder, obj);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;}</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">/// Unregister object in folders hierarchy</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">/// See TRootSniffer::UnregisterObject() for more details</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00986"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a8be4756fca7340af6e54fd5b31886cd6">  986</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#a8be4756fca7340af6e54fd5b31886cd6">THttpServer::Unregister</a>(<a class="code" href="classTObject.html">TObject</a> *obj)</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;{</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a3d176f4207441506527cccdd36a5d27b">UnregisterObject</a>(obj);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;}</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">/// Register WS handler to the THttpServer</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment">/// Only such handler can be used in multi-threaded processing of websockets</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00996"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a30c0d8ca26be5006b56b8b547d190a3b">  996</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#a30c0d8ca26be5006b56b8b547d190a3b">THttpServer::RegisterWS</a>(std::shared_ptr&lt;THttpWSHandler&gt; <a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a>)</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;{</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   std::lock_guard&lt;std::mutex&gt; grd(<a class="code" href="classTHttpServer.html#aa52e0db242b7352f28a5124967356d04">fWSMutex</a>);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;   <a class="code" href="classTHttpServer.html#a1a6e656d081bfaaeee97d8f939c58ea8">fWSHandlers</a>.emplace_back(<a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a>);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;}</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">/// Unregister WS handler to the THttpServer</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="classTHttpServer.html#ad89d3ca70853fe70b3a1f0f8b22a73c4"> 1005</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#ad89d3ca70853fe70b3a1f0f8b22a73c4">THttpServer::UnregisterWS</a>(std::shared_ptr&lt;THttpWSHandler&gt; <a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a>)</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;{</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   std::lock_guard&lt;std::mutex&gt; grd(<a class="code" href="classTHttpServer.html#aa52e0db242b7352f28a5124967356d04">fWSMutex</a>);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a> = (<span class="keywordtype">int</span>)<a class="code" href="classTHttpServer.html#a1a6e656d081bfaaeee97d8f939c58ea8">fWSHandlers</a>.size(); <a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a> &gt; 0; --<a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>)</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="classTHttpServer.html#a1a6e656d081bfaaeee97d8f939c58ea8">fWSHandlers</a>[<a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a> - 1] == <a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a>) || <a class="code" href="classTHttpServer.html#a1a6e656d081bfaaeee97d8f939c58ea8">fWSHandlers</a>[<a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a> - 1]-&gt;IsDisabled())</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;         <a class="code" href="classTHttpServer.html#a1a6e656d081bfaaeee97d8f939c58ea8">fWSHandlers</a>.erase(<a class="code" href="classTHttpServer.html#a1a6e656d081bfaaeee97d8f939c58ea8">fWSHandlers</a>.begin() + <a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a> - 1);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;}</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">/// Search WS handler with given name</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">/// Handler must be registered with RegisterWS() method</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01018"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a169f3032c003e3998144558ce9094cc4"> 1018</a></span>&#160;std::shared_ptr&lt;THttpWSHandler&gt; <a class="code" href="classTHttpServer.html#a169f3032c003e3998144558ce9094cc4">THttpServer::FindWS</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;{</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   std::lock_guard&lt;std::mutex&gt; grd(<a class="code" href="classTHttpServer.html#aa52e0db242b7352f28a5124967356d04">fWSMutex</a>);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a> : <a class="code" href="classTHttpServer.html#a1a6e656d081bfaaeee97d8f939c58ea8">fWSHandlers</a>) {</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="keywordflow">if</span> (strcmp(name, <a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a>-&gt;GetName()) == 0)</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;}</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">/// Execute WS related operation</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01032"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a2f368218d71db4384e8ea30666b02a17"> 1032</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#a2f368218d71db4384e8ea30666b02a17">THttpServer::ExecuteWS</a>(std::shared_ptr&lt;THttpCallArg&gt; &amp;arg, <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> external_thrd, <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> wait_process)</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;{</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classTHttpServer.html#af3ca757b2ff9ab349adaf20a8d2687f7">fTerminated</a>) {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      arg-&gt;Set404();</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   <span class="keyword">auto</span> wsptr = <a class="code" href="classTHttpServer.html#a169f3032c003e3998144558ce9094cc4">FindWS</a>(arg-&gt;GetPathName());</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   <span class="keyword">auto</span> handler = wsptr.get();</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   <span class="keywordflow">if</span> (!handler &amp;&amp; !external_thrd)</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      handler = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classTHttpWSHandler.html">THttpWSHandler</a> *<span class="keyword">&gt;</span>(<a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#aab3bf29366f5bedc389e0db36816d82c">FindTObjectInHierarchy</a>(arg-&gt;fPathName.Data()));</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <span class="keywordflow">if</span> (external_thrd &amp;&amp; (!handler || !handler-&gt;AllowMTProcess())) {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      std::unique_lock&lt;std::mutex&gt; lk(<a class="code" href="classTHttpServer.html#ac2f97adc699f59067de4e6d37b46ed23">fMutex</a>);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <a class="code" href="classTHttpServer.html#a8123f2cb589be71202370aca380dbf20">fArgs</a>.push(arg);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="comment">// and now wait until request is processed</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">if</span> (wait_process)</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;         arg-&gt;fCond.wait(lk);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">if</span> (!handler)</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> process = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   <span class="keywordflow">if</span> (arg-&gt;fFileName == <span class="stringliteral">&quot;root.websocket&quot;</span>) {</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <span class="comment">// handling of web socket</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      process = handler-&gt;HandleWS(arg);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arg-&gt;fFileName == <span class="stringliteral">&quot;root.longpoll&quot;</span>) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="comment">// ROOT emulation of websocket with polling requests</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">if</span> (arg-&gt;fQuery.BeginsWith(<span class="stringliteral">&quot;raw_connect&quot;</span>) || arg-&gt;fQuery.BeginsWith(<span class="stringliteral">&quot;txt_connect&quot;</span>)) {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;         <span class="comment">// try to emulate websocket connect</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;         <span class="comment">// if accepted, reply with connection id, which must be used in the following communications</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;         arg-&gt;SetMethod(<span class="stringliteral">&quot;WS_CONNECT&quot;</span>);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;         <span class="keywordtype">bool</span> israw = arg-&gt;fQuery.BeginsWith(<span class="stringliteral">&quot;raw_connect&quot;</span>);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;         <span class="comment">// automatically assign engine to arg</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;         arg-&gt;CreateWSEngine&lt;<a class="code" href="classTHttpLongPollEngine.html">THttpLongPollEngine</a>&gt;(israw);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;         <span class="keywordflow">if</span> (handler-&gt;HandleWS(arg)) {</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            arg-&gt;SetMethod(<span class="stringliteral">&quot;WS_READY&quot;</span>);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            <span class="keywordflow">if</span> (handler-&gt;HandleWS(arg))</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;               arg-&gt;SetTextContent(std::string(israw ? <span class="stringliteral">&quot;txt:&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) + std::to_string(arg-&gt;GetWSId()));</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            arg-&gt;TakeWSEngine(); <span class="comment">// delete handle</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;         }</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;         process = arg-&gt;IsText();</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;         <a class="code" href="classTUrl.html">TUrl</a> url;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;         url.<a class="code" href="classTUrl.html#aa41691d05f81e5ea2c64080345954efd">SetOptions</a>(arg-&gt;fQuery);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;         url.<a class="code" href="classTUrl.html#ac18e70791783bb20740ce714f5b43f40">ParseOptions</a>();</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;         <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> connid = url.<a class="code" href="classTUrl.html#a866c920256a9f014f3a9e49344132517">GetIntValueFromOptions</a>(<span class="stringliteral">&quot;connection&quot;</span>);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;         arg-&gt;SetWSId((<a class="code" href="RtypesCore_8h.html#a7c1bc4939263cb6c0f48e434d77ac258">UInt_t</a>)connid);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;         <span class="keywordflow">if</span> (url.<a class="code" href="classTUrl.html#af55da20fe0841027f90c5edd6f543af8">HasOption</a>(<span class="stringliteral">&quot;close&quot;</span>)) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            arg-&gt;SetMethod(<span class="stringliteral">&quot;WS_CLOSE&quot;</span>);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            arg-&gt;SetTextContent(<span class="stringliteral">&quot;OK&quot;</span>);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            arg-&gt;SetMethod(<span class="stringliteral">&quot;WS_DATA&quot;</span>);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;         }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;         process = handler-&gt;HandleWS(arg);</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      }</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   <span class="keywordflow">if</span> (!process)</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      arg-&gt;Set404();</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <span class="keywordflow">return</span> process;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;}</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">/// Restrict access to specified object</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">/// See TRootSniffer::Restrict() for more details</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01114"></a><span class="lineno"><a class="line" href="classTHttpServer.html#aff3406fe2fa44f9f04310a0221271802"> 1114</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTHttpServer.html#aff3406fe2fa44f9f04310a0221271802">THttpServer::Restrict</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keyword">const</span> <span class="keywordtype">char</span> *options)</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;{</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a8af1f11cbfb9c895f968ec0594794120">Restrict</a>(path, options);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;}</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">/// Register command which can be executed from web interface</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">/// As method one typically specifies string, which is executed with</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">/// gROOT-&gt;ProcessLine() method. For instance</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">///    serv-&gt;RegisterCommand(&quot;Invoke&quot;,&quot;InvokeFunction()&quot;);</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">/// Or one could specify any method of the object which is already registered</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">/// to the server. For instance:</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">///     serv-&gt;Register(&quot;/&quot;, hpx);</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">///     serv-&gt;RegisterCommand(&quot;/ResetHPX&quot;, &quot;/hpx/-&gt;Reset()&quot;);</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">/// Here symbols &#39;/-&gt;&#39; separates item name from method to be executed</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">/// One could specify additional arguments in the command with</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">/// syntax like %arg1%, %arg2% and so on. For example:</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">///     serv-&gt;RegisterCommand(&quot;/ResetHPX&quot;, &quot;/hpx/-&gt;SetTitle(\&quot;%arg1%\&quot;)&quot;);</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">///     serv-&gt;RegisterCommand(&quot;/RebinHPXPY&quot;, &quot;/hpxpy/-&gt;Rebin2D(%arg1%,%arg2%)&quot;);</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">/// Such parameter(s) will be requested when command clicked in the browser.</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">/// Once command is registered, one could specify icon which will appear in the browser:</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">///     serv-&gt;SetIcon(&quot;/ResetHPX&quot;, &quot;rootsys/icons/ed_execute.png&quot;);</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment">/// One also can set extra property &#39;_fastcmd&#39;, that command appear as</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">/// tool button on the top of the browser tree:</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">///     serv-&gt;SetItemField(&quot;/ResetHPX&quot;, &quot;_fastcmd&quot;, &quot;true&quot;);</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment">/// Or it is equivalent to specifying extra argument when register command:</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">///     serv-&gt;RegisterCommand(&quot;/ResetHPX&quot;, &quot;/hpx/-&gt;Reset()&quot;, &quot;button;rootsys/icons/ed_delete.png&quot;);</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01147"></a><span class="lineno"><a class="line" href="classTHttpServer.html#aeab9f63a3a5db10abc8897c3e5802911"> 1147</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#aeab9f63a3a5db10abc8897c3e5802911">THttpServer::RegisterCommand</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *cmdname, <span class="keyword">const</span> <span class="keywordtype">char</span> *method, <span class="keyword">const</span> <span class="keywordtype">char</span> *icon)</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;{</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#aed335302f017ea7fd25915abf60319af">RegisterCommand</a>(cmdname, method, icon);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;}</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">/// hides folder or element from web gui</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01155"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a4aae7ac01f8d8abc593c9cbb1e65ee0c"> 1155</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#a4aae7ac01f8d8abc593c9cbb1e65ee0c">THttpServer::Hide</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *foldername, <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> hide)</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;{</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classTHttpServer.html#ababa1e21458c194deeecee9aba49fce2">SetItemField</a>(foldername, <span class="stringliteral">&quot;_hidden&quot;</span>, hide ? <span class="stringliteral">&quot;true&quot;</span> : (<span class="keyword">const</span> <span class="keywordtype">char</span> *)0);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;}</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">/// set name of icon, used in browser together with the item</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">/// One could use images from $ROOTSYS directory like:</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">///    serv-&gt;SetIcon(&quot;/ResetHPX&quot;,&quot;/rootsys/icons/ed_execute.png&quot;);</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01166"></a><span class="lineno"><a class="line" href="classTHttpServer.html#aaac2d449c24d61508ccd94331baab8cc"> 1166</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#aaac2d449c24d61508ccd94331baab8cc">THttpServer::SetIcon</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *fullname, <span class="keyword">const</span> <span class="keywordtype">char</span> *iconname)</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;{</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classTHttpServer.html#ababa1e21458c194deeecee9aba49fce2">SetItemField</a>(fullname, <span class="stringliteral">&quot;_icon&quot;</span>, iconname);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;}</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01173"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a40bcc8416f30678bf051148ea9ab88b9"> 1173</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#a40bcc8416f30678bf051148ea9ab88b9">THttpServer::CreateItem</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *fullname, <span class="keyword">const</span> <span class="keywordtype">char</span> *title)</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;{</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#a41dce6fe01ec84ab4da84c14048cb4d0">CreateItem</a>(fullname, title);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;}</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01180"></a><span class="lineno"><a class="line" href="classTHttpServer.html#ababa1e21458c194deeecee9aba49fce2"> 1180</a></span>&#160;<a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> <a class="code" href="classTHttpServer.html#ababa1e21458c194deeecee9aba49fce2">THttpServer::SetItemField</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *fullname, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *value)</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;{</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#ae6c351bf55ebc53cf13fee808e97c463">SetItemField</a>(fullname, name, value);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;}</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01187"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a28854e4e504e55be3801295c25ae4c89"> 1187</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classTHttpServer.html#a28854e4e504e55be3801295c25ae4c89">THttpServer::GetItemField</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *fullname, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;{</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">fSniffer</a>-&gt;<a class="code" href="classTRootSniffer.html#ad651e3d328be0c9ba883b3d177fda0d0">GetItemField</a>(fullname, name);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;}</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">/// Returns MIME type base on file extension</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01195"></a><span class="lineno"><a class="line" href="classTHttpServer.html#ae37d74254890d241ee51afe1d0cd0efa"> 1195</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classTHttpServer.html#ae37d74254890d241ee51afe1d0cd0efa">THttpServer::GetMimeType</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path)</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;{</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="civetweb_8c.html#a3a21b674a056eab8a11436300ae02d00">extension</a>;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="civetweb_8c.html#a267ce87a2a38d9f1e99d345dbde97c28">ext_len</a>;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="civetweb_8c.html#a12139285594e136f3f40ec07d2fdc5c5">mime_type</a>;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   } <a class="code" href="civetweb_8c.html#a602c3b130721f4a9b469e8be70e7333f">builtin_mime_types</a>[] = {{<span class="stringliteral">&quot;.xml&quot;</span>, 4, <span class="stringliteral">&quot;text/xml&quot;</span>},</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                             {<span class="stringliteral">&quot;.json&quot;</span>, 5, <span class="stringliteral">&quot;application/json&quot;</span>},</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                             {<span class="stringliteral">&quot;.bin&quot;</span>, 4, <span class="stringliteral">&quot;application/x-binary&quot;</span>},</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                             {<span class="stringliteral">&quot;.gif&quot;</span>, 4, <span class="stringliteral">&quot;image/gif&quot;</span>},</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                             {<span class="stringliteral">&quot;.jpg&quot;</span>, 4, <span class="stringliteral">&quot;image/jpeg&quot;</span>},</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                             {<span class="stringliteral">&quot;.png&quot;</span>, 4, <span class="stringliteral">&quot;image/png&quot;</span>},</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                             {<span class="stringliteral">&quot;.html&quot;</span>, 5, <span class="stringliteral">&quot;text/html&quot;</span>},</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                             {<span class="stringliteral">&quot;.htm&quot;</span>, 4, <span class="stringliteral">&quot;text/html&quot;</span>},</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                             {<span class="stringliteral">&quot;.shtm&quot;</span>, 5, <span class="stringliteral">&quot;text/html&quot;</span>},</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                             {<span class="stringliteral">&quot;.shtml&quot;</span>, 6, <span class="stringliteral">&quot;text/html&quot;</span>},</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                             {<span class="stringliteral">&quot;.css&quot;</span>, 4, <span class="stringliteral">&quot;text/css&quot;</span>},</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                             {<span class="stringliteral">&quot;.js&quot;</span>, 3, <span class="stringliteral">&quot;application/x-javascript&quot;</span>},</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                             {<span class="stringliteral">&quot;.ico&quot;</span>, 4, <span class="stringliteral">&quot;image/x-icon&quot;</span>},</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                             {<span class="stringliteral">&quot;.jpeg&quot;</span>, 5, <span class="stringliteral">&quot;image/jpeg&quot;</span>},</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                             {<span class="stringliteral">&quot;.svg&quot;</span>, 4, <span class="stringliteral">&quot;image/svg+xml&quot;</span>},</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                             {<span class="stringliteral">&quot;.txt&quot;</span>, 4, <span class="stringliteral">&quot;text/plain&quot;</span>},</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                             {<span class="stringliteral">&quot;.torrent&quot;</span>, 8, <span class="stringliteral">&quot;application/x-bittorrent&quot;</span>},</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                             {<span class="stringliteral">&quot;.wav&quot;</span>, 4, <span class="stringliteral">&quot;audio/x-wav&quot;</span>},</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                             {<span class="stringliteral">&quot;.mp3&quot;</span>, 4, <span class="stringliteral">&quot;audio/x-mp3&quot;</span>},</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                             {<span class="stringliteral">&quot;.mid&quot;</span>, 4, <span class="stringliteral">&quot;audio/mid&quot;</span>},</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                             {<span class="stringliteral">&quot;.m3u&quot;</span>, 4, <span class="stringliteral">&quot;audio/x-mpegurl&quot;</span>},</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                             {<span class="stringliteral">&quot;.ogg&quot;</span>, 4, <span class="stringliteral">&quot;application/ogg&quot;</span>},</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                             {<span class="stringliteral">&quot;.ram&quot;</span>, 4, <span class="stringliteral">&quot;audio/x-pn-realaudio&quot;</span>},</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                             {<span class="stringliteral">&quot;.xslt&quot;</span>, 5, <span class="stringliteral">&quot;application/xml&quot;</span>},</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                             {<span class="stringliteral">&quot;.xsl&quot;</span>, 4, <span class="stringliteral">&quot;application/xml&quot;</span>},</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                             {<span class="stringliteral">&quot;.ra&quot;</span>, 3, <span class="stringliteral">&quot;audio/x-pn-realaudio&quot;</span>},</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                             {<span class="stringliteral">&quot;.doc&quot;</span>, 4, <span class="stringliteral">&quot;application/msword&quot;</span>},</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                             {<span class="stringliteral">&quot;.exe&quot;</span>, 4, <span class="stringliteral">&quot;application/octet-stream&quot;</span>},</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                             {<span class="stringliteral">&quot;.zip&quot;</span>, 4, <span class="stringliteral">&quot;application/x-zip-compressed&quot;</span>},</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                             {<span class="stringliteral">&quot;.xls&quot;</span>, 4, <span class="stringliteral">&quot;application/excel&quot;</span>},</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                             {<span class="stringliteral">&quot;.tgz&quot;</span>, 4, <span class="stringliteral">&quot;application/x-tar-gz&quot;</span>},</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                             {<span class="stringliteral">&quot;.tar&quot;</span>, 4, <span class="stringliteral">&quot;application/x-tar&quot;</span>},</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                             {<span class="stringliteral">&quot;.gz&quot;</span>, 3, <span class="stringliteral">&quot;application/x-gunzip&quot;</span>},</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                             {<span class="stringliteral">&quot;.arj&quot;</span>, 4, <span class="stringliteral">&quot;application/x-arj-compressed&quot;</span>},</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                             {<span class="stringliteral">&quot;.rar&quot;</span>, 4, <span class="stringliteral">&quot;application/x-arj-compressed&quot;</span>},</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                             {<span class="stringliteral">&quot;.rtf&quot;</span>, 4, <span class="stringliteral">&quot;application/rtf&quot;</span>},</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                             {<span class="stringliteral">&quot;.pdf&quot;</span>, 4, <span class="stringliteral">&quot;application/pdf&quot;</span>},</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                             {<span class="stringliteral">&quot;.swf&quot;</span>, 4, <span class="stringliteral">&quot;application/x-shockwave-flash&quot;</span>},</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                             {<span class="stringliteral">&quot;.mpg&quot;</span>, 4, <span class="stringliteral">&quot;video/mpeg&quot;</span>},</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                             {<span class="stringliteral">&quot;.webm&quot;</span>, 5, <span class="stringliteral">&quot;video/webm&quot;</span>},</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                             {<span class="stringliteral">&quot;.mpeg&quot;</span>, 5, <span class="stringliteral">&quot;video/mpeg&quot;</span>},</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                             {<span class="stringliteral">&quot;.mov&quot;</span>, 4, <span class="stringliteral">&quot;video/quicktime&quot;</span>},</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                             {<span class="stringliteral">&quot;.mp4&quot;</span>, 4, <span class="stringliteral">&quot;video/mp4&quot;</span>},</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                             {<span class="stringliteral">&quot;.m4v&quot;</span>, 4, <span class="stringliteral">&quot;video/x-m4v&quot;</span>},</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                             {<span class="stringliteral">&quot;.asf&quot;</span>, 4, <span class="stringliteral">&quot;video/x-ms-asf&quot;</span>},</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                             {<span class="stringliteral">&quot;.avi&quot;</span>, 4, <span class="stringliteral">&quot;video/x-msvideo&quot;</span>},</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                             {<span class="stringliteral">&quot;.bmp&quot;</span>, 4, <span class="stringliteral">&quot;image/bmp&quot;</span>},</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                             {<span class="stringliteral">&quot;.ttf&quot;</span>, 4, <span class="stringliteral">&quot;application/x-font-ttf&quot;</span>},</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                             {NULL, 0, NULL}};</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   <span class="keywordtype">int</span> path_len = strlen(path);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; <a class="code" href="civetweb_8c.html#a602c3b130721f4a9b469e8be70e7333f">builtin_mime_types</a>[i].extension != NULL; i++) {</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <span class="keywordflow">if</span> (path_len &lt;= <a class="code" href="civetweb_8c.html#a602c3b130721f4a9b469e8be70e7333f">builtin_mime_types</a>[i].<a class="code" href="civetweb_8c.html#a267ce87a2a38d9f1e99d345dbde97c28">ext_len</a>)</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *ext = path + (path_len - <a class="code" href="civetweb_8c.html#a602c3b130721f4a9b469e8be70e7333f">builtin_mime_types</a>[i].ext_len);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <span class="keywordflow">if</span> (strcmp(ext, <a class="code" href="civetweb_8c.html#a602c3b130721f4a9b469e8be70e7333f">builtin_mime_types</a>[i].<a class="code" href="civetweb_8c.html#a3a21b674a056eab8a11436300ae02d00">extension</a>) == 0) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="civetweb_8c.html#a602c3b130721f4a9b469e8be70e7333f">builtin_mime_types</a>[i].mime_type;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;text/plain&quot;</span>;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;}</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment">/// \deprecated reads file content</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01268"></a><span class="lineno"><a class="line" href="classTHttpServer.html#a89198e636a495f8402bdc7e342401698"> 1268</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="classTHttpServer.html#a89198e636a495f8402bdc7e342401698">THttpServer::ReadFileContent</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> &amp;len)</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;{</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   len = 0;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   std::ifstream is(filename);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   <span class="keywordflow">if</span> (!is)</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;   is.seekg(0, is.end);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;   len = is.tellg();</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   is.seekg(0, is.beg);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   <span class="keywordtype">char</span> *buf = (<span class="keywordtype">char</span> *)<a class="code" href="civetweb_8c.html#acf143577800376dd931c059ecc61ba06">malloc</a>(len);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   is.read(buf, len);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;   <span class="keywordflow">if</span> (!is) {</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <a class="code" href="civetweb_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(buf);</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      len = 0;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   <span class="keywordflow">return</span> buf;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;}</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment">/// reads file content, using std::string as container</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01294"></a><span class="lineno"><a class="line" href="classTHttpServer.html#ae5baf270bd92e67fb86dd63386d93b04"> 1294</a></span>&#160;std::string <a class="code" href="classTHttpServer.html#a89198e636a495f8402bdc7e342401698">THttpServer::ReadFileContent</a>(<span class="keyword">const</span> std::string &amp;filename)</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;{</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   std::ifstream is(filename);</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   std::string res;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   <span class="keywordflow">if</span> (is) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      is.seekg(0, std::ios::end);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      res.resize(is.tellg());</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      is.seekg(0, std::ios::beg);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      is.read((<span class="keywordtype">char</span> *)res.data(), res.length());</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="keywordflow">if</span> (!is)</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;         res.clear();</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   }</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;}</div><div class="ttc" id="classTRootSniffer_html_a25661502e8c3a298f967ef1ecad845b4"><div class="ttname"><a href="classTRootSniffer.html#a25661502e8c3a298f967ef1ecad845b4">TRootSniffer::RegisterObject</a></div><div class="ttdeci">Bool_t RegisterObject(const char *subfolder, TObject *obj)</div><div class="ttdoc">Register object in subfolder structure subfolder parameter can have many levels like: ...</div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l01615">TRootSniffer.cxx:1615</a></div></div>
<div class="ttc" id="classTHttpServer_html_a2cc31189a85c33d447decf98ddc0aedc"><div class="ttname"><a href="classTHttpServer.html#a2cc31189a85c33d447decf98ddc0aedc">THttpServer::ProcessRequests</a></div><div class="ttdeci">Int_t ProcessRequests()</div><div class="ttdoc">Process submitted requests, must be called from appropriate thread. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00617">THttpServer.cxx:617</a></div></div>
<div class="ttc" id="classTRootSniffer_html_a5b866ebc275d1d925b322297a6f2fcb0"><div class="ttname"><a href="classTRootSniffer.html#a5b866ebc275d1d925b322297a6f2fcb0">TRootSniffer::IsStreamerInfoItem</a></div><div class="ttdeci">virtual Bool_t IsStreamerInfoItem(const char *)</div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8h_source.html#l00236">TRootSniffer.h:236</a></div></div>
<div class="ttc" id="classTObjArray_html"><div class="ttname"><a href="classTObjArray.html">TObjArray</a></div><div class="ttdoc">An array of TObjects. </div><div class="ttdef"><b>Definition:</b> <a href="TObjArray_8h_source.html#l00037">TObjArray.h:37</a></div></div>
<div class="ttc" id="classTHttpWSHandler_html"><div class="ttname"><a href="classTHttpWSHandler.html">THttpWSHandler</a></div><div class="ttdef"><b>Definition:</b> <a href="THttpWSHandler_8h_source.html#l00025">THttpWSHandler.h:25</a></div></div>
<div class="ttc" id="classTList_html_abfc59852231e4c8050b581e890d05c36"><div class="ttname"><a href="classTList.html#abfc59852231e4c8050b581e890d05c36">TList::Delete</a></div><div class="ttdeci">virtual void Delete(Option_t *option=&quot;&quot;)</div><div class="ttdoc">Remove all objects from the list AND delete all heap based objects. </div><div class="ttdef"><b>Definition:</b> <a href="TList_8cxx_source.html#l00467">TList.cxx:467</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_ac067ff08c04a0a22ea942a0365d53a10"><div class="ttname"><a href="classTHttpCallArg.html#ac067ff08c04a0a22ea942a0365d53a10">THttpCallArg::fContent</a></div><div class="ttdeci">std::string fContent</div><div class="ttdoc">! content - text or binary </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00072">THttpCallArg.h:72</a></div></div>
<div class="ttc" id="classTHttpServer_html_a2a4daed62c2f6a8690a841c51b10d9a3"><div class="ttname"><a href="classTHttpServer.html#a2a4daed62c2f6a8690a841c51b10d9a3">THttpServer::fThrd</a></div><div class="ttdeci">std::thread fThrd</div><div class="ttdoc">! own thread </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00040">THttpServer.h:40</a></div></div>
<div class="ttc" id="TRootSniffer_8h_html"><div class="ttname"><a href="TRootSniffer_8h.html">TRootSniffer.h</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_afee2c0a98770daee5ad9e0fab0bd4864ae78f8e17378b51537fd50ab8cf1adb2d"><div class="ttname"><a href="classTHttpCallArg.html#afee2c0a98770daee5ad9e0fab0bd4864ae78f8e17378b51537fd50ab8cf1adb2d">THttpCallArg::kZipAlways</a></div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00038">THttpCallArg.h:38</a></div></div>
<div class="ttc" id="classTHttpServer_html_a169f3032c003e3998144558ce9094cc4"><div class="ttname"><a href="classTHttpServer.html#a169f3032c003e3998144558ce9094cc4">THttpServer::FindWS</a></div><div class="ttdeci">std::shared_ptr&lt; THttpWSHandler &gt; FindWS(const char *name)</div><div class="ttdoc">Find web-socket handler with given name. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01018">THttpServer.cxx:1018</a></div></div>
<div class="ttc" id="TCivetweb_8h_html"><div class="ttname"><a href="TCivetweb_8h.html">TCivetweb.h</a></div></div>
<div class="ttc" id="TClass_8h_html"><div class="ttname"><a href="TClass_8h.html">TClass.h</a></div></div>
<div class="ttc" id="classTHttpServer_html_a8a88ffca1b50053aea525cf0e8895d55"><div class="ttname"><a href="classTHttpServer.html#a8a88ffca1b50053aea525cf0e8895d55">THttpServer::fDrawPageCont</a></div><div class="ttdeci">std::string fDrawPageCont</div><div class="ttdoc">! content of draw html page </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00051">THttpServer.h:51</a></div></div>
<div class="ttc" id="classTHttpEngine_html_a63d967f28139672e010a79a8bec8e71a"><div class="ttname"><a href="classTHttpEngine.html#a63d967f28139672e010a79a8bec8e71a">THttpEngine::Process</a></div><div class="ttdeci">virtual void Process()</div><div class="ttdoc">Method regularly called in main ROOT context. </div><div class="ttdef"><b>Definition:</b> <a href="THttpEngine_8h_source.html#l00033">THttpEngine.h:33</a></div></div>
<div class="ttc" id="classTRootSniffer_html_a3cd9f9afca96ef33b7e9bf4e3a7e311c"><div class="ttname"><a href="classTRootSniffer.html#a3cd9f9afca96ef33b7e9bf4e3a7e311c">TRootSniffer::IsReadOnly</a></div><div class="ttdeci">Bool_t IsReadOnly() const</div><div class="ttdoc">Returns readonly mode. </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8h_source.html#l00188">TRootSniffer.h:188</a></div></div>
<div class="ttc" id="civetweb_8c_html_a12139285594e136f3f40ec07d2fdc5c5"><div class="ttname"><a href="civetweb_8c.html#a12139285594e136f3f40ec07d2fdc5c5">mime_type</a></div><div class="ttdeci">const char * mime_type</div><div class="ttdef"><b>Definition:</b> <a href="civetweb_8c_source.html#l07795">civetweb.c:7795</a></div></div>
<div class="ttc" id="ws_8C_html_a2503a8f71dd548f769f457a7bdf3a64b"><div class="ttname"><a href="ws_8C.html#a2503a8f71dd548f769f457a7bdf3a64b">ws</a></div><div class="ttdeci">void ws()</div><div class="ttdef"><b>Definition:</b> <a href="ws_8C_source.html#l00066">ws.C:66</a></div></div>
<div class="ttc" id="classTHttpServer_html_a8a17205fdd6f4d9f4d0567e026530a70"><div class="ttname"><a href="classTHttpServer.html#a8a17205fdd6f4d9f4d0567e026530a70">THttpServer::CreateServerThread</a></div><div class="ttdeci">void CreateServerThread()</div><div class="ttdoc">Creates special thread to process all requests, directed to http server. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00435">THttpServer.cxx:435</a></div></div>
<div class="ttc" id="classTRootSniffer_html_a5f77bc2873e01b494e9156e53e0b43ee"><div class="ttname"><a href="classTRootSniffer.html#a5f77bc2873e01b494e9156e53e0b43ee">TRootSniffer::Produce</a></div><div class="ttdeci">Bool_t Produce(const std::string &amp;path, const std::string &amp;file, const std::string &amp;options, std::string &amp;res)</div><div class="ttdoc">Method produce different kind of data out of object Parameter &amp;#39;path&amp;#39; specifies object or object membe...</div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l01482">TRootSniffer.cxx:1482</a></div></div>
<div class="ttc" id="classTHttpServer_html_a40a4bc73f6952dc400784e22b730aa64"><div class="ttname"><a href="classTHttpServer.html#a40a4bc73f6952dc400784e22b730aa64">THttpServer::SetDrawPage</a></div><div class="ttdeci">void SetDrawPage(const std::string &amp;filename=&quot;&quot;)</div><div class="ttdoc">Set file name of HTML page, delivered by the server when objects drawing page is requested from the b...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00326">THttpServer.cxx:326</a></div></div>
<div class="ttc" id="classTRootSnifferStoreJson_html"><div class="ttname"><a href="classTRootSnifferStoreJson.html">TRootSnifferStoreJson</a></div><div class="ttdoc">Storage of hierarchy scan in TRootSniffer in JSON format. </div><div class="ttdef"><b>Definition:</b> <a href="TRootSnifferStore_8h_source.html#l00082">TRootSnifferStore.h:82</a></div></div>
<div class="ttc" id="RtypesCore_8h_html_a2c5c48964d999d2c8252186e7ea2b022"><div class="ttname"><a href="RtypesCore_8h.html#a2c5c48964d999d2c8252186e7ea2b022">kNPOS</a></div><div class="ttdeci">const Ssiz_t kNPOS</div><div class="ttdef"><b>Definition:</b> <a href="RtypesCore_8h_source.html#l00111">RtypesCore.h:111</a></div></div>
<div class="ttc" id="classTUrl_html"><div class="ttname"><a href="classTUrl.html">TUrl</a></div><div class="ttdoc">This class represents a WWW compatible URL. </div><div class="ttdef"><b>Definition:</b> <a href="TUrl_8h_source.html#l00035">TUrl.h:35</a></div></div>
<div class="ttc" id="classTHttpServer_html_a28854e4e504e55be3801295c25ae4c89"><div class="ttname"><a href="classTHttpServer.html#a28854e4e504e55be3801295c25ae4c89">THttpServer::GetItemField</a></div><div class="ttdeci">const char * GetItemField(const char *fullname, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01187">THttpServer.cxx:1187</a></div></div>
<div class="ttc" id="classTHttpServer_html_a20f5158970ae299319b3d6168d820b4e"><div class="ttname"><a href="classTHttpServer.html#a20f5158970ae299319b3d6168d820b4e">THttpServer::MissedRequest</a></div><div class="ttdeci">virtual void MissedRequest(THttpCallArg *arg)</div><div class="ttdoc">Method called when THttpServer cannot process request By default such requests replied with 404 code ...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00680">THttpServer.cxx:680</a></div></div>
<div class="ttc" id="classTHttpServer_html_aa52e0db242b7352f28a5124967356d04"><div class="ttname"><a href="classTHttpServer.html#aa52e0db242b7352f28a5124967356d04">THttpServer::fWSMutex</a></div><div class="ttdeci">std::mutex fWSMutex</div><div class="ttdoc">! mutex to protect WS handler lists </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00057">THttpServer.h:57</a></div></div>
<div class="ttc" id="classTHttpServer_html_a01ad6fa9b6faa282bbf50116aaf9bbac"><div class="ttname"><a href="classTHttpServer.html#a01ad6fa9b6faa282bbf50116aaf9bbac">THttpServer::IsReadOnly</a></div><div class="ttdeci">Bool_t IsReadOnly() const</div><div class="ttdoc">returns read-only mode </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00256">THttpServer.cxx:256</a></div></div>
<div class="ttc" id="classTHttpServer_html_a074cf866f73fd2a36e7f8bd231dd2c31"><div class="ttname"><a href="classTHttpServer.html#a074cf866f73fd2a36e7f8bd231dd2c31">THttpServer::ProcessRequest</a></div><div class="ttdeci">virtual void ProcessRequest(std::shared_ptr&lt; THttpCallArg &gt; arg)</div><div class="ttdoc">Process single http request Depending from requested path and filename different actions will be perf...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00705">THttpServer.cxx:705</a></div></div>
<div class="ttc" id="TROOT_8h_html_a851dd11b3478372a25ba6eff6dcfa5b1"><div class="ttname"><a href="TROOT_8h.html#a851dd11b3478372a25ba6eff6dcfa5b1">gROOT</a></div><div class="ttdeci">#define gROOT</div><div class="ttdef"><b>Definition:</b> <a href="TROOT_8h_source.html#l00413">TROOT.h:413</a></div></div>
<div class="ttc" id="classTString_html_afc98ee43fb8f288ab97b0accb4aaff3c"><div class="ttname"><a href="classTString.html#afc98ee43fb8f288ab97b0accb4aaff3c">TString::Index</a></div><div class="ttdeci">Ssiz_t Index(const char *pat, Ssiz_t i=0, ECaseCompare cmp=kExact) const</div><div class="ttdef"><b>Definition:</b> <a href="TString_8h_source.html#l00634">TString.h:634</a></div></div>
<div class="ttc" id="classTHttpServer_html_a7ac4c804e99ba9bcbe88c916f649fbf6"><div class="ttname"><a href="classTHttpServer.html#a7ac4c804e99ba9bcbe88c916f649fbf6">THttpServer::IsCors</a></div><div class="ttdeci">Bool_t IsCors() const</div><div class="ttdoc">Returns kTRUE if CORS was configured. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00100">THttpServer.h:100</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a83bbc9eb5eae9a9dabd05f5cd0370720"><div class="ttname"><a href="classTHttpCallArg.html#a83bbc9eb5eae9a9dabd05f5cd0370720">THttpCallArg::fQuery</a></div><div class="ttdeci">TString fQuery</div><div class="ttdoc">! additional arguments </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00047">THttpCallArg.h:47</a></div></div>
<div class="ttc" id="classTHttpServer_html_a1a6e656d081bfaaeee97d8f939c58ea8"><div class="ttname"><a href="classTHttpServer.html#a1a6e656d081bfaaeee97d8f939c58ea8">THttpServer::fWSHandlers</a></div><div class="ttdeci">std::vector&lt; std::shared_ptr&lt; THttpWSHandler &gt; &gt; fWSHandlers</div><div class="ttdoc">! list of WS handlers </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00058">THttpServer.h:58</a></div></div>
<div class="ttc" id="TFastCgi_8h_html"><div class="ttname"><a href="TFastCgi_8h.html">TFastCgi.h</a></div></div>
<div class="ttc" id="classTString_html"><div class="ttname"><a href="classTString.html">TString</a></div><div class="ttdoc">Basic string class. </div><div class="ttdef"><b>Definition:</b> <a href="TString_8h_source.html#l00131">TString.h:131</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a841736f25f0f3901428432d62e64e2a6"><div class="ttname"><a href="classTHttpCallArg.html#a841736f25f0f3901428432d62e64e2a6">THttpCallArg::GetPathName</a></div><div class="ttdeci">const char * GetPathName() const</div><div class="ttdoc">returns path name from request URL </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00145">THttpCallArg.h:145</a></div></div>
<div class="ttc" id="classTHttpServer_html_a3d85ff126751fdaa287fa1bf030fcfe1"><div class="ttname"><a href="classTHttpServer.html#a3d85ff126751fdaa287fa1bf030fcfe1">THttpServer::fTopName</a></div><div class="ttdeci">TString fTopName</div><div class="ttdoc">! name of top folder, default - &quot;ROOT&quot; </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00043">THttpServer.h:43</a></div></div>
<div class="ttc" id="RtypesCore_8h_html_a3885b911a54b47a4e61671f45dd45d0b"><div class="ttname"><a href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a></div><div class="ttdeci">int Int_t</div><div class="ttdef"><b>Definition:</b> <a href="RtypesCore_8h_source.html#l00041">RtypesCore.h:41</a></div></div>
<div class="ttc" id="classTHttpServer_html_a83fc25568b1407c8d4743f5197220d03"><div class="ttname"><a href="classTHttpServer.html#a83fc25568b1407c8d4743f5197220d03">THttpServer::SetDefaultPage</a></div><div class="ttdeci">void SetDefaultPage(const std::string &amp;filename=&quot;&quot;)</div><div class="ttdoc">Set file name of HTML page, delivered by the server when http address is opened in the browser...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00309">THttpServer.cxx:309</a></div></div>
<div class="ttc" id="classTHttpServer_html_a431fbf49cbcf695155c5f92f441da145"><div class="ttname"><a href="classTHttpServer.html#a431fbf49cbcf695155c5f92f441da145">THttpServer::ExecuteHttp</a></div><div class="ttdeci">Bool_t ExecuteHttp(std::shared_ptr&lt; THttpCallArg &gt; arg)</div><div class="ttdoc">Execute HTTP request. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00558">THttpServer.cxx:558</a></div></div>
<div class="ttc" id="RtypesCore_8h_html_aa101f564ac7b845ca31aec2fbc00ce97"><div class="ttname"><a href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a></div><div class="ttdeci">bool Bool_t</div><div class="ttdef"><b>Definition:</b> <a href="RtypesCore_8h_source.html#l00059">RtypesCore.h:59</a></div></div>
<div class="ttc" id="classTRootSniffer_html"><div class="ttname"><a href="classTRootSniffer.html">TRootSniffer</a></div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8h_source.html#l00114">TRootSniffer.h:114</a></div></div>
<div class="ttc" id="classTROOT_html_a9d1567f86b50c3e4faeee9de0089e6eb"><div class="ttname"><a href="classTROOT.html#a9d1567f86b50c3e4faeee9de0089e6eb">TROOT::GetRootSys</a></div><div class="ttdeci">static const TString &amp; GetRootSys()</div><div class="ttdoc">Get the rootsys directory in the installation. Static utility function. </div><div class="ttdef"><b>Definition:</b> <a href="TROOT_8cxx_source.html#l02938">TROOT.cxx:2938</a></div></div>
<div class="ttc" id="classTRootSniffer_html_a8af1f11cbfb9c895f968ec0594794120"><div class="ttname"><a href="classTRootSniffer.html#a8af1f11cbfb9c895f968ec0594794120">TRootSniffer::Restrict</a></div><div class="ttdeci">void Restrict(const char *path, const char *options)</div><div class="ttdoc">Restrict access to the specified location. </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l00467">TRootSniffer.cxx:467</a></div></div>
<div class="ttc" id="classTRootSniffer_html_a3d176f4207441506527cccdd36a5d27b"><div class="ttname"><a href="classTRootSniffer.html#a3d176f4207441506527cccdd36a5d27b">TRootSniffer::UnregisterObject</a></div><div class="ttdeci">Bool_t UnregisterObject(TObject *obj)</div><div class="ttdoc">unregister (remove) object from folders structures folder itself will remain even when it will be emp...</div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l01633">TRootSniffer.cxx:1633</a></div></div>
<div class="ttc" id="RVersion_8h_html"><div class="ttname"><a href="RVersion_8h.html">RVersion.h</a></div></div>
<div class="ttc" id="classTHttpServer_html_a7577c2b6dc702cb6bb7f0e59a552ba63"><div class="ttname"><a href="classTHttpServer.html#a7577c2b6dc702cb6bb7f0e59a552ba63">THttpServer::fEngines</a></div><div class="ttdeci">TList fEngines</div><div class="ttdoc">! engines which runs http server </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00034">THttpServer.h:34</a></div></div>
<div class="ttc" id="classTObjArray_html_afc2e394af1d0f104a67f6cd7f9043c12"><div class="ttname"><a href="classTObjArray.html#afc2e394af1d0f104a67f6cd7f9043c12">TObjArray::At</a></div><div class="ttdeci">TObject * At(Int_t idx) const</div><div class="ttdef"><b>Definition:</b> <a href="TObjArray_8h_source.html#l00166">TObjArray.h:166</a></div></div>
<div class="ttc" id="classTHttpEngine_html_a3fb9904eb8ce7476bf26a52e1a89292b"><div class="ttname"><a href="classTHttpEngine.html#a3fb9904eb8ce7476bf26a52e1a89292b">THttpEngine::SetServer</a></div><div class="ttdeci">void SetServer(THttpServer *serv)</div><div class="ttdef"><b>Definition:</b> <a href="THttpEngine_8h_source.html#l00027">THttpEngine.h:27</a></div></div>
<div class="ttc" id="classTHttpServer_html_af3ca757b2ff9ab349adaf20a8d2687f7"><div class="ttname"><a href="classTHttpServer.html#af3ca757b2ff9ab349adaf20a8d2687f7">THttpServer::fTerminated</a></div><div class="ttdeci">Bool_t fTerminated</div><div class="ttdoc">! termination flag, disables all requests processing </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00037">THttpServer.h:37</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a1cfe659686013149db064a05fe52eac1"><div class="ttname"><a href="classTHttpCallArg.html#a1cfe659686013149db064a05fe52eac1">THttpCallArg::SetFile</a></div><div class="ttdeci">void SetFile(const char *filename=nullptr)</div><div class="ttdoc">indicate that http request should response with file content </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00168">THttpCallArg.h:168</a></div></div>
<div class="ttc" id="classTHttpServer_html_ad89d3ca70853fe70b3a1f0f8b22a73c4"><div class="ttname"><a href="classTHttpServer.html#ad89d3ca70853fe70b3a1f0f8b22a73c4">THttpServer::UnregisterWS</a></div><div class="ttdeci">void UnregisterWS(std::shared_ptr&lt; THttpWSHandler &gt; ws)</div><div class="ttdoc">Unregister WS handler. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01005">THttpServer.cxx:1005</a></div></div>
<div class="ttc" id="civetweb_8c_html_acf143577800376dd931c059ecc61ba06"><div class="ttname"><a href="civetweb_8c.html#acf143577800376dd931c059ecc61ba06">malloc</a></div><div class="ttdeci">#define malloc</div><div class="ttdef"><b>Definition:</b> <a href="civetweb_8c_source.html#l01536">civetweb.c:1536</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_ad23bf62c26d5fb506d774b1a5d646fad"><div class="ttname"><a href="classTHttpCallArg.html#ad23bf62c26d5fb506d774b1a5d646fad">THttpCallArg::SetContentType</a></div><div class="ttdeci">void SetContentType(const char *typ)</div><div class="ttdoc">set content type like &quot;text/xml&quot; or &quot;application/json&quot; </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00159">THttpCallArg.h:159</a></div></div>
<div class="ttc" id="classTRootSniffer_html_a41dce6fe01ec84ab4da84c14048cb4d0"><div class="ttname"><a href="classTRootSniffer.html#a41dce6fe01ec84ab4da84c14048cb4d0">TRootSniffer::CreateItem</a></div><div class="ttdeci">Bool_t CreateItem(const char *fullname, const char *title)</div><div class="ttdoc">create item element </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l01654">TRootSniffer.cxx:1654</a></div></div>
<div class="ttc" id="classTHttpServer_html_a40bcc8416f30678bf051148ea9ab88b9"><div class="ttname"><a href="classTHttpServer.html#a40bcc8416f30678bf051148ea9ab88b9">THttpServer::CreateItem</a></div><div class="ttdeci">Bool_t CreateItem(const char *fullname, const char *title)</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01173">THttpServer.cxx:1173</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_aa68d70d5a7254cf2c1d9652cf85bb328"><div class="ttname"><a href="classTHttpCallArg.html#aa68d70d5a7254cf2c1d9652cf85bb328">THttpCallArg::SetContent</a></div><div class="ttdeci">void SetContent(const char *cont)</div><div class="ttdoc">Set content as text. </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8cxx_source.html#l00123">THttpCallArg.cxx:123</a></div></div>
<div class="ttc" id="classTHttpServer_html_a3ee1ed351c259bfa2b1f783f4e528098"><div class="ttname"><a href="classTHttpServer.html#a3ee1ed351c259bfa2b1f783f4e528098">THttpServer::fSniffer</a></div><div class="ttdeci">TRootSniffer * fSniffer</div><div class="ttdoc">! sniffer provides access to ROOT objects hierarchy </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00036">THttpServer.h:36</a></div></div>
<div class="ttc" id="classTHttpServer_html_a50d946836d71454d7f005278aa4722d8"><div class="ttname"><a href="classTHttpServer.html#a50d946836d71454d7f005278aa4722d8">THttpServer::THttpServer</a></div><div class="ttdeci">THttpServer(const char *engine=&quot;civetweb:8080&quot;)</div><div class="ttdoc">constructor </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00140">THttpServer.cxx:140</a></div></div>
<div class="ttc" id="classTHttpServer_html_a8123f2cb589be71202370aca380dbf20"><div class="ttname"><a href="classTHttpServer.html#a8123f2cb589be71202370aca380dbf20">THttpServer::fArgs</a></div><div class="ttdeci">std::queue&lt; std::shared_ptr&lt; THttpCallArg &gt; &gt; fArgs</div><div class="ttdoc">! submitted arguments </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00055">THttpServer.h:55</a></div></div>
<div class="ttc" id="classTString_html_ac34bbb89627e20624a416dfbb7a3db70"><div class="ttname"><a href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a></div><div class="ttdeci">static TString Format(const char *fmt,...)</div><div class="ttdoc">Static method which formats a string using a printf style format descriptor and return a TString...</div><div class="ttdef"><b>Definition:</b> <a href="TString_8cxx_source.html#l02311">TString.cxx:2311</a></div></div>
<div class="ttc" id="classTHttpServer_html_a1e088985033d056caf3ad6924f9afd7c"><div class="ttname"><a href="classTHttpServer.html#a1e088985033d056caf3ad6924f9afd7c">THttpServer::SetTerminate</a></div><div class="ttdeci">void SetTerminate()</div><div class="ttdoc">set termination flag, no any further requests will be processed </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00248">THttpServer.cxx:248</a></div></div>
<div class="ttc" id="classTRootSniffer_html_ae6c351bf55ebc53cf13fee808e97c463"><div class="ttname"><a href="classTRootSniffer.html#ae6c351bf55ebc53cf13fee808e97c463">TRootSniffer::SetItemField</a></div><div class="ttdeci">Bool_t SetItemField(const char *fullname, const char *name, const char *value)</div><div class="ttdoc">set field for specified item </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l01758">TRootSniffer.cxx:1758</a></div></div>
<div class="ttc" id="classTIter_html"><div class="ttname"><a href="classTIter.html">TIter</a></div><div class="ttdef"><b>Definition:</b> <a href="TCollection_8h_source.html#l00233">TCollection.h:233</a></div></div>
<div class="ttc" id="classTNamed_html"><div class="ttname"><a href="classTNamed.html">TNamed</a></div><div class="ttdoc">The TNamed class is the base class for all named ROOT classes. </div><div class="ttdef"><b>Definition:</b> <a href="TNamed_8h_source.html#l00029">TNamed.h:29</a></div></div>
<div class="ttc" id="classTHttpServer_html_a24440d2fcf3a3545555b4680efe175f6"><div class="ttname"><a href="classTHttpServer.html#a24440d2fcf3a3545555b4680efe175f6">THttpServer::fOwnThread</a></div><div class="ttdeci">Bool_t fOwnThread</div><div class="ttdoc">! true when specialized thread allocated for processing requests </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00039">THttpServer.h:39</a></div></div>
<div class="ttc" id="TSystem_8h_html"><div class="ttname"><a href="TSystem_8h.html">TSystem.h</a></div></div>
<div class="ttc" id="classTHttpServer_html_a8f95843c844cc4a187f43c94746441d1"><div class="ttname"><a href="classTHttpServer.html#a8f95843c844cc4a187f43c94746441d1">THttpServer::fTimer</a></div><div class="ttdeci">THttpTimer * fTimer</div><div class="ttdoc">! timer used to access main thread </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00035">THttpServer.h:35</a></div></div>
<div class="ttc" id="classTSystem_html_a4ae57a039e0d61296c386e89d6e4dce8"><div class="ttname"><a href="classTSystem.html#a4ae57a039e0d61296c386e89d6e4dce8">TSystem::Getenv</a></div><div class="ttdeci">virtual const char * Getenv(const char *env)</div><div class="ttdoc">Get environment variable. </div><div class="ttdef"><b>Definition:</b> <a href="TSystem_8cxx_source.html#l01644">TSystem.cxx:1644</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a5868df22354b28e56de974a542c21290"><div class="ttname"><a href="classTHttpCallArg.html#a5868df22354b28e56de974a542c21290">THttpCallArg::fPathName</a></div><div class="ttdeci">TString fPathName</div><div class="ttdoc">! item path </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00044">THttpCallArg.h:44</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a08009170e4f8cb104bc816edbaf341dc"><div class="ttname"><a href="classTHttpCallArg.html#a08009170e4f8cb104bc816edbaf341dc">THttpCallArg::Set404</a></div><div class="ttdeci">void Set404()</div><div class="ttdoc">mark reply as 404 error - page/request not exists or refused </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00162">THttpCallArg.h:162</a></div></div>
<div class="ttc" id="classTString_html_ab8aab4fe47bfbf6030af50d01c9f6dff"><div class="ttname"><a href="classTString.html#ab8aab4fe47bfbf6030af50d01c9f6dff">TString::Append</a></div><div class="ttdeci">TString &amp; Append(const char *cs)</div><div class="ttdef"><b>Definition:</b> <a href="TString_8h_source.html#l00559">TString.h:559</a></div></div>
<div class="ttc" id="classTString_html_a2b2e907b9681d08cec32c853171c06a1"><div class="ttname"><a href="classTString.html#a2b2e907b9681d08cec32c853171c06a1">TString::EndsWith</a></div><div class="ttdeci">Bool_t EndsWith(const char *pat, ECaseCompare cmp=kExact) const</div><div class="ttdoc">Return true if string ends with the specified string. </div><div class="ttdef"><b>Definition:</b> <a href="TString_8cxx_source.html#l02177">TString.cxx:2177</a></div></div>
<div class="ttc" id="classTThread_html_a746ff9e6c404f46667f789758884d41a"><div class="ttname"><a href="classTThread.html#a746ff9e6c404f46667f789758884d41a">TThread::SelfId</a></div><div class="ttdeci">static Long_t SelfId()</div><div class="ttdoc">Static method returning the id for the current thread. </div><div class="ttdef"><b>Definition:</b> <a href="TThread_8cxx_source.html#l00547">TThread.cxx:547</a></div></div>
<div class="ttc" id="classTHttpServer_html_a793dd9ce7676d0a5af9b62527bccd084"><div class="ttname"><a href="classTHttpServer.html#a793dd9ce7676d0a5af9b62527bccd084">THttpServer::SetCors</a></div><div class="ttdeci">void SetCors(const std::string &amp;domain=&quot;*&quot;)</div><div class="ttdoc">Enable CORS header to ProcessRequests() responses Specified location (typically &quot;*&quot;) add as &quot;Access-C...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00097">THttpServer.h:97</a></div></div>
<div class="ttc" id="classTCivetweb_html"><div class="ttname"><a href="classTCivetweb.html">TCivetweb</a></div><div class="ttdef"><b>Definition:</b> <a href="TCivetweb_8h_source.html#l00018">TCivetweb.h:18</a></div></div>
<div class="ttc" id="classTRootSniffer_html_add13e574f43681357eb8a5c272f24415"><div class="ttname"><a href="classTRootSniffer.html#add13e574f43681357eb8a5c272f24415">TRootSniffer::GetStreamerInfoHash</a></div><div class="ttdeci">virtual ULong_t GetStreamerInfoHash()</div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8h_source.html#l00238">TRootSniffer.h:238</a></div></div>
<div class="ttc" id="classTString_html_a3f534327b29fb2dcd7d131b990b5dc1c"><div class="ttname"><a href="classTString.html#a3f534327b29fb2dcd7d131b990b5dc1c">TString::First</a></div><div class="ttdeci">Ssiz_t First(char c) const</div><div class="ttdoc">Find first occurrence of a character c. </div><div class="ttdef"><b>Definition:</b> <a href="TString_8cxx_source.html#l00499">TString.cxx:499</a></div></div>
<div class="ttc" id="classTHttpServer_html_a17e2427c25b65950f092b463677e163e"><div class="ttname"><a href="classTHttpServer.html#a17e2427c25b65950f092b463677e163e">THttpServer::SetTimer</a></div><div class="ttdeci">void SetTimer(Long_t milliSec=100, Bool_t mode=kTRUE)</div><div class="ttdoc">create timer which will invoke ProcessRequests() function periodically Timer is required to perform a...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00409">THttpServer.cxx:409</a></div></div>
<div class="ttc" id="classTHttpEngine_html"><div class="ttname"><a href="classTHttpEngine.html">THttpEngine</a></div><div class="ttdef"><b>Definition:</b> <a href="THttpEngine_8h_source.html#l00019">THttpEngine.h:19</a></div></div>
<div class="ttc" id="classTHttpServer_html_a6c6f17be3f3bb585ec9ec4f5b2e41722"><div class="ttname"><a href="classTHttpServer.html#a6c6f17be3f3bb585ec9ec4f5b2e41722">THttpServer::fJSROOTSYS</a></div><div class="ttdeci">TString fJSROOTSYS</div><div class="ttdoc">! location of local JSROOT files </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00042">THttpServer.h:42</a></div></div>
<div class="ttc" id="classTRootSnifferStoreXml_html"><div class="ttname"><a href="classTRootSnifferStoreXml.html">TRootSnifferStoreXml</a></div><div class="ttdoc">Storage of hierarchy scan in TRootSniffer in XML format. </div><div class="ttdef"><b>Definition:</b> <a href="TRootSnifferStore_8h_source.html#l00056">TRootSnifferStore.h:56</a></div></div>
<div class="ttc" id="classTHttpServer_html_a73658daf379e87a4832fe9dc5c1483ed"><div class="ttname"><a href="classTHttpServer.html#a73658daf379e87a4832fe9dc5c1483ed">THttpServer::Register</a></div><div class="ttdeci">Bool_t Register(const char *subfolder, TObject *obj)</div><div class="ttdoc">Register object in subfolder. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00976">THttpServer.cxx:976</a></div></div>
<div class="ttc" id="classTHttpServer_html_ab6ae169a73b6201e6cb5ddcd7281684d"><div class="ttname"><a href="classTHttpServer.html#ab6ae169a73b6201e6cb5ddcd7281684d">THttpServer::SetReadOnly</a></div><div class="ttdeci">void SetReadOnly(Bool_t readonly)</div><div class="ttdoc">Set read-only mode for the server (default on) In read-only server is not allowed to change any ROOT ...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00266">THttpServer.cxx:266</a></div></div>
<div class="ttc" id="classTHttpCallArg_html"><div class="ttname"><a href="classTHttpCallArg.html">THttpCallArg</a></div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00027">THttpCallArg.h:27</a></div></div>
<div class="ttc" id="classTFastCgi_html"><div class="ttname"><a href="classTFastCgi.html">TFastCgi</a></div><div class="ttdef"><b>Definition:</b> <a href="TFastCgi_8h_source.html#l00019">TFastCgi.h:19</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a258f286f14cd8b7f698016a98e26cf85"><div class="ttname"><a href="classTHttpCallArg.html#a258f286f14cd8b7f698016a98e26cf85">THttpCallArg::fTopName</a></div><div class="ttdeci">TString fTopName</div><div class="ttdoc">! top item name </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00042">THttpCallArg.h:42</a></div></div>
<div class="ttc" id="classTObjArray_html_a9d86066a7071cd85bca8130b65584390"><div class="ttname"><a href="classTObjArray.html#a9d86066a7071cd85bca8130b65584390">TObjArray::GetLast</a></div><div class="ttdeci">Int_t GetLast() const</div><div class="ttdoc">Return index of last object in array. </div><div class="ttdef"><b>Definition:</b> <a href="TObjArray_8cxx_source.html#l00576">TObjArray.cxx:576</a></div></div>
<div class="ttc" id="TTimer_8h_html"><div class="ttname"><a href="TTimer_8h.html">TTimer.h</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a11c73c71c145dc22ef43fec01978f011"><div class="ttname"><a href="classTHttpCallArg.html#a11c73c71c145dc22ef43fec01978f011">THttpCallArg::SetJson</a></div><div class="ttdeci">void SetJson()</div><div class="ttdoc">Set content type as &quot;application/json&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8cxx_source.html#l00179">THttpCallArg.cxx:179</a></div></div>
<div class="ttc" id="classTHttpServer_html_aaa630d2ceaff4f15b9579d27b242fd63"><div class="ttname"><a href="classTHttpServer.html#aaa630d2ceaff4f15b9579d27b242fd63">THttpServer::CreateEngine</a></div><div class="ttdeci">Bool_t CreateEngine(const char *engine)</div><div class="ttdoc">factory method to create different http engines At the moment two engine kinds are supported: civetwe...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00347">THttpServer.cxx:347</a></div></div>
<div class="ttc" id="classTHttpServer_html_aae6cc8a2446a8cb5c65cd60eddf85adb"><div class="ttname"><a href="classTHttpServer.html#aae6cc8a2446a8cb5c65cd60eddf85adb">THttpServer::fDrawPage</a></div><div class="ttdeci">std::string fDrawPage</div><div class="ttdoc">! file name for drawing of single element </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00050">THttpServer.h:50</a></div></div>
<div class="ttc" id="civetweb_8c_html_a267ce87a2a38d9f1e99d345dbde97c28"><div class="ttname"><a href="civetweb_8c.html#a267ce87a2a38d9f1e99d345dbde97c28">ext_len</a></div><div class="ttdeci">size_t ext_len</div><div class="ttdef"><b>Definition:</b> <a href="civetweb_8c_source.html#l07794">civetweb.c:7794</a></div></div>
<div class="ttc" id="TSystem_8h_html_ab7182c9ab5a9236e2bc1ed8b3fcb045f"><div class="ttname"><a href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a></div><div class="ttdeci">R__EXTERN TSystem * gSystem</div><div class="ttdef"><b>Definition:</b> <a href="TSystem_8h_source.html#l00560">TSystem.h:560</a></div></div>
<div class="ttc" id="THttpServer_8h_html"><div class="ttname"><a href="THttpServer_8h.html">THttpServer.h</a></div></div>
<div class="ttc" id="TROOT_8h_html"><div class="ttname"><a href="TROOT_8h.html">TROOT.h</a></div></div>
<div class="ttc" id="classTHttpServer_html_a5e8cadab74729873e3419c08ad8e5230"><div class="ttname"><a href="classTHttpServer.html#a5e8cadab74729873e3419c08ad8e5230">THttpServer::fLocations</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; fLocations</div><div class="ttdoc">! list of local directories, which could be accessed via server </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00046">THttpServer.h:46</a></div></div>
<div class="ttc" id="classTHttpServer_html_a2f368218d71db4384e8ea30666b02a17"><div class="ttname"><a href="classTHttpServer.html#a2f368218d71db4384e8ea30666b02a17">THttpServer::ExecuteWS</a></div><div class="ttdeci">Bool_t ExecuteWS(std::shared_ptr&lt; THttpCallArg &gt; &amp;arg, Bool_t external_thrd=kFALSE, Bool_t wait_process=kFALSE)</div><div class="ttdoc">Execute WS request. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01032">THttpServer.cxx:1032</a></div></div>
<div class="ttc" id="TError_8h_html"><div class="ttname"><a href="TError_8h.html">TError.h</a></div></div>
<div class="ttc" id="TUrl_8h_html"><div class="ttname"><a href="TUrl_8h.html">TUrl.h</a></div></div>
<div class="ttc" id="classTString_html_aeb44d6183d8b1f1b7090dbd3c93f5e39"><div class="ttname"><a href="classTString.html#aeb44d6183d8b1f1b7090dbd3c93f5e39">TString::Form</a></div><div class="ttdeci">void Form(const char *fmt,...)</div><div class="ttdoc">Formats a string using a printf style format descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="TString_8cxx_source.html#l02289">TString.cxx:2289</a></div></div>
<div class="ttc" id="RtypesCore_8h_html_a7c1bc4939263cb6c0f48e434d77ac258"><div class="ttname"><a href="RtypesCore_8h.html#a7c1bc4939263cb6c0f48e434d77ac258">UInt_t</a></div><div class="ttdeci">unsigned int UInt_t</div><div class="ttdef"><b>Definition:</b> <a href="RtypesCore_8h_source.html#l00042">RtypesCore.h:42</a></div></div>
<div class="ttc" id="TThread_8h_html"><div class="ttname"><a href="TThread_8h.html">TThread.h</a></div></div>
<div class="ttc" id="classTHttpServer_html_a1d2396e2e9fbcd585bfa268ded853c84"><div class="ttname"><a href="classTHttpServer.html#a1d2396e2e9fbcd585bfa268ded853c84">THttpServer::~THttpServer</a></div><div class="ttdeci">virtual ~THttpServer()</div><div class="ttdoc">destructor delete all http engines and sniffer </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00216">THttpServer.cxx:216</a></div></div>
<div class="ttc" id="classTRootSniffer_html_aed335302f017ea7fd25915abf60319af"><div class="ttname"><a href="classTRootSniffer.html#aed335302f017ea7fd25915abf60319af">TRootSniffer::RegisterCommand</a></div><div class="ttdeci">Bool_t RegisterCommand(const char *cmdname, const char *method, const char *icon)</div><div class="ttdoc">Register command which can be executed from web interface. </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l01838">TRootSniffer.cxx:1838</a></div></div>
<div class="ttc" id="classTObject_html_abe1fb206304cfa1b8d1e77a4a4fd0120"><div class="ttname"><a href="classTObject.html#abe1fb206304cfa1b8d1e77a4a4fd0120">TObject::Error</a></div><div class="ttdeci">virtual void Error(const char *method, const char *msgfmt,...) const</div><div class="ttdoc">Issue error message. </div><div class="ttdef"><b>Definition:</b> <a href="TObject_8cxx_source.html#l00880">TObject.cxx:880</a></div></div>
<div class="ttc" id="TString_8h_html_acf18c5b91421ac53e91bd96ebc07dea7"><div class="ttname"><a href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a></div><div class="ttdeci">char * Form(const char *fmt,...)</div></div>
<div class="ttc" id="classTString_html_a04e631ef510bdd4071c37b54fde0c1a7"><div class="ttname"><a href="classTString.html#a04e631ef510bdd4071c37b54fde0c1a7">TString::Length</a></div><div class="ttdeci">Ssiz_t Length() const</div><div class="ttdef"><b>Definition:</b> <a href="TString_8h_source.html#l00405">TString.h:405</a></div></div>
<div class="ttc" id="classTHttpEngine_html_a461fc508343a4e0d8ecb15b061a2b3f5"><div class="ttname"><a href="classTHttpEngine.html#a461fc508343a4e0d8ecb15b061a2b3f5">THttpEngine::Create</a></div><div class="ttdeci">virtual Bool_t Create(const char *)</div><div class="ttdoc">Method to create all components of engine. </div><div class="ttdef"><b>Definition:</b> <a href="THttpEngine_8h_source.html#l00037">THttpEngine.h:37</a></div></div>
<div class="ttc" id="classTTimer_html"><div class="ttname"><a href="classTTimer.html">TTimer</a></div><div class="ttdoc">Handles synchronous and a-synchronous timer events. </div><div class="ttdef"><b>Definition:</b> <a href="TTimer_8h_source.html#l00051">TTimer.h:51</a></div></div>
<div class="ttc" id="classTClass_html"><div class="ttname"><a href="classTClass.html">TClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TClass_8h_source.html#l00075">TClass.h:75</a></div></div>
<div class="ttc" id="THttpWSHandler_8h_html"><div class="ttname"><a href="THttpWSHandler_8h.html">THttpWSHandler.h</a></div></div>
<div class="ttc" id="classTHttpLongPollEngine_html"><div class="ttname"><a href="classTHttpLongPollEngine.html">THttpLongPollEngine</a></div><div class="ttdef"><b>Definition:</b> <a href="THttpLongPollEngine_8h_source.html#l00023">THttpLongPollEngine.h:23</a></div></div>
<div class="ttc" id="classTHttpServer_html_a24b3835dfac6b294c90c61070122a34b"><div class="ttname"><a href="classTHttpServer.html#a24b3835dfac6b294c90c61070122a34b">THttpServer::SetSniffer</a></div><div class="ttdeci">void SetSniffer(TRootSniffer *sniff)</div><div class="ttdoc">Set TRootSniffer to the server Server takes ownership over sniffer. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00237">THttpServer.cxx:237</a></div></div>
<div class="ttc" id="classTRootSniffer_html_a142aabf0bcc389a491cfc747a41a6d83"><div class="ttname"><a href="classTRootSniffer.html#a142aabf0bcc389a491cfc747a41a6d83">TRootSniffer::ScanHierarchy</a></div><div class="ttdeci">void ScanHierarchy(const char *topname, const char *path, TRootSnifferStore *store, Bool_t only_fields=kFALSE)</div><div class="ttdoc">Method scans normal objects, registered in ROOT. </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l01004">TRootSniffer.cxx:1004</a></div></div>
<div class="ttc" id="civetweb_8c_html_a602c3b130721f4a9b469e8be70e7333f"><div class="ttname"><a href="civetweb_8c.html#a602c3b130721f4a9b469e8be70e7333f">builtin_mime_types</a></div><div class="ttdeci">static const struct @139 builtin_mime_types[]</div></div>
<div class="ttc" id="RtypesCore_8h_html_a7e568baf910535e8ffd438acb843434d"><div class="ttname"><a href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a></div><div class="ttdeci">const Bool_t kFALSE</div><div class="ttdef"><b>Definition:</b> <a href="RtypesCore_8h_source.html#l00088">RtypesCore.h:88</a></div></div>
<div class="ttc" id="civetweb_8c_html_a3a21b674a056eab8a11436300ae02d00"><div class="ttname"><a href="civetweb_8c.html#a3a21b674a056eab8a11436300ae02d00">extension</a></div><div class="ttdeci">const char * extension</div><div class="ttdef"><b>Definition:</b> <a href="civetweb_8c_source.html#l07793">civetweb.c:7793</a></div></div>
<div class="ttc" id="classTString_html_ab13a8694c4221435f86b85ae452ed376"><div class="ttname"><a href="classTString.html#ab13a8694c4221435f86b85ae452ed376">TString::Remove</a></div><div class="ttdeci">TString &amp; Remove(Ssiz_t pos)</div><div class="ttdef"><b>Definition:</b> <a href="TString_8h_source.html#l00668">TString.h:668</a></div></div>
<div class="ttc" id="RtypesCore_8h_html_a84701346fdad56d1d91e06fcbc1b87dc"><div class="ttname"><a href="RtypesCore_8h.html#a84701346fdad56d1d91e06fcbc1b87dc">Long_t</a></div><div class="ttdeci">long Long_t</div><div class="ttdef"><b>Definition:</b> <a href="RtypesCore_8h_source.html#l00050">RtypesCore.h:50</a></div></div>
<div class="ttc" id="RtypesCore_8h_html_a649fe0f43fc2d393d99c5d39848f96b9"><div class="ttname"><a href="RtypesCore_8h.html#a649fe0f43fc2d393d99c5d39848f96b9">Ssiz_t</a></div><div class="ttdeci">int Ssiz_t</div><div class="ttdef"><b>Definition:</b> <a href="RtypesCore_8h_source.html#l00063">RtypesCore.h:63</a></div></div>
<div class="ttc" id="classTHttpServer_html_a5322c3bbfddb8eb6849297d83ccaf87f"><div class="ttname"><a href="classTHttpServer.html#a5322c3bbfddb8eb6849297d83ccaf87f">THttpServer::AddLocation</a></div><div class="ttdeci">void AddLocation(const char *prefix, const char *path)</div><div class="ttdoc">add files location, which could be used in the server one could map some system folder to the server ...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00278">THttpServer.cxx:278</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_ad8f6f64725e0e62bfdf500de49f6ce57"><div class="ttname"><a href="classTHttpCallArg.html#ad8f6f64725e0e62bfdf500de49f6ce57">THttpCallArg::CheckWSPageContent</a></div><div class="ttdeci">virtual void CheckWSPageContent(THttpWSHandler *)</div><div class="ttdoc">Method used to modify content of web page used by web socket handler. </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00067">THttpCallArg.h:67</a></div></div>
<div class="ttc" id="classTString_html_a689ddf39f10539c879dcee0c5f4113ec"><div class="ttname"><a href="classTString.html#a689ddf39f10539c879dcee0c5f4113ec">TString::Tokenize</a></div><div class="ttdeci">TObjArray * Tokenize(const TString &amp;delim) const</div><div class="ttdoc">This function is used to isolate sequential tokens in a TString. </div><div class="ttdef"><b>Definition:</b> <a href="TString_8cxx_source.html#l02197">TString.cxx:2197</a></div></div>
<div class="ttc" id="classTHttpServer_html_a4aae7ac01f8d8abc593c9cbb1e65ee0c"><div class="ttname"><a href="classTHttpServer.html#a4aae7ac01f8d8abc593c9cbb1e65ee0c">THttpServer::Hide</a></div><div class="ttdeci">Bool_t Hide(const char *fullname, Bool_t hide=kTRUE)</div><div class="ttdoc">hides folder or element from web gui </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01155">THttpServer.cxx:1155</a></div></div>
<div class="ttc" id="Rtypes_8h_html_a3f9bf160bbbb44209e95556960836b96"><div class="ttname"><a href="Rtypes_8h.html#a3f9bf160bbbb44209e95556960836b96">ClassImp</a></div><div class="ttdeci">#define ClassImp(name)</div><div class="ttdef"><b>Definition:</b> <a href="Rtypes_8h_source.html#l00365">Rtypes.h:365</a></div></div>
<div class="ttc" id="classTHttpServer_html_ac2f97adc699f59067de4e6d37b46ed23"><div class="ttname"><a href="classTHttpServer.html#ac2f97adc699f59067de4e6d37b46ed23">THttpServer::fMutex</a></div><div class="ttdeci">std::mutex fMutex</div><div class="ttdoc">! mutex to protect list with arguments </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00054">THttpServer.h:54</a></div></div>
<div class="ttc" id="classTHttpEngine_html_aa4fb5bb8f51049204b006a3ca20ff516"><div class="ttname"><a href="classTHttpEngine.html#aa4fb5bb8f51049204b006a3ca20ff516">THttpEngine::Terminate</a></div><div class="ttdeci">virtual void Terminate()</div><div class="ttdoc">Method called when server want to be terminated. </div><div class="ttdef"><b>Definition:</b> <a href="THttpEngine_8h_source.html#l00030">THttpEngine.h:30</a></div></div>
<div class="ttc" id="classTString_html_a632fcf337fbd97665dc484cda395d533"><div class="ttname"><a href="classTString.html#a632fcf337fbd97665dc484cda395d533">TString::Last</a></div><div class="ttdeci">Ssiz_t Last(char c) const</div><div class="ttdoc">Find last occurrence of a character c. </div><div class="ttdef"><b>Definition:</b> <a href="TString_8cxx_source.html#l00892">TString.cxx:892</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_aa1c0de6ad787a4d7098bf290d320999e"><div class="ttname"><a href="classTHttpCallArg.html#aa1c0de6ad787a4d7098bf290d320999e">THttpCallArg::SetXml</a></div><div class="ttdeci">void SetXml()</div><div class="ttdoc">Set content type as &quot;text/xml&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8cxx_source.html#l00161">THttpCallArg.cxx:161</a></div></div>
<div class="ttc" id="TRegexp_8h_html"><div class="ttname"><a href="TRegexp_8h.html">TRegexp.h</a></div></div>
<div class="ttc" id="TEnv_8h_html_a11202e6eff8457ae349087e34c0549c9"><div class="ttname"><a href="TEnv_8h.html#a11202e6eff8457ae349087e34c0549c9">gEnv</a></div><div class="ttdeci">R__EXTERN TEnv * gEnv</div><div class="ttdef"><b>Definition:</b> <a href="TEnv_8h_source.html#l00171">TEnv.h:171</a></div></div>
<div class="ttc" id="civetweb_8c_html_a2c6efa7679f8cd9f61af96e105017560"><div class="ttname"><a href="civetweb_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a></div><div class="ttdeci">#define free</div><div class="ttdef"><b>Definition:</b> <a href="civetweb_8c_source.html#l01539">civetweb.c:1539</a></div></div>
<div class="ttc" id="classTHttpServer_html_ac641d38d05f9d2e0a03ada64bec6e33d"><div class="ttname"><a href="classTHttpServer.html#ac641d38d05f9d2e0a03ada64bec6e33d">THttpServer::fDefaultPage</a></div><div class="ttdeci">std::string fDefaultPage</div><div class="ttdoc">! file name for default page name </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00048">THttpServer.h:48</a></div></div>
<div class="ttc" id="classTUrl_html_ac18e70791783bb20740ce714f5b43f40"><div class="ttname"><a href="classTUrl.html#ac18e70791783bb20740ce714f5b43f40">TUrl::ParseOptions</a></div><div class="ttdeci">void ParseOptions() const</div><div class="ttdoc">Parse URL options into a key/value map. </div><div class="ttdef"><b>Definition:</b> <a href="TUrl_8cxx_source.html#l00615">TUrl.cxx:615</a></div></div>
<div class="ttc" id="classTHttpServer_html_aeab9f63a3a5db10abc8897c3e5802911"><div class="ttname"><a href="classTHttpServer.html#aeab9f63a3a5db10abc8897c3e5802911">THttpServer::RegisterCommand</a></div><div class="ttdeci">Bool_t RegisterCommand(const char *cmdname, const char *method, const char *icon=0)</div><div class="ttdoc">Register command which can be executed from web interface. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01147">THttpServer.cxx:1147</a></div></div>
<div class="ttc" id="classTHttpServer_html_a1a134fb1d25ead2159fc046a73b2612a"><div class="ttname"><a href="classTHttpServer.html#a1a134fb1d25ead2159fc046a73b2612a">THttpServer::ProcessBatchHolder</a></div><div class="ttdeci">virtual void ProcessBatchHolder(std::shared_ptr&lt; THttpCallArg &gt; &amp;arg)</div><div class="ttdoc">Process special http request for root_batch_holder.js script This kind of requests used to hold web b...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00690">THttpServer.cxx:690</a></div></div>
<div class="ttc" id="classTString_html_a85b40d2d4ea6be7b6d3881145bb178b8"><div class="ttname"><a href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">TString::IsNull</a></div><div class="ttdeci">Bool_t IsNull() const</div><div class="ttdef"><b>Definition:</b> <a href="TString_8h_source.html#l00402">TString.h:402</a></div></div>
<div class="ttc" id="THttpLongPollEngine_8h_html"><div class="ttname"><a href="THttpLongPollEngine_8h.html">THttpLongPollEngine.h</a></div></div>
<div class="ttc" id="classTObject_html"><div class="ttname"><a href="classTObject.html">TObject</a></div><div class="ttdoc">Mother of all ROOT objects. </div><div class="ttdef"><b>Definition:</b> <a href="TObject_8h_source.html#l00037">TObject.h:37</a></div></div>
<div class="ttc" id="classTHttpServer_html_ae37d74254890d241ee51afe1d0cd0efa"><div class="ttname"><a href="classTHttpServer.html#ae37d74254890d241ee51afe1d0cd0efa">THttpServer::GetMimeType</a></div><div class="ttdeci">static const char * GetMimeType(const char *path)</div><div class="ttdoc">Guess mime type base on file extension. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01195">THttpServer.cxx:1195</a></div></div>
<div class="ttc" id="classTHttpServer_html_a8be4756fca7340af6e54fd5b31886cd6"><div class="ttname"><a href="classTHttpServer.html#a8be4756fca7340af6e54fd5b31886cd6">THttpServer::Unregister</a></div><div class="ttdeci">Bool_t Unregister(TObject *obj)</div><div class="ttdoc">Unregister object. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00986">THttpServer.cxx:986</a></div></div>
<div class="ttc" id="classTClass_html_abe3ce6afbd40ae5684c0468f7e9e5d8d"><div class="ttname"><a href="classTClass.html#abe3ce6afbd40ae5684c0468f7e9e5d8d">TClass::New</a></div><div class="ttdeci">void * New(ENewType defConstructor=kClassNew, Bool_t quiet=kFALSE) const</div></div>
<div class="ttc" id="classTHttpServer_html_a68704101f3c08b5edfe653c5d9c99835"><div class="ttname"><a href="classTHttpServer.html#a68704101f3c08b5edfe653c5d9c99835">THttpServer::fMainThrdId</a></div><div class="ttdeci">Long_t fMainThrdId</div><div class="ttdoc">! id of the thread for processing requests </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00038">THttpServer.h:38</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a36133ade6baed90cb7026f306e8251a7"><div class="ttname"><a href="classTHttpCallArg.html#a36133ade6baed90cb7026f306e8251a7">THttpCallArg::AddHeader</a></div><div class="ttdeci">void AddHeader(const char *name, const char *value)</div><div class="ttdoc">Set name: value pair to reply header Content-Type field handled separately - one should use SetConten...</div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8cxx_source.html#l00318">THttpCallArg.cxx:318</a></div></div>
<div class="ttc" id="classTROOT_html_af338b992735a139b516ab19540c7521a"><div class="ttname"><a href="classTROOT.html#af338b992735a139b516ab19540c7521a">TROOT::GetDataDir</a></div><div class="ttdeci">static const TString &amp; GetDataDir()</div><div class="ttdoc">Get the data directory in the installation. Static utility function. </div><div class="ttdef"><b>Definition:</b> <a href="TROOT_8cxx_source.html#l03043">TROOT.cxx:3043</a></div></div>
<div class="ttc" id="classTHttpServer_html_a89198e636a495f8402bdc7e342401698"><div class="ttname"><a href="classTHttpServer.html#a89198e636a495f8402bdc7e342401698">THttpServer::ReadFileContent</a></div><div class="ttdeci">static char * ReadFileContent(const char *filename, Int_t &amp;len)</div><div class="ttdoc">Reads content of file from the disk. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01268">THttpServer.cxx:1268</a></div></div>
<div class="ttc" id="THttpEngine_8h_html"><div class="ttname"><a href="THttpEngine_8h.html">THttpEngine.h</a></div></div>
<div class="ttc" id="classTRootSniffer_html_a8f76a743ab11d861b6a628484cb44eb1"><div class="ttname"><a href="classTRootSniffer.html#a8f76a743ab11d861b6a628484cb44eb1">TRootSniffer::SetReadOnly</a></div><div class="ttdeci">void SetReadOnly(Bool_t on=kTRUE)</div><div class="ttdoc">When readonly on (default), sniffer is not allowed to change ROOT structures For instance, it is not allowed to read new objects from files. </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8h_source.html#l00185">TRootSniffer.h:185</a></div></div>
<div class="ttc" id="classTHttpServer_html_ae3eba6eba61cf4a90102f1dd78dace40"><div class="ttname"><a href="classTHttpServer.html#ae3eba6eba61cf4a90102f1dd78dace40">THttpServer::GetCors</a></div><div class="ttdeci">const char * GetCors() const</div><div class="ttdoc">Returns specified CORS domain. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00103">THttpServer.h:103</a></div></div>
<div class="ttc" id="classTList_html_a1b90ccfbde1729266b585194fa45df14"><div class="ttname"><a href="classTList.html#a1b90ccfbde1729266b585194fa45df14">TList::Add</a></div><div class="ttdeci">virtual void Add(TObject *obj)</div><div class="ttdef"><b>Definition:</b> <a href="TList_8h_source.html#l00087">TList.h:87</a></div></div>
<div class="ttc" id="classTHttpServer_html_a641ac173cf8c6af4987795cdec8717aa"><div class="ttname"><a href="classTHttpServer.html#a641ac173cf8c6af4987795cdec8717aa">THttpServer::SubmitHttp</a></div><div class="ttdeci">Bool_t SubmitHttp(std::shared_ptr&lt; THttpCallArg &gt; arg, Bool_t can_run_immediately=kFALSE)</div><div class="ttdoc">Submit HTTP request. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00591">THttpServer.cxx:591</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a82812d54bec142a627b896bc0c8e2cf7"><div class="ttname"><a href="classTHttpCallArg.html#a82812d54bec142a627b896bc0c8e2cf7">THttpCallArg::Is404</a></div><div class="ttdeci">Bool_t Is404() const</div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00220">THttpCallArg.h:220</a></div></div>
<div class="ttc" id="classTHttpServer_html_aaac2d449c24d61508ccd94331baab8cc"><div class="ttname"><a href="classTHttpServer.html#aaac2d449c24d61508ccd94331baab8cc">THttpServer::SetIcon</a></div><div class="ttdeci">Bool_t SetIcon(const char *fullname, const char *iconname)</div><div class="ttdoc">set name of icon, used in browser together with the item </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01166">THttpServer.cxx:1166</a></div></div>
<div class="ttc" id="classTHttpServer_html_a2b9f44ee22d3fa34a14bd75e858bff6c"><div class="ttname"><a href="classTHttpServer.html#a2b9f44ee22d3fa34a14bd75e858bff6c">THttpServer::StopServerThread</a></div><div class="ttdeci">void StopServerThread()</div><div class="ttdoc">Stop server thread Normally called shortly before http server destructor. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00466">THttpServer.cxx:466</a></div></div>
<div class="ttc" id="classTUrl_html_aa41691d05f81e5ea2c64080345954efd"><div class="ttname"><a href="classTUrl.html#aa41691d05f81e5ea2c64080345954efd">TUrl::SetOptions</a></div><div class="ttdeci">void SetOptions(const char *opt)</div><div class="ttdef"><b>Definition:</b> <a href="TUrl_8h_source.html#l00090">TUrl.h:90</a></div></div>
<div class="ttc" id="classTTimer_html_afd52db45899ab85daefa61bd3debe1f3"><div class="ttname"><a href="classTTimer.html#afd52db45899ab85daefa61bd3debe1f3">TTimer::Timeout</a></div><div class="ttdeci">virtual void Timeout()</div><div class="ttdef"><b>Definition:</b> <a href="TTimer_8h_source.html#l00096">TTimer.h:96</a></div></div>
<div class="ttc" id="TRootSnifferStore_8h_html"><div class="ttname"><a href="TRootSnifferStore_8h.html">TRootSnifferStore.h</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a4a2a7714aeb96b46241efe7aa24b654a"><div class="ttname"><a href="classTHttpCallArg.html#a4a2a7714aeb96b46241efe7aa24b654a">THttpCallArg::ReplaceAllinContent</a></div><div class="ttdeci">void ReplaceAllinContent(const std::string &amp;from, const std::string &amp;to, bool once=false)</div><div class="ttdoc">Replace all occurrences of. </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8cxx_source.html#l00260">THttpCallArg.cxx:260</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_aeb3a5fa8d34106e3700a71e359b51a39"><div class="ttname"><a href="classTHttpCallArg.html#aeb3a5fa8d34106e3700a71e359b51a39">THttpCallArg::SetZipping</a></div><div class="ttdeci">void SetZipping(Int_t mode=kZipLarge)</div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00207">THttpCallArg.h:207</a></div></div>
<div class="ttc" id="classTRootSniffer_html_a76a12b3526c8bf34c2e205abe65e96d5"><div class="ttname"><a href="classTRootSniffer.html#a76a12b3526c8bf34c2e205abe65e96d5">TRootSniffer::CreateOwnTopFolder</a></div><div class="ttdeci">void CreateOwnTopFolder()</div><div class="ttdoc">Create own TFolder structures independent from gROOT This allows to have many independent TRootSniffe...</div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l00916">TRootSniffer.cxx:916</a></div></div>
<div class="ttc" id="classTHttpServer_html_aaff10a82928b53bd56a3aa8776b90640"><div class="ttname"><a href="classTHttpServer.html#aaff10a82928b53bd56a3aa8776b90640">THttpServer::VerifyFilePath</a></div><div class="ttdeci">static Bool_t VerifyFilePath(const char *fname)</div><div class="ttdoc">Checked that filename does not contains relative path below current directory Used to prevent access ...</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00480">THttpServer.cxx:480</a></div></div>
<div class="ttc" id="classTHttpServer_html_aaeb89c6e2e4eddd3b883fbd091ebaf6b"><div class="ttname"><a href="classTHttpServer.html#aaeb89c6e2e4eddd3b883fbd091ebaf6b">THttpServer::fDefaultPageCont</a></div><div class="ttdeci">std::string fDefaultPageCont</div><div class="ttdoc">! content of default html page </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00049">THttpServer.h:49</a></div></div>
<div class="ttc" id="classTSystem_html_a269568802a00016471ede4ed5dc52048"><div class="ttname"><a href="classTSystem.html#a269568802a00016471ede4ed5dc52048">TSystem::ExpandPathName</a></div><div class="ttdeci">virtual Bool_t ExpandPathName(TString &amp;path)</div><div class="ttdoc">Expand a pathname getting rid of special shell characters like ~. </div><div class="ttdef"><b>Definition:</b> <a href="TSystem_8cxx_source.html#l01256">TSystem.cxx:1256</a></div></div>
<div class="ttc" id="classTUrl_html_a866c920256a9f014f3a9e49344132517"><div class="ttname"><a href="classTUrl.html#a866c920256a9f014f3a9e49344132517">TUrl::GetIntValueFromOptions</a></div><div class="ttdeci">Int_t GetIntValueFromOptions(const char *key) const</div><div class="ttdoc">Return a value for a given key from the URL options as an Int_t, a missing key returns -1...</div><div class="ttdef"><b>Definition:</b> <a href="TUrl_8cxx_source.html#l00658">TUrl.cxx:658</a></div></div>
<div class="ttc" id="classTHttpServer_html_a03a997f0f0b770a21a5b2368239e462c"><div class="ttname"><a href="classTHttpServer.html#a03a997f0f0b770a21a5b2368239e462c">THttpServer::fJSROOT</a></div><div class="ttdeci">TString fJSROOT</div><div class="ttdoc">! location of external JSROOT files </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00044">THttpServer.h:44</a></div></div>
<div class="ttc" id="classTObject_html_a1d6abd2708ecd7578d7ff03c07037bd1"><div class="ttname"><a href="classTObject.html#a1d6abd2708ecd7578d7ff03c07037bd1">TObject::GetName</a></div><div class="ttdeci">virtual const char * GetName() const</div><div class="ttdoc">Returns name of object. </div><div class="ttdef"><b>Definition:</b> <a href="TObject_8cxx_source.html#l00357">TObject.cxx:357</a></div></div>
<div class="ttc" id="classTRootSniffer_html_a1e278992307ecb97e969a49af994a13d"><div class="ttname"><a href="classTRootSniffer.html#a1e278992307ecb97e969a49af994a13d">TRootSniffer::SetCurrentCallArg</a></div><div class="ttdeci">void SetCurrentCallArg(THttpCallArg *arg)</div><div class="ttdoc">set current http arguments, which then used in different process methods For instance, if user authorized with some user name, depending from restrictions some objects will be invisible or user get full access to the element </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l00443">TRootSniffer.cxx:443</a></div></div>
<div class="ttc" id="classTEnv_html_a1311d2dfe5c00b40e9f4a4fdf046f0e3"><div class="ttname"><a href="classTEnv.html#a1311d2dfe5c00b40e9f4a4fdf046f0e3">TEnv::GetValue</a></div><div class="ttdeci">virtual Int_t GetValue(const char *name, Int_t dflt) const</div><div class="ttdoc">Returns the integer value for a resource. </div><div class="ttdef"><b>Definition:</b> <a href="TEnv_8cxx_source.html#l00491">TEnv.cxx:491</a></div></div>
<div class="ttc" id="RtypesCore_8h_html_af2f51d30ccd86e85be3e3e69793a86ef"><div class="ttname"><a href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a></div><div class="ttdeci">const Bool_t kTRUE</div><div class="ttdef"><b>Definition:</b> <a href="RtypesCore_8h_source.html#l00087">RtypesCore.h:87</a></div></div>
<div class="ttc" id="classTRootSniffer_html_aa0dcd6a36b187dfcb04f7a25c32c1c1e"><div class="ttname"><a href="classTRootSniffer.html#aa0dcd6a36b187dfcb04f7a25c32c1c1e">TRootSniffer::SetScanGlobalDir</a></div><div class="ttdeci">void SetScanGlobalDir(Bool_t on=kTRUE)</div><div class="ttdoc">When enabled (default), sniffer scans gROOT for files, canvases, histograms. </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8h_source.html#l00201">TRootSniffer.h:201</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_a9c92161d2901d7a836fe23bd360ee9a0"><div class="ttname"><a href="classTHttpCallArg.html#a9c92161d2901d7a836fe23bd360ee9a0">THttpCallArg::AddNoCacheHeader</a></div><div class="ttdeci">void AddNoCacheHeader()</div><div class="ttdoc">Set CacheControl http header to disable browser caching. </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8cxx_source.html#l00332">THttpCallArg.cxx:332</a></div></div>
<div class="ttc" id="classTUrl_html_af55da20fe0841027f90c5edd6f543af8"><div class="ttname"><a href="classTUrl.html#af55da20fe0841027f90c5edd6f543af8">TUrl::HasOption</a></div><div class="ttdeci">Bool_t HasOption(const char *key) const</div><div class="ttdoc">Returns true if the given key appears in the URL options list. </div><div class="ttdef"><b>Definition:</b> <a href="TUrl_8cxx_source.html#l00669">TUrl.cxx:669</a></div></div>
<div class="ttc" id="classTHttpServer_html_a892722050c557fe6299c73910f6256c1"><div class="ttname"><a href="classTHttpServer.html#a892722050c557fe6299c73910f6256c1">THttpServer::GetSniffer</a></div><div class="ttdeci">TRootSniffer * GetSniffer() const</div><div class="ttdoc">returns pointer on objects sniffer </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00081">THttpServer.h:81</a></div></div>
<div class="ttc" id="legend1_8C_html_a16daaa7b596941b23915a1ac1be5b42c"><div class="ttname"><a href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a></div><div class="ttdeci">const Int_t n</div><div class="ttdef"><b>Definition:</b> <a href="legend1_8C_source.html#l00016">legend1.C:16</a></div></div>
<div class="ttc" id="TEnv_8h_html"><div class="ttname"><a href="TEnv_8h.html">TEnv.h</a></div></div>
<div class="ttc" id="classTHttpCallArg_html_ab43c4529a5442eec229ac9a84aebd423"><div class="ttname"><a href="classTHttpCallArg.html#ab43c4529a5442eec229ac9a84aebd423">THttpCallArg::fFileName</a></div><div class="ttdeci">TString fFileName</div><div class="ttdoc">! file name </div><div class="ttdef"><b>Definition:</b> <a href="THttpCallArg_8h_source.html#l00045">THttpCallArg.h:45</a></div></div>
<div class="ttc" id="classTHttpServer_html_ababa1e21458c194deeecee9aba49fce2"><div class="ttname"><a href="classTHttpServer.html#ababa1e21458c194deeecee9aba49fce2">THttpServer::SetItemField</a></div><div class="ttdeci">Bool_t SetItemField(const char *fullname, const char *name, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01180">THttpServer.cxx:1180</a></div></div>
<div class="ttc" id="classTRootSniffer_html_ad651e3d328be0c9ba883b3d177fda0d0"><div class="ttname"><a href="classTRootSniffer.html#ad651e3d328be0c9ba883b3d177fda0d0">TRootSniffer::GetItemField</a></div><div class="ttdeci">const char * GetItemField(TFolder *parent, TObject *item, const char *name)</div><div class="ttdoc">return field for specified item </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l01783">TRootSniffer.cxx:1783</a></div></div>
<div class="ttc" id="classTHttpServer_html_a2527ed258d4e3c69ecd8a5e8b1f6a4de"><div class="ttname"><a href="classTHttpServer.html#a2527ed258d4e3c69ecd8a5e8b1f6a4de">THttpServer::IsFileRequested</a></div><div class="ttdeci">Bool_t IsFileRequested(const char *uri, TString &amp;res) const</div><div class="ttdoc">Check if file is requested, thread safe. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00529">THttpServer.cxx:529</a></div></div>
<div class="ttc" id="classTHttpServer_html_aff3406fe2fa44f9f04310a0221271802"><div class="ttname"><a href="classTHttpServer.html#aff3406fe2fa44f9f04310a0221271802">THttpServer::Restrict</a></div><div class="ttdeci">void Restrict(const char *path, const char *options)</div><div class="ttdoc">Restrict access to specified object. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l01114">THttpServer.cxx:1114</a></div></div>
<div class="ttc" id="namespacexmlio_html_a7da9572bcb8815ae48bc1845efd235b5"><div class="ttname"><a href="namespacexmlio.html#a7da9572bcb8815ae48bc1845efd235b5">xmlio::cnt</a></div><div class="ttdeci">const char * cnt</div><div class="ttdef"><b>Definition:</b> <a href="TXMLSetup_8cxx_source.html#l00074">TXMLSetup.cxx:74</a></div></div>
<div class="ttc" id="classTObject_html_a75fddd7eef38a13c1374130ec7dc5cf8"><div class="ttname"><a href="classTObject.html#a75fddd7eef38a13c1374130ec7dc5cf8">TObject::Warning</a></div><div class="ttdeci">virtual void Warning(const char *method, const char *msgfmt,...) const</div><div class="ttdoc">Issue warning message. </div><div class="ttdef"><b>Definition:</b> <a href="TObject_8cxx_source.html#l00866">TObject.cxx:866</a></div></div>
<div class="ttc" id="classTString_html_a56664420fc73ace44af8f88b3b286d11"><div class="ttname"><a href="classTString.html#a56664420fc73ace44af8f88b3b286d11">TString::Resize</a></div><div class="ttdeci">void Resize(Ssiz_t n)</div><div class="ttdoc">Resize the string. Truncate or add blanks as necessary. </div><div class="ttdef"><b>Definition:</b> <a href="TString_8cxx_source.html#l01095">TString.cxx:1095</a></div></div>
<div class="ttc" id="classTHttpServer_html"><div class="ttname"><a href="classTHttpServer.html">THttpServer</a></div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8h_source.html#l00031">THttpServer.h:31</a></div></div>
<div class="ttc" id="classTRootSniffer_html_aab3bf29366f5bedc389e0db36816d82c"><div class="ttname"><a href="classTRootSniffer.html#aab3bf29366f5bedc389e0db36816d82c">TRootSniffer::FindTObjectInHierarchy</a></div><div class="ttdeci">TObject * FindTObjectInHierarchy(const char *path)</div><div class="ttdoc">Search element in hierarchy, derived from TObject. </div><div class="ttdef"><b>Definition:</b> <a href="TRootSniffer_8cxx_source.html#l01089">TRootSniffer.cxx:1089</a></div></div>
<div class="ttc" id="classTHttpServer_html_ac10a7c4ecb65fdf6eb32739772ca9c90"><div class="ttname"><a href="classTHttpServer.html#ac10a7c4ecb65fdf6eb32739772ca9c90">THttpServer::SetJSROOT</a></div><div class="ttdeci">void SetJSROOT(const char *location)</div><div class="ttdoc">Set location of JSROOT to use with the server One could specify address like: https://root.cern.ch/js/5.6.3/ http://jsroot.gsi.de/5.6.3/ This allows to get new JSROOT features with old server, reduce load on THttpServer instance, also startup time can be improved When empty string specified (default), local copy of JSROOT is used (distributed with ROOT) </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00298">THttpServer.cxx:298</a></div></div>
<div class="ttc" id="classTString_html_a7e4ada8bf2407b461f3ee58b71c5959f"><div class="ttname"><a href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">TString::Data</a></div><div class="ttdeci">const char * Data() const</div><div class="ttdef"><b>Definition:</b> <a href="TString_8h_source.html#l00364">TString.h:364</a></div></div>
<div class="ttc" id="classTHttpServer_html_a30c0d8ca26be5006b56b8b547d190a3b"><div class="ttname"><a href="classTHttpServer.html#a30c0d8ca26be5006b56b8b547d190a3b">THttpServer::RegisterWS</a></div><div class="ttdeci">void RegisterWS(std::shared_ptr&lt; THttpWSHandler &gt; ws)</div><div class="ttdoc">Register WS handler. </div><div class="ttdef"><b>Definition:</b> <a href="THttpServer_8cxx_source.html#l00996">THttpServer.cxx:996</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:09:34 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
