<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tutorials/graphics/polytest1.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_4d4ae6b6ff40e5dfc178b45a8ff01b0b.html">graphics</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">polytest1.C File Reference<div class="ingroups"><a class="el" href="group__Tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorial__graphics.html">Graphics tutorials</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p> <a href="http://nbviewer.jupyter.org/url/root.cern.ch/doc/master/notebooks/polytest1.C.nbconvert.ipynb" target="_blank"><img src= notebook.gif alt="View in nbviewer" style="height:1em" ></a> <a href="https://cern.ch/swanserver/cgi-bin/go?projurl=https://root.cern.ch/doc/master/notebooks/polytest1.C.nbconvert.ipynb" target="_blank"><img src="http://swanserver.web.cern.ch/swanserver/images/badge_swan_white_150.png"  alt="Open in SWAN" style="height:1em" ></a>  This macro is testing the "compacting" algorithm in <a class="el" href="classTPadPainter.html" title="Implement TVirtualPadPainter which abstracts painting operations. ">TPadPainter</a>. </p>
<p>It reduces the number of polygon's vertices using actual pixel coordinates.</p>
<div class="image">
<img src="pict1_polytest1.C.png" alt="pict1_polytest1.C.png" width="700"/>
</div>
<p>It's not really useful, but just to test that the resulting polygon is still reasonable. Initial number of points is 1000000, after "compression" it's 523904 (with default canvas size, before you tried to resize it) - so almost half of vertices were removed but you can still see the reasonable shape. If you resize a canvas to a smaller size, the number of vertices after compression can be something like 5000 and even less. It's easy to 'fool' this algorithm though in this particular case (ellipse is a kind of fringe case, you can easily have a sequence of almost unique vertices (at a pixel level).</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="comment">//Includes for ACLiC.</span></div><div class="line"><span class="preprocessor">#include &lt;cassert&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TRandom_8h.html">TRandom.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TCanvas_8h.html">TCanvas.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TError_8h.html">TError.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Rtypes_8h.html">Rtypes.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TNamed_8h.html">TNamed.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TMath_8h.html">TMath.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>PolyTest1 : <span class="keyword">public</span> <a class="code" href="classTNamed.html">TNamed</a>, <span class="keyword">public</span> <a class="code" href="classTAttLine.html">TAttLine</a>, <span class="keyword">public</span> <a class="code" href="classTAttFill.html">TAttFill</a> {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">   PolyTest1(<span class="keywordtype">unsigned</span> nVertices);</div><div class="line"></div><div class="line">   <span class="keywordtype">void</span> <a class="code" href="classTObject.html#adb30f2d116033afa49028b43e05a7d8e">Paint</a>(<span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#afc405399e08793afdff5b4692827b2a1">Option_t</a> *notUsed);</div><div class="line">   <span class="keywordtype">void</span> Reset(<span class="keywordtype">unsigned</span> nVertices);</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">   <span class="keyword">enum</span> {</div><div class="line">      kNPointsDefault = 10000<span class="comment">//minimal number of points.</span></div><div class="line">   };</div><div class="line"></div><div class="line">   std::vector&lt;Double_t&gt; fXs;</div><div class="line">   std::vector&lt;Double_t&gt; fYs;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">//_____________________________________________________________</span></div><div class="line">PolyTest1::PolyTest1(<span class="keywordtype">unsigned</span> nVertices)</div><div class="line">               : <a class="code" href="classTNamed.html">TNamed</a>(<span class="stringliteral">&quot;polygon_compression_test1&quot;</span>, <span class="stringliteral">&quot;polygon_compression_test1&quot;</span>)</div><div class="line">{</div><div class="line">   Reset(nVertices);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//_____________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> PolyTest1::Reset(<span class="keywordtype">unsigned</span> nVertices)</div><div class="line">{</div><div class="line">   <span class="comment">//Some canvas must already exist by this point.</span></div><div class="line">   assert(<a class="code" href="TVirtualPad_8h.html#a376b3a920d36f3366fb6a4c9e424aa8c">gPad</a> != 0 &amp;&amp; <span class="stringliteral">&quot;Reset, gPad is null&quot;</span>);</div><div class="line">   <span class="comment">//We need a gRandom to exist.</span></div><div class="line">   assert(<a class="code" href="TRandom_8h.html#a9ee275021031e1e27291bb36baa0e3e2">gRandom</a> != 0 &amp;&amp; <span class="stringliteral">&quot;Reset, gRandom is null&quot;</span>);</div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (nVertices &lt; kNPointsDefault) {</div><div class="line">      <a class="code" href="TError_8h.html#ada27a9a7b710bd062829ec0a12341e09">Warning</a>(<span class="stringliteral">&quot;Reset&quot;</span>, <span class="stringliteral">&quot;resetting nVertices parameter to %u&quot;</span>, <span class="keywordtype">unsigned</span>(kNPointsDefault));</div><div class="line">      nVertices = kNPointsDefault;</div><div class="line">   }</div><div class="line"></div><div class="line">   fXs.resize(nVertices);</div><div class="line">   fYs.resize(nVertices);</div><div class="line"></div><div class="line">   <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> xMin = 0., xMax = 0., yMin = 0., yMax = 0.;</div><div class="line">   <a class="code" href="TVirtualPad_8h.html#a376b3a920d36f3366fb6a4c9e424aa8c">gPad</a>-&gt;GetRange(xMin, yMin, xMax, yMax);</div><div class="line">   assert(xMax - xMin &gt; 0 &amp;&amp; yMax - yMin &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Reset, invalid canvas&#39; ranges&quot;</span>);</div><div class="line"></div><div class="line">   <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> xCentre = xMin + 0.5 * (xMax - xMin);</div><div class="line">   <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> yCentre = yMin + 0.5 * (yMax - yMin);</div><div class="line"></div><div class="line">   <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a> = <a class="code" href="namespaceTMath.html#aaae88f888b116f98b932ba4543fa00b5">TMath::Min</a>(xMax - xMin, yMax - yMin) * 0.8 / 2;</div><div class="line">   <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> angle = <a class="code" href="namespaceTMath.html#afa037a26bb8089dd0f1f65fe5583d308">TMath::TwoPi</a>() / (nVertices - 1);</div><div class="line"></div><div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; nVertices - 1; ++i) {</div><div class="line">      <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> currR = <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a> + <a class="code" href="TRandom_8h.html#a9ee275021031e1e27291bb36baa0e3e2">gRandom</a>-&gt;<a class="code" href="classTRandom.html#af504d4f838ab09eb48b7c252615563aa">Rndm</a>() * <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a> * 0.01;</div><div class="line">      fXs[i] = xCentre + currR * <a class="code" href="namespaceTMath.html#ab1f69ad10f560a26625fe5610ab321d2">TMath::Cos</a>(angle * i);</div><div class="line">      fYs[i] = yCentre + currR * <a class="code" href="namespaceTMath.html#acb6531465af378f4e6e4a8a62f8c6a4d">TMath::Sin</a>(angle * i);</div><div class="line">   }</div><div class="line"></div><div class="line">   fXs[nVertices - 1] = fXs[0];</div><div class="line">   fYs[nVertices - 1] = fYs[0];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//_____________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> PolyTest1::Paint(<span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#afc405399e08793afdff5b4692827b2a1">Option_t</a> * <span class="comment">/*notUsed*/</span>)</div><div class="line">{</div><div class="line">   assert(<a class="code" href="TVirtualPad_8h.html#a376b3a920d36f3366fb6a4c9e424aa8c">gPad</a> != 0 &amp;&amp; <span class="stringliteral">&quot;Paint, gPad is null&quot;</span>);</div><div class="line"></div><div class="line">   <a class="code" href="classTAttFill.html#a2a16d61ba8729c5948192e24c3e28c08">TAttFill::Modify</a>();</div><div class="line">   <a class="code" href="TVirtualPad_8h.html#a376b3a920d36f3366fb6a4c9e424aa8c">gPad</a>-&gt;PaintFillArea((<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)fXs.size(), &amp;fXs[0], &amp;fYs[0]);</div><div class="line"></div><div class="line">   <a class="code" href="classTAttLine.html#a9025ad4c491fdabac6d689576d56f226">TAttLine::Modify</a>();</div><div class="line">   <a class="code" href="TVirtualPad_8h.html#a376b3a920d36f3366fb6a4c9e424aa8c">gPad</a>-&gt;PaintPolyLine((<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>)fXs.size(), &amp;fXs[0], &amp;fYs[0]);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> polytest1()</div><div class="line">{</div><div class="line">   <a class="code" href="classTCanvas.html">TCanvas</a> * <span class="keyword">const</span> cnv = <span class="keyword">new</span> <a class="code" href="classTCanvas.html">TCanvas</a>;</div><div class="line">   cnv-&gt;<a class="code" href="classTCanvas.html#ad996aa7bc34186944363b48963de4de5">cd</a>();</div><div class="line"></div><div class="line">   PolyTest1 * polygon = <span class="keyword">new</span> PolyTest1(1000000);</div><div class="line">   polygon-&gt;SetLineColor(<a class="code" href="Rtypes_8h.html#ac31db05c6cb5891c704eae374f6926a8aab48c32302f7159d81e081c41dc2d3d2">kBlue</a>);</div><div class="line">   polygon-&gt;SetFillColor(<a class="code" href="Rtypes_8h.html#ac31db05c6cb5891c704eae374f6926a8a5a655b1a02e5b0311571ca57ce4f3900">kRed</a>);</div><div class="line">   polygon-&gt;SetLineWidth(1);</div><div class="line">   polygon-&gt;Draw();<span class="comment">//Attach a polygon to a canvas.</span></div><div class="line">}</div></div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Timur Pocheptsov </dd></dl>

<p class="definition">Definition in file <a class="el" href="polytest1_8C_source.html">polytest1.C</a>.</p>
</div></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:10:11 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
