<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tutorials/roofit/rf207_comptools.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_c1645e2e0f5b438aad2fc144aee2b7a4.html">roofit</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">rf207_comptools.C File Reference<div class="ingroups"><a class="el" href="group__Tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorial__roofit.html">RooFit Tutorials</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p> <a href="http://nbviewer.jupyter.org/url/root.cern.ch/doc/master/notebooks/rf207_comptools.C.nbconvert.ipynb" target="_blank"><img src= notebook.gif alt="View in nbviewer" style="height:1em" ></a> <a href="https://cern.ch/swanserver/cgi-bin/go?projurl=https://root.cern.ch/doc/master/notebooks/rf207_comptools.C.nbconvert.ipynb" target="_blank"><img src="http://swanserver.web.cern.ch/swanserver/images/badge_swan_white_150.png"  alt="Open in SWAN" style="height:1em" ></a>  Addition and convolution: tools and utilities for manipulation of composite objects </p>
<div class="fragment"><div class="line"></div><div class="line"></div><div class="line">[1mRooFit v3.60 -- Developed by Wouter Verkerke and David Kirkby[0m </div><div class="line">                Copyright (C) 2000-2013 NIKHEF, University of California &amp; Stanford University</div><div class="line">                All rights reserved, please read http://roofit.sourceforge.net/license.txt</div><div class="line"></div><div class="line">  1) 0x7ffcbe442928 RooRealVar:: x = 5  L(0 - 10)  &quot;x&quot;</div><div class="line">  1) 0x7ffcbe441938 RooRealVar::       a0 = 0.5  L(0 - 1)  &quot;a0&quot;</div><div class="line">  2) 0x7ffcbe441590 RooRealVar::       a1 = 0.2  L(0 - 1)  &quot;a1&quot;</div><div class="line">  3) 0x7ffcbe440c70 RooRealVar::    alpha = -1 C  L(-INF - +INF)  &quot;alpha&quot;</div><div class="line">  4) 0x7ffcbe440448 RooRealVar:: bkg1frac = 0.2  L(0 - 1)  &quot;fraction of component 1 in background&quot;</div><div class="line">  5) 0x7ffcbe43f980 RooRealVar::  bkgfrac = 0.5  L(0 - 1)  &quot;fraction of background&quot;</div><div class="line">  6) 0x7ffcbe442580 RooRealVar::     mean = 5 C  L(-INF - +INF)  &quot;mean of gaussians&quot;</div><div class="line">  7) 0x7ffcbe4421c8 RooRealVar::    sigma = 0.5 C  L(-INF - +INF)  &quot;width of gaussians&quot;</div><div class="line">RooArgSet::parameters = (a0,a1,alpha,bkg1frac,bkgfrac,mean,sigma)</div><div class="line">  1) 0x7ffcbe43f330 RooAddPdf:: model[ bkgfrac * bkg + [%] * sig ] = 0.582695  &quot;g1+g2+a&quot;</div><div class="line">  2) 0x7ffcbe43fdf8 RooAddPdf::   bkg[ bkg1frac * bkg1 + [%] * bkg2 ] = 0.16539  &quot;Signal&quot;</div><div class="line">  3) 0x7ffcbe4410e8 RooChebychev::  bkg1[ x=x coefficients=(a0,a1) ] = 0.8  &quot;Background 1&quot;</div><div class="line">  4) 0x7ffcbe4407f0 RooExponential::  bkg2[ x=x c=alpha ] = 0.00673795  &quot;Background 2&quot;</div><div class="line">  5) 0x7ffcbe441ce0 RooGaussian::   sig[ x=x mean=mean sigma=sigma ] = 1  &quot;Signal component 1&quot;</div><div class="line">[#1] INFO:ObjectHandling -- RooCustomizer::build(model): tree node sig will be replaced by sigsum</div><div class="line">[#1] INFO:ObjectHandling -- RooCustomizer::build(model) Branch node RooAddPdf::model cloned: depends on a replaced parameter</div><div class="line">[#1] INFO:ObjectHandling -- RooCustomizer::build(model) Branch node sig is already replaced</div><div class="line">0x2c44750 RooAddPdf::model_cust = 0.582695 [Auto,Dirty] </div><div class="line">  0x7ffcbe43fdf8/V- RooAddPdf::bkg = 0.16539 [Auto,Dirty] </div><div class="line">    0x7ffcbe4410e8/V- RooChebychev::bkg1 = 0.8 [Auto,Dirty] </div><div class="line">      0x7ffcbe442928/V- RooRealVar::x = 5</div><div class="line">      0x7ffcbe441938/V- RooRealVar::a0 = 0.5</div><div class="line">      0x7ffcbe441590/V- RooRealVar::a1 = 0.2</div><div class="line">    0x7ffcbe440448/V- RooRealVar::bkg1frac = 0.2</div><div class="line">    0x7ffcbe4407f0/V- RooExponential::bkg2 = 0.00673795 [Auto,Dirty] </div><div class="line">      0x7ffcbe442928/V- RooRealVar::x = 5</div><div class="line">      0x7ffcbe440c70/V- RooRealVar::alpha = -1</div><div class="line">  0x7ffcbe43f980/V- RooRealVar::bkgfrac = 0.5</div><div class="line">  0x7ffcbe43d960/V- RooAddPdf::sigsum = 1 [Auto,Dirty] </div><div class="line">    0x7ffcbe441ce0/V- RooGaussian::sig = 1 [Auto,Dirty] </div><div class="line">      0x7ffcbe442928/V- RooRealVar::x = 5</div><div class="line">      0x7ffcbe442580/V- RooRealVar::mean = 5</div><div class="line">      0x7ffcbe4421c8/V- RooRealVar::sigma = 0.5</div><div class="line">    0x7ffcbe43dfb0/V- RooRealVar::sig1frac = 0.8</div><div class="line">    0x7ffcbe43e358/V- RooGaussian::sig2 = 1 [Auto,Dirty] </div><div class="line">      0x7ffcbe442928/V- RooRealVar::x = 5</div><div class="line">      0x7ffcbe442580/V- RooRealVar::mean = 5</div><div class="line">      0x7ffcbe43e840/V- RooRealVar::sigma2 = 1</div></div><!-- fragment --> <div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="RooRealVar_8h.html">RooRealVar.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="RooDataSet_8h.html">RooDataSet.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="RooGaussian_8h.html">RooGaussian.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="RooChebychev_8h.html">RooChebychev.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="RooExponential_8h.html">RooExponential.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="RooAddPdf_8h.html">RooAddPdf.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="RooPlot_8h.html">RooPlot.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="RooCustomizer_8h.html">RooCustomizer.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TCanvas_8h.html">TCanvas.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TAxis_8h.html">TAxis.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TH1_8h.html">TH1.h</a>&quot;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceRooFit.html">RooFit</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> rf207_comptools()</div><div class="line">{</div><div class="line"></div><div class="line">   <span class="comment">// S e t u p   c o m p o s i t e    p d f,   d a t a s e t</span></div><div class="line">   <span class="comment">// --------------------------------------------------------</span></div><div class="line"></div><div class="line">   <span class="comment">// Declare observable x</span></div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>(<span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>, 0, 10);</div><div class="line"></div><div class="line">   <span class="comment">// Create two Gaussian PDFs g1(x,mean1,sigma) anf g2(x,mean2,sigma) and their parameters</span></div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> mean(<span class="stringliteral">&quot;mean&quot;</span>, <span class="stringliteral">&quot;mean of gaussians&quot;</span>, 5);</div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> <a class="code" href="h1analysisProxy_8h.html#a351c2b9335dfcbe83de6eb9629c2a0e3">sigma</a>(<span class="stringliteral">&quot;sigma&quot;</span>, <span class="stringliteral">&quot;width of gaussians&quot;</span>, 0.5);</div><div class="line">   <a class="code" href="classRooGaussian.html">RooGaussian</a> sig(<span class="stringliteral">&quot;sig&quot;</span>, <span class="stringliteral">&quot;Signal component 1&quot;</span>, <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>, mean, <a class="code" href="h1analysisProxy_8h.html#a351c2b9335dfcbe83de6eb9629c2a0e3">sigma</a>);</div><div class="line"></div><div class="line">   <span class="comment">// Build Chebychev polynomial p.d.f.</span></div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> a0(<span class="stringliteral">&quot;a0&quot;</span>, <span class="stringliteral">&quot;a0&quot;</span>, 0.5, 0., 1.);</div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> a1(<span class="stringliteral">&quot;a1&quot;</span>, <span class="stringliteral">&quot;a1&quot;</span>, 0.2, 0., 1.);</div><div class="line">   <a class="code" href="classRooChebychev.html">RooChebychev</a> bkg1(<span class="stringliteral">&quot;bkg1&quot;</span>, <span class="stringliteral">&quot;Background 1&quot;</span>, <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>, <a class="code" href="classRooArgSet.html">RooArgSet</a>(a0, a1));</div><div class="line"></div><div class="line">   <span class="comment">// Build exponential pdf</span></div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> alpha(<span class="stringliteral">&quot;alpha&quot;</span>, <span class="stringliteral">&quot;alpha&quot;</span>, -1);</div><div class="line">   <a class="code" href="classRooExponential.html">RooExponential</a> bkg2(<span class="stringliteral">&quot;bkg2&quot;</span>, <span class="stringliteral">&quot;Background 2&quot;</span>, <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>, alpha);</div><div class="line"></div><div class="line">   <span class="comment">// Sum the background components into a composite background p.d.f.</span></div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> bkg1frac(<span class="stringliteral">&quot;bkg1frac&quot;</span>, <span class="stringliteral">&quot;fraction of component 1 in background&quot;</span>, 0.2, 0., 1.);</div><div class="line">   <a class="code" href="classRooAddPdf.html">RooAddPdf</a> bkg(<span class="stringliteral">&quot;bkg&quot;</span>, <span class="stringliteral">&quot;Signal&quot;</span>, <a class="code" href="classRooArgList.html">RooArgList</a>(bkg1, bkg2), bkg1frac);</div><div class="line"></div><div class="line">   <span class="comment">// Sum the composite signal and background</span></div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> bkgfrac(<span class="stringliteral">&quot;bkgfrac&quot;</span>, <span class="stringliteral">&quot;fraction of background&quot;</span>, 0.5, 0., 1.);</div><div class="line">   <a class="code" href="classRooAddPdf.html">RooAddPdf</a> model(<span class="stringliteral">&quot;model&quot;</span>, <span class="stringliteral">&quot;g1+g2+a&quot;</span>, <a class="code" href="classRooArgList.html">RooArgList</a>(bkg, sig), bkgfrac);</div><div class="line"></div><div class="line">   <span class="comment">// Create dummy dataset that has more observables than the above pdf</span></div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> <a class="code" href="legend1_8C.html#a1380cd153a0fc78015dd604dbcb6c841">y</a>(<span class="stringliteral">&quot;y&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>, -10, 10);</div><div class="line">   <a class="code" href="classRooDataSet.html">RooDataSet</a> data(<span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;data&quot;</span>, <a class="code" href="classRooArgSet.html">RooArgSet</a>(<a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>, <a class="code" href="legend1_8C.html#a1380cd153a0fc78015dd604dbcb6c841">y</a>));</div><div class="line"></div><div class="line">   <span class="comment">// ---------------------------------------------------</span></div><div class="line">   <span class="comment">// B a s i c   i n f o r m a t i o n   r e q u e s t s</span></div><div class="line">   <span class="comment">// ===================================================</span></div><div class="line"></div><div class="line">   <span class="comment">// G e t   l i s t   o f   o b s e r v a b l e s</span></div><div class="line">   <span class="comment">// ---------------------------------------------</span></div><div class="line"></div><div class="line">   <span class="comment">// Get list of observables of pdf in context of a dataset</span></div><div class="line">   <span class="comment">//</span></div><div class="line">   <span class="comment">// Observables are define each context as the variables</span></div><div class="line">   <span class="comment">// shared between a model and a dataset. In this case</span></div><div class="line">   <span class="comment">// that is the variable &#39;x&#39;</span></div><div class="line"></div><div class="line">   <a class="code" href="classRooArgSet.html">RooArgSet</a> *model_obs = model.getObservables(data);</div><div class="line">   model_obs-&gt;<a class="code" href="classRooAbsCollection.html#ab988655a6fe646baa9c6a6b5456c3aa0">Print</a>(<span class="stringliteral">&quot;v&quot;</span>);</div><div class="line"></div><div class="line">   <span class="comment">// G e t   l i s t   o f   p a r a m e t e r s</span></div><div class="line">   <span class="comment">// -------------------------------------------</span></div><div class="line"></div><div class="line">   <span class="comment">// Get list of parameters, given list of observables</span></div><div class="line">   <a class="code" href="classRooArgSet.html">RooArgSet</a> *model_params = model.getParameters(<a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>);</div><div class="line">   model_params-&gt;<a class="code" href="classRooAbsCollection.html#ab988655a6fe646baa9c6a6b5456c3aa0">Print</a>(<span class="stringliteral">&quot;v&quot;</span>);</div><div class="line"></div><div class="line">   <span class="comment">// Get list of parameters, given a dataset</span></div><div class="line">   <span class="comment">// (Gives identical results to operation above)</span></div><div class="line">   <a class="code" href="classRooArgSet.html">RooArgSet</a> *model_params2 = model.getParameters(data);</div><div class="line">   model_params2-&gt;<a class="code" href="classRooAbsCollection.html#ab988655a6fe646baa9c6a6b5456c3aa0">Print</a>();</div><div class="line"></div><div class="line">   <span class="comment">// G e t   l i s t   o f   c o m p o n e n t s</span></div><div class="line">   <span class="comment">// -------------------------------------------</span></div><div class="line"></div><div class="line">   <span class="comment">// Get list of component objects, including top-level node</span></div><div class="line">   <a class="code" href="classRooArgSet.html">RooArgSet</a> *model_comps = model.getComponents();</div><div class="line">   model_comps-&gt;<a class="code" href="classRooAbsCollection.html#ab988655a6fe646baa9c6a6b5456c3aa0">Print</a>(<span class="stringliteral">&quot;v&quot;</span>);</div><div class="line"></div><div class="line">   <span class="comment">// -------------------------------------------------------------------------------</span></div><div class="line">   <span class="comment">// M o d i f i c a t i o n s   t o   s t r u c t u r e   o f   c o m p o s i t e s</span></div><div class="line">   <span class="comment">// ===============================================================================</span></div><div class="line"></div><div class="line">   <span class="comment">// Create a second Gaussian</span></div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> sigma2(<span class="stringliteral">&quot;sigma2&quot;</span>, <span class="stringliteral">&quot;width of gaussians&quot;</span>, 1);</div><div class="line">   <a class="code" href="classRooGaussian.html">RooGaussian</a> sig2(<span class="stringliteral">&quot;sig2&quot;</span>, <span class="stringliteral">&quot;Signal component 1&quot;</span>, <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>, mean, sigma2);</div><div class="line"></div><div class="line">   <span class="comment">// Create a sum of the original Gaussian plus the new second Gaussian</span></div><div class="line">   <a class="code" href="classRooRealVar.html">RooRealVar</a> sig1frac(<span class="stringliteral">&quot;sig1frac&quot;</span>, <span class="stringliteral">&quot;fraction of component 1 in signal&quot;</span>, 0.8, 0., 1.);</div><div class="line">   <a class="code" href="classRooAddPdf.html">RooAddPdf</a> sigsum(<span class="stringliteral">&quot;sigsum&quot;</span>, <span class="stringliteral">&quot;sig+sig2&quot;</span>, <a class="code" href="classRooArgList.html">RooArgList</a>(sig, sig2), sig1frac);</div><div class="line"></div><div class="line">   <span class="comment">// Construct a customizer utility to customize model</span></div><div class="line">   <a class="code" href="classRooCustomizer.html">RooCustomizer</a> cust(model, <span class="stringliteral">&quot;cust&quot;</span>);</div><div class="line"></div><div class="line">   <span class="comment">// Instruct the customizer to replace node &#39;sig&#39; with node &#39;sigsum&#39;</span></div><div class="line">   cust.replaceArg(sig, sigsum);</div><div class="line"></div><div class="line">   <span class="comment">// Build a clone of the input pdf according to the above customization</span></div><div class="line">   <span class="comment">// instructions. Each node that requires modified is clone so that the</span></div><div class="line">   <span class="comment">// original pdf remained untouched. The name of each cloned node is that</span></div><div class="line">   <span class="comment">// of the original node suffixed by the name of the customizer object</span></div><div class="line">   <span class="comment">//</span></div><div class="line">   <span class="comment">// The returned head node own all nodes that were cloned as part of</span></div><div class="line">   <span class="comment">// the build process so when cust_clone is deleted so will all other</span></div><div class="line">   <span class="comment">// nodes that were created in the process.</span></div><div class="line">   <a class="code" href="classRooAbsPdf.html">RooAbsPdf</a> *cust_clone = (<a class="code" href="classRooAbsPdf.html">RooAbsPdf</a> *)cust.build(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"></div><div class="line">   <span class="comment">// Print structure of clone of model with sig-&gt;sigsum replacement.</span></div><div class="line">   cust_clone-&gt;<a class="code" href="classRooAbsArg.html#a6b3b4deb1fe5d9cf935ca49a78426623">Print</a>(<span class="stringliteral">&quot;t&quot;</span>);</div><div class="line"></div><div class="line">   <span class="keyword">delete</span> cust_clone;</div><div class="line">}</div></div><!-- fragment --> <dl class="section author"><dt>Author</dt><dd>07/2008 - Wouter Verkerke </dd></dl>

<p class="definition">Definition in file <a class="el" href="rf207__comptools_8C_source.html">rf207_comptools.C</a>.</p>
</div></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:10:23 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
