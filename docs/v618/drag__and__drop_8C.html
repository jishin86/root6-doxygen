<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tutorials/gui/drag_and_drop.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_7987d0675949c681d18a0237cb27f089.html">gui</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">drag_and_drop.C File Reference<div class="ingroups"><a class="el" href="group__Tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorial__gui.html">GUI tutorials</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This tutorial illustrates how to use drag and drop within <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a>. </p>
<p>Select a list tree item with a mouse press, drag it (move the mouse while keeping the mouse button pressed) and release the mouse button in any pad inside the canvas or in the top list tree item ("Base"). When the button is released, the selected data is "dropped" at that location, displaying the object in the canvas or adding (copying) it in the list tree.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TROOT_8h.html">TROOT.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TApplication_8h.html">TApplication.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TSystem_8h.html">TSystem.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGFrame_8h.html">TGFrame.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGButton_8h.html">TGButton.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGLabel_8h.html">TGLabel.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGMenu_8h.html">TGMenu.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGFileDialog_8h.html">TGFileDialog.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TBrowser_8h.html">TBrowser.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TRootEmbeddedCanvas_8h.html">TRootEmbeddedCanvas.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TRootHelpDialog_8h.html">TRootHelpDialog.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TCanvas_8h.html">TCanvas.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TH1F_8h.html">TH1F.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TH2F_8h.html">TH2F.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TF2_8h.html">TF2.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGraph_8h.html">TGraph.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TImage_8h.html">TImage.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TRandom_8h.html">TRandom.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGMsgBox_8h.html">TGMsgBox.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGPicture_8h.html">TGPicture.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGListTree_8h.html">TGListTree.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TObjString_8h.html">TObjString.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TMessage_8h.html">TMessage.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TTimer_8h.html">TTimer.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TGDNDManager_8h.html">TGDNDManager.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> gHelpDND[] = <span class="stringliteral">&quot;\</span></div><div class="line"><span class="stringliteral">                     Drag &amp; Drop (DnD)\n\</span></div><div class="line"><span class="stringliteral">Drag and Drop support is implemented on Linux via Xdnd, the\n\</span></div><div class="line"><span class="stringliteral">drag and drop protocol for X window system, and on Windows\n\</span></div><div class="line"><span class="stringliteral">via the Clipboard.\n\</span></div><div class="line"><span class="stringliteral">Users can selects something in ROOT with a mouse press, drags\n\</span></div><div class="line"><span class="stringliteral">it (moves the mouse while keeping the mouse button pressed) and\n\</span></div><div class="line"><span class="stringliteral">releases the mouse button somewhere else. When the button is\n\</span></div><div class="line"><span class="stringliteral">released the selected data is \&quot;dropped\&quot; at that location. This\n\</span></div><div class="line"><span class="stringliteral">way, a histogram from an opened ROOT file in the browser can be\n\</span></div><div class="line"><span class="stringliteral">dragged to any TCanvas. A script file from the browser can be\n\</span></div><div class="line"><span class="stringliteral">dropped to a TGTextView or TGTextEdit widget in TGTextEditor.\n\</span></div><div class="line"><span class="stringliteral">On Linux, it is possible to drag objects between ROOT and an\n\</span></div><div class="line"><span class="stringliteral">external application. For example to drag a macro file from the\n\</span></div><div class="line"><span class="stringliteral">ROOT browser to the Kate editor. On Windows, drag and drop works\n\</span></div><div class="line"><span class="stringliteral">only within a single ROOT application, but it is possible to drag\n\</span></div><div class="line"><span class="stringliteral">from the Windows Explorer to ROOT (e.g. a picture file to a canvas\n\</span></div><div class="line"><span class="stringliteral">or a text file to a text editor).\n\</span></div><div class="line"><span class="stringliteral">&quot;</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> gReadyMsg[] = <span class="stringliteral">&quot;Ready. You can drag list tree items to any \</span></div><div class="line"><span class="stringliteral">pad in the canvas, or to the \&quot;Base\&quot; folder of the list tree itself...&quot;</span>;</div><div class="line"></div><div class="line"><span class="comment">//----------------------------------------------------------------------</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>DNDMainFrame : <span class="keyword">public</span> <a class="code" href="classTGMainFrame.html">TGMainFrame</a> {</div><div class="line"></div><div class="line"><span class="keyword">protected</span>:</div><div class="line">   <a class="code" href="classTRootEmbeddedCanvas.html">TRootEmbeddedCanvas</a>  *fEc;          <span class="comment">// embedded canvas</span></div><div class="line">   <a class="code" href="classTGTextButton.html">TGTextButton</a>         *fButtonExit;  <span class="comment">// &quot;Exit&quot; text button</span></div><div class="line">   <a class="code" href="classTGMenuBar.html">TGMenuBar</a>            *fMenuBar;     <span class="comment">// main menu bar</span></div><div class="line">   <a class="code" href="classTGPopupMenu.html">TGPopupMenu</a>          *fMenuFile;    <span class="comment">// &quot;File&quot; popup menu entry</span></div><div class="line">   <a class="code" href="classTGPopupMenu.html">TGPopupMenu</a>          *fMenuHelp;    <span class="comment">// &quot;Help&quot; popup menu entry</span></div><div class="line">   <a class="code" href="classTCanvas.html">TCanvas</a>              *fCanvas;      <span class="comment">// canvas</span></div><div class="line">   <a class="code" href="classTGListTree.html">TGListTree</a>           *fListTree;    <span class="comment">// left list tree</span></div><div class="line">   <a class="code" href="classTGListTreeItem.html">TGListTreeItem</a>       *fBaseLTI;     <span class="comment">// base (root) list tree item</span></div><div class="line">   <a class="code" href="classTGLabel.html">TGLabel</a>              *fStatus;      <span class="comment">// label used to display status</span></div><div class="line">   <a class="code" href="classTGraph.html">TGraph</a>               *fGraph;       <span class="comment">// TGraph object</span></div><div class="line">   <a class="code" href="classTH1F.html">TH1F</a>                 *fHist1D;      <span class="comment">// 1D histogram</span></div><div class="line">   <a class="code" href="classTH2F.html">TH2F</a>                 *fHist2D;      <span class="comment">// 2D histogram</span></div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line">   DNDMainFrame(<span class="keyword">const</span> <a class="code" href="classTGWindow.html">TGWindow</a> *p, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> <a class="code" href="RSha256_8hxx.html#acf9942d15f0dd0ac4fc5ca66096a3f6d">h</a>);</div><div class="line">   <span class="keyword">virtual</span> ~DNDMainFrame();</div><div class="line"></div><div class="line">   <span class="keywordtype">void</span>              DoCloseWindow();</div><div class="line">   <span class="keywordtype">void</span>              HandleMenu(<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>);</div><div class="line">   <a class="code" href="classTObject.html">TObject</a>          *GetObject(<span class="keyword">const</span> <span class="keywordtype">char</span> *obj);</div><div class="line">   <span class="keywordtype">void</span>              DataDropped(<a class="code" href="classTGListTreeItem.html">TGListTreeItem</a>* item, <a class="code" href="classTDNDData.html">TDNDData</a>* data);</div><div class="line">   <span class="keywordtype">void</span>              ResetStatus();</div><div class="line"></div><div class="line">   <span class="comment">//ClassDef(DNDMainFrame, 0); // Mainframe for Drag and Drop demo</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">enum</span> <a class="code" href="TGHtmlBrowser_8cxx.html#a850dc035c5c92c5bf9cf4003bf9fc872">EMyMessageTypes</a> {</div><div class="line">   M_FILE_OPEN,</div><div class="line">   M_FILE_BROWSE,</div><div class="line">   M_FILE_NEWCANVAS,</div><div class="line">   M_FILE_CLOSEWIN,</div><div class="line">   M_FILE_EXIT,</div><div class="line">   M_HELP_ABOUT</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *dnd_types[] = {</div><div class="line">   <span class="stringliteral">&quot;ROOT files&quot;</span>,    <span class="stringliteral">&quot;*.root&quot;</span>,</div><div class="line">   <span class="stringliteral">&quot;ROOT macros&quot;</span>,   <span class="stringliteral">&quot;*.C&quot;</span>,</div><div class="line">   <span class="stringliteral">&quot;All files&quot;</span>,     <span class="stringliteral">&quot;*&quot;</span>,</div><div class="line">    0,               0</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="GuiTypes_8h.html#a9c4792dda1f82506d6975bfb01058696">Atom_t</a> gRootObj  = <a class="code" href="GuiTypes_8h.html#a9fda1f399eed0dff5032dbfdb697d570">kNone</a>;</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line">DNDMainFrame::DNDMainFrame(<span class="keyword">const</span> <a class="code" href="classTGWindow.html">TGWindow</a> *p, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> <a class="code" href="RSha256_8hxx.html#acf9942d15f0dd0ac4fc5ca66096a3f6d">h</a>) :</div><div class="line">   <a class="code" href="classTGMainFrame.html">TGMainFrame</a>(p, w, <a class="code" href="RSha256_8hxx.html#acf9942d15f0dd0ac4fc5ca66096a3f6d">h</a>), fGraph(0), fHist1D(0), fHist2D(0)</div><div class="line"></div><div class="line">{</div><div class="line">   <span class="comment">// Constructor.</span></div><div class="line"></div><div class="line">   SetCleanup(<a class="code" href="TGFrame_8h.html#a344beaec9e0bcc5d5270b1785afe2853af8c760765936bc5a91472342e866b541">kDeepCleanup</a>);</div><div class="line">   <span class="keyword">const</span> <a class="code" href="classTGPicture.html">TGPicture</a> *pic = 0;</div><div class="line">   <a class="code" href="classTGListTreeItem.html">TGListTreeItem</a> *item;</div><div class="line">   fMenuBar = <span class="keyword">new</span> <a class="code" href="classTGMenuBar.html">TGMenuBar</a>(<span class="keyword">this</span>, 35, 50, <a class="code" href="TGFrame_8h.html#a99b66aa30a2ba379aaced882a9192826a6f754f07c9c9bf09f6b8fa9a7f94b53c">kHorizontalFrame</a>);</div><div class="line"></div><div class="line">   fMenuFile = <span class="keyword">new</span> <a class="code" href="classTGPopupMenu.html">TGPopupMenu</a>(<a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetRoot());</div><div class="line">   fMenuFile-&gt;<a class="code" href="classTGPopupMenu.html#a3fb4411280872add8d02e9f35aa24002">AddEntry</a>(<span class="stringliteral">&quot; &amp;Open...\tCtrl+O&quot;</span>, M_FILE_OPEN, 0,</div><div class="line">                       <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;bld_open.png&quot;</span>));</div><div class="line">   fMenuFile-&gt;AddEntry(<span class="stringliteral">&quot; &amp;Browse...\tCtrl+B&quot;</span>, M_FILE_BROWSE);</div><div class="line">   fMenuFile-&gt;AddEntry(<span class="stringliteral">&quot; &amp;New Canvas\tCtrl+N&quot;</span>, M_FILE_NEWCANVAS);</div><div class="line">   fMenuFile-&gt;AddEntry(<span class="stringliteral">&quot; &amp;Close Window\tCtrl+W&quot;</span>, M_FILE_CLOSEWIN);</div><div class="line">   fMenuFile-&gt;AddSeparator();</div><div class="line">   fMenuFile-&gt;AddEntry(<span class="stringliteral">&quot; E&amp;xit\tCtrl+Q&quot;</span>, M_FILE_EXIT, 0,</div><div class="line">                       <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;bld_exit.png&quot;</span>));</div><div class="line">   fMenuFile-&gt;Connect(<span class="stringliteral">&quot;Activated(Int_t)&quot;</span>, <span class="stringliteral">&quot;DNDMainFrame&quot;</span>, <span class="keyword">this</span>,</div><div class="line">                      <span class="stringliteral">&quot;HandleMenu(Int_t)&quot;</span>);</div><div class="line"></div><div class="line">   fMenuHelp = <span class="keyword">new</span> <a class="code" href="classTGPopupMenu.html">TGPopupMenu</a>(<a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetRoot());</div><div class="line">   fMenuHelp-&gt;<a class="code" href="classTGPopupMenu.html#a3fb4411280872add8d02e9f35aa24002">AddEntry</a>(<span class="stringliteral">&quot; &amp;About...&quot;</span>, M_HELP_ABOUT, 0,</div><div class="line">                       <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;about.xpm&quot;</span>));</div><div class="line">   fMenuHelp-&gt;Connect(<span class="stringliteral">&quot;Activated(Int_t)&quot;</span>, <span class="stringliteral">&quot;DNDMainFrame&quot;</span>, <span class="keyword">this</span>,</div><div class="line">                      <span class="stringliteral">&quot;HandleMenu(Int_t)&quot;</span>);</div><div class="line"></div><div class="line">   fMenuBar-&gt;AddPopup(<span class="stringliteral">&quot;&amp;File&quot;</span>, fMenuFile, <span class="keyword">new</span> <a class="code" href="classTGLayoutHints.html">TGLayoutHints</a>(<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fad1ab704bf0f07d48d870634cc1f32a84">kLHintsTop</a>|<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fa5995288bb11aaebf13e350c9e02c9348">kLHintsLeft</a>,</div><div class="line">                                                            0, 4, 0, 0));</div><div class="line"></div><div class="line">   fMenuBar-&gt;AddPopup(<span class="stringliteral">&quot;&amp;Help&quot;</span>, fMenuHelp, <span class="keyword">new</span> <a class="code" href="classTGLayoutHints.html">TGLayoutHints</a>(<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fad1ab704bf0f07d48d870634cc1f32a84">kLHintsTop</a>|<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fa4815a83af359fa9d85a27acf604a7861">kLHintsRight</a>));</div><div class="line"></div><div class="line">   AddFrame(fMenuBar, <span class="keyword">new</span> <a class="code" href="classTGLayoutHints.html">TGLayoutHints</a>(<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fad1ab704bf0f07d48d870634cc1f32a84">kLHintsTop</a> | <a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fafc54843f5e44b17d6c6ef5793fc18975">kLHintsExpandX</a>, 2, 2, 2, 5));</div><div class="line"></div><div class="line">   <a class="code" href="classTGHorizontalFrame.html">TGHorizontalFrame</a> *hfrm = <span class="keyword">new</span> <a class="code" href="classTGHorizontalFrame.html">TGHorizontalFrame</a>(<span class="keyword">this</span>, 10, 10);</div><div class="line">   <a class="code" href="classTGCanvas.html">TGCanvas</a> *canvas = <span class="keyword">new</span> <a class="code" href="classTGCanvas.html">TGCanvas</a>(hfrm, 150, 100);</div><div class="line">   fListTree = <span class="keyword">new</span> <a class="code" href="classTGListTree.html">TGListTree</a>(canvas, <a class="code" href="TGFrame_8h.html#a99b66aa30a2ba379aaced882a9192826a6f754f07c9c9bf09f6b8fa9a7f94b53c">kHorizontalFrame</a>);</div><div class="line">   fListTree-&gt;Associate(<span class="keyword">this</span>);</div><div class="line">   fEc = <span class="keyword">new</span> <a class="code" href="classTRootEmbeddedCanvas.html">TRootEmbeddedCanvas</a>(<span class="stringliteral">&quot;glec&quot;</span>, hfrm, 550, 350);</div><div class="line">   hfrm-&gt;<a class="code" href="classTGCompositeFrame.html#a51eed63e70fec280659423581cfb4f82">AddFrame</a>(canvas, <span class="keyword">new</span> <a class="code" href="classTGLayoutHints.html">TGLayoutHints</a>(<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fa5995288bb11aaebf13e350c9e02c9348">kLHintsLeft</a> | <a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fa4851e5eadb3704abba075126dd5eb911">kLHintsExpandY</a>, 5, 5));</div><div class="line">   hfrm-&gt;<a class="code" href="classTGCompositeFrame.html#a51eed63e70fec280659423581cfb4f82">AddFrame</a>(fEc, <span class="keyword">new</span> <a class="code" href="classTGLayoutHints.html">TGLayoutHints</a>(<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fafc54843f5e44b17d6c6ef5793fc18975">kLHintsExpandX</a> | <a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fa4851e5eadb3704abba075126dd5eb911">kLHintsExpandY</a>));</div><div class="line">   AddFrame(hfrm, <span class="keyword">new</span> <a class="code" href="classTGLayoutHints.html">TGLayoutHints</a>(<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fafc54843f5e44b17d6c6ef5793fc18975">kLHintsExpandX</a> | <a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fa4851e5eadb3704abba075126dd5eb911">kLHintsExpandY</a>));</div><div class="line">   fEc-&gt;<a class="code" href="classTGFrame.html#ad4fa44b5f865acb99f9838587df39f17">SetDNDTarget</a>(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line">   fCanvas = fEc-&gt;<a class="code" href="classTRootEmbeddedCanvas.html#a8ed268b60e03e3bf2f9134a7e4fdc3b1">GetCanvas</a>();</div><div class="line">   fCanvas-&gt;<a class="code" href="classTPad.html#a064b8ae1d12a9be393c0e22c5958cc7c">Divide</a>(3, 2);</div><div class="line">   fCanvas-&gt;SetBorderMode(0);</div><div class="line">   fBaseLTI = fListTree-&gt;AddItem(0, <span class="stringliteral">&quot;Base&quot;</span>);</div><div class="line"></div><div class="line">   <a class="code" href="classTGHorizontalFrame.html">TGHorizontalFrame</a> *hf = <span class="keyword">new</span> <a class="code" href="classTGHorizontalFrame.html">TGHorizontalFrame</a>(<span class="keyword">this</span>, 10, 10);</div><div class="line"></div><div class="line">   fStatus = <span class="keyword">new</span> <a class="code" href="classTGLabel.html">TGLabel</a>(hf, <span class="keyword">new</span> <a class="code" href="classTGHotString.html">TGHotString</a>(gReadyMsg));</div><div class="line">   fStatus-&gt;SetTextJustify(<a class="code" href="TGWidget_8h.html#a272fe59a2892f2299668c9db69ad568ba6bbb692c729bd703e93a596731277d1f">kTextLeft</a>);</div><div class="line">   fStatus-&gt;SetTextColor(0x0000ff);</div><div class="line">   hf-&gt;<a class="code" href="classTGCompositeFrame.html#a51eed63e70fec280659423581cfb4f82">AddFrame</a>(fStatus, <span class="keyword">new</span> <a class="code" href="classTGLayoutHints.html">TGLayoutHints</a>(<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fafc54843f5e44b17d6c6ef5793fc18975">kLHintsExpandX</a> | <a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fa95fa915f07d079c69bab1c2447dc73b9">kLHintsCenterY</a>,</div><div class="line">                10, 10, 10, 10));</div><div class="line"></div><div class="line">   fButtonExit = <span class="keyword">new</span> <a class="code" href="classTGTextButton.html">TGTextButton</a>(hf, <span class="stringliteral">&quot;        &amp;Exit...        &quot;</span>, 3);</div><div class="line">   fButtonExit-&gt;Resize(fButtonExit-&gt;GetDefaultSize());</div><div class="line">   fButtonExit-&gt;SetToolTipText(<span class="stringliteral">&quot;Exit Application (ROOT)&quot;</span>);</div><div class="line">   fButtonExit-&gt;Connect(<span class="stringliteral">&quot;Clicked()&quot;</span> , <span class="stringliteral">&quot;TApplication&quot;</span>, <a class="code" href="TApplication_8h.html#a31301dc3addd8971e410c605ff3ade4c">gApplication</a>,</div><div class="line">                        <span class="stringliteral">&quot;Terminate()&quot;</span>);</div><div class="line">   hf-&gt;<a class="code" href="classTGCompositeFrame.html#a51eed63e70fec280659423581cfb4f82">AddFrame</a>(fButtonExit, <span class="keyword">new</span> <a class="code" href="classTGLayoutHints.html">TGLayoutHints</a>(<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fa95fa915f07d079c69bab1c2447dc73b9">kLHintsCenterY</a> | <a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fa4815a83af359fa9d85a27acf604a7861">kLHintsRight</a>,</div><div class="line">                                               10, 10, 10, 10));</div><div class="line"></div><div class="line">   AddFrame(hf, <span class="keyword">new</span> <a class="code" href="classTGLayoutHints.html">TGLayoutHints</a>(<a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fad1ab704bf0f07d48d870634cc1f32a84">kLHintsTop</a> | <a class="code" href="TGLayout_8h.html#af0c3b99af534520bf279ab7b9d6b433fafc54843f5e44b17d6c6ef5793fc18975">kLHintsExpandX</a>, 5, 5, 5, 5));</div><div class="line"></div><div class="line">   gRootObj  = <a class="code" href="TVirtualX_8h.html#a155799d0c7acd9d1dfa2f31b6ceb5a4e">gVirtualX</a>-&gt;InternAtom(<span class="stringliteral">&quot;application/root&quot;</span>, <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>);</div><div class="line"></div><div class="line">   <a class="code" href="classTGraph.html">TGraph</a> *<a class="code" href="legend1_8C.html#a81e8067fc8f8d5a6217c06912ca906a0">gr</a> = (<a class="code" href="classTGraph.html">TGraph</a> *)GetObject(<span class="stringliteral">&quot;Graph&quot;</span>);</div><div class="line">   pic = <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;f1_t.xpm&quot;</span>);</div><div class="line">   item = fListTree-&gt;AddItem(fBaseLTI, <a class="code" href="legend1_8C.html#a81e8067fc8f8d5a6217c06912ca906a0">gr</a>-&gt;<a class="code" href="classTNamed.html#a42e3142d30b08fed1b07216d4a36b090">GetName</a>(), <a class="code" href="legend1_8C.html#a81e8067fc8f8d5a6217c06912ca906a0">gr</a>, pic, pic);</div><div class="line">   fListTree-&gt;SetToolTipItem(item, <span class="stringliteral">&quot;Simple Graph&quot;</span>);</div><div class="line">   item-&gt;<a class="code" href="classTGListTreeItem.html#aa3e3ffc3a2152f5c03e13f098f231a98">SetDNDSource</a>(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"></div><div class="line">   <a class="code" href="classTH1F.html">TH1F</a> *hpx = (<a class="code" href="classTH1F.html">TH1F</a> *)GetObject(<span class="stringliteral">&quot;1D Hist&quot;</span>);</div><div class="line">   pic = <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;h1_t.xpm&quot;</span>);</div><div class="line">   item = fListTree-&gt;AddItem(fBaseLTI, hpx-&gt;<a class="code" href="classTNamed.html#a42e3142d30b08fed1b07216d4a36b090">GetName</a>(), hpx, pic, pic);</div><div class="line">   fListTree-&gt;SetToolTipItem(item, <span class="stringliteral">&quot;1D Histogram&quot;</span>);</div><div class="line">   item-&gt;<a class="code" href="classTGListTreeItem.html#aa3e3ffc3a2152f5c03e13f098f231a98">SetDNDSource</a>(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"></div><div class="line">   <a class="code" href="classTH2F.html">TH2F</a> *h2 = (<a class="code" href="classTH2F.html">TH2F</a> *)GetObject(<span class="stringliteral">&quot;2D Hist&quot;</span>);</div><div class="line">   pic = <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;h2_t.xpm&quot;</span>);</div><div class="line">   item = fListTree-&gt;AddItem(fBaseLTI, h2-&gt;<a class="code" href="classTNamed.html#a42e3142d30b08fed1b07216d4a36b090">GetName</a>(), h2, pic, pic);</div><div class="line">   fListTree-&gt;SetToolTipItem(item, <span class="stringliteral">&quot;2D Histogram&quot;</span>);</div><div class="line">   item-&gt;<a class="code" href="classTGListTreeItem.html#aa3e3ffc3a2152f5c03e13f098f231a98">SetDNDSource</a>(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"></div><div class="line">   <a class="code" href="classTString.html">TString</a> rootsys(<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a8e22dfd65a6fecd7dd57200eaff20c18">UnixPathName</a>(<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a4ae57a039e0d61296c386e89d6e4dce8">Getenv</a>(<span class="stringliteral">&quot;ROOTSYS&quot;</span>)));</div><div class="line"><span class="preprocessor">#ifdef G__WIN32</span></div><div class="line">   <span class="comment">// remove the drive letter (e.g. &quot;C:/&quot;) from $ROOTSYS, if any</span></div><div class="line">   <span class="keywordflow">if</span> (rootsys[1] == <span class="charliteral">&#39;:&#39;</span> &amp;&amp; rootsys[2] == <span class="charliteral">&#39;/&#39;</span>)</div><div class="line">      rootsys.Remove(0, 3);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">   <a class="code" href="classTString.html">TString</a> link = <a class="code" href="classTString.html#ac34bbb89627e20624a416dfbb7a3db70">TString::Format</a>(<span class="stringliteral">&quot;/%s/tutorials/image/rose512.jpg&quot;</span>,</div><div class="line">                                  rootsys.Data());</div><div class="line">   <span class="keywordflow">if</span> (!<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(link.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), <a class="code" href="TSystem_8h.html#a5ea512734402935ca6e68723f6398862a55bd40b14de9b4c0e5d0a5b5ad6fb537">kReadPermission</a>)) {</div><div class="line">      <a class="code" href="classTImage.html">TImage</a> *img = <a class="code" href="classTImage.html#a1ed3afd90c932ce42025dea9b0bcb6c2">TImage::Open</a>(link.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="keywordflow">if</span> (img) {</div><div class="line">         <span class="comment">// create a 16x16 icon from the original picture</span></div><div class="line">         img-&gt;<a class="code" href="classTImage.html#aa2763f5458fd0ded6f48142aeb74dda2">Scale</a>(16, 16);</div><div class="line">         pic = <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicturePool()-&gt;GetPicture(<span class="stringliteral">&quot;rose512&quot;</span>, img-&gt;<a class="code" href="classTImage.html#abd283c0b8e4f72a50131bb7d7a63905c">GetPixmap</a>(),</div><div class="line">                                                     img-&gt;<a class="code" href="classTImage.html#afbace3f57aefb1f052a97052113f1c72">GetMask</a>());</div><div class="line">         <span class="keyword">delete</span> img;</div><div class="line">      }</div><div class="line">      <span class="keywordflow">else</span> pic = <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;psp_t.xpm&quot;</span>);</div><div class="line">      link.<a class="code" href="classTString.html#a7caeef0bf52ae835712ff21cd26f4ec4">Prepend</a>(<span class="stringliteral">&quot;file://&quot;</span>);</div><div class="line">      <a class="code" href="classTObjString.html">TObjString</a> *ostr = <span class="keyword">new</span> <a class="code" href="classTObjString.html">TObjString</a>(link.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      item = fListTree-&gt;AddItem(fBaseLTI, <span class="stringliteral">&quot;Rose&quot;</span>, ostr, pic, pic);</div><div class="line">      fListTree-&gt;SetToolTipItem(item, link.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      item-&gt;SetDNDSource(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// open the base list tree item and allow to drop into it</span></div><div class="line">   fListTree-&gt;OpenItem(fBaseLTI);</div><div class="line">   fListTree-&gt;GetFirstItem()-&gt;SetDNDTarget(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line"></div><div class="line">   <span class="comment">// connect the DataDropped signal to be able to handle it</span></div><div class="line">   fListTree-&gt;Connect(<span class="stringliteral">&quot;DataDropped(TGListTreeItem*, TDNDData*)&quot;</span>, <span class="stringliteral">&quot;DNDMainFrame&quot;</span>,</div><div class="line">                      <span class="keyword">this</span>, <span class="stringliteral">&quot;DataDropped(TGListTreeItem*,TDNDData*)&quot;</span>);</div><div class="line"></div><div class="line">   SetWindowName(<span class="stringliteral">&quot;ROOT DND Demo Application&quot;</span>);</div><div class="line">   MapSubwindows();</div><div class="line">   Resize(GetDefaultSize());</div><div class="line">   Connect(<span class="stringliteral">&quot;CloseWindow()&quot;</span>, <span class="stringliteral">&quot;DNDMainFrame&quot;</span>, <span class="keyword">this</span>, <span class="stringliteral">&quot;DoCloseWindow()&quot;</span>);</div><div class="line">   DontCallClose(); <span class="comment">// to avoid double deletions.</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line">DNDMainFrame::~DNDMainFrame()</div><div class="line">{</div><div class="line">   <span class="comment">// Destructor. Doesnt&#39;t do much here.</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> DNDMainFrame::DoCloseWindow()</div><div class="line">{</div><div class="line">   <span class="comment">// Do some cleanup, disconnect signals and then really close the main window.</span></div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (fGraph) { <span class="keyword">delete</span> fGraph; fGraph = 0; }</div><div class="line">   <span class="keywordflow">if</span> (fHist1D) { <span class="keyword">delete</span> fHist1D; fHist1D = 0; }</div><div class="line">   <span class="keywordflow">if</span> (fHist2D) { <span class="keyword">delete</span> fHist2D; fHist2D = 0; }</div><div class="line">   fMenuFile-&gt;Disconnect(<span class="stringliteral">&quot;Activated(Int_t)&quot;</span>, <span class="keyword">this</span>, <span class="stringliteral">&quot;HandleMenu(Int_t)&quot;</span>);</div><div class="line">   fMenuHelp-&gt;Disconnect(<span class="stringliteral">&quot;Activated(Int_t)&quot;</span>, <span class="keyword">this</span>, <span class="stringliteral">&quot;HandleMenu(Int_t)&quot;</span>);</div><div class="line">   fButtonExit-&gt;Disconnect(<span class="stringliteral">&quot;Clicked()&quot;</span> , <span class="keyword">this</span>, <span class="stringliteral">&quot;CloseWindow()&quot;</span>);</div><div class="line">   fListTree-&gt;Disconnect(<span class="stringliteral">&quot;DataDropped(TGListTreeItem*, TDNDData*)&quot;</span>, <span class="keyword">this</span>,</div><div class="line">                         <span class="stringliteral">&quot;DataDropped(TGListTreeItem*,TDNDData*)&quot;</span>);</div><div class="line">   <span class="keyword">delete</span> fListTree;</div><div class="line">   CloseWindow();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> DNDMainFrame::DataDropped(<a class="code" href="classTGListTreeItem.html">TGListTreeItem</a> *, <a class="code" href="classTDNDData.html">TDNDData</a> *data)</div><div class="line">{</div><div class="line">   <span class="comment">// Handle the drop event in the TGListTree. This will just create a new</span></div><div class="line">   <span class="comment">// list tree item and copy the received data into it.</span></div><div class="line"></div><div class="line">   fStatus-&gt;SetTextColor(0xff0000);</div><div class="line">   fStatus-&gt;ChangeText(<span class="stringliteral">&quot;I received data!!!&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> (data) {</div><div class="line">      <span class="keyword">const</span> <a class="code" href="classTGPicture.html">TGPicture</a> *pic = 0;</div><div class="line">      <a class="code" href="classTGListTreeItem.html">TGListTreeItem</a> *itm = 0;</div><div class="line">      <span class="keywordtype">char</span> tmp[1000];</div><div class="line">      <span class="keywordflow">if</span> (data-&gt;<a class="code" href="classTDNDData.html#a3103b43f4eb9fea62e15fd32f877dbaf">fDataType</a> == gRootObj) {</div><div class="line">         <a class="code" href="classTBufferFile.html">TBufferFile</a> buf(<a class="code" href="classTBuffer.html#a6e5fb6c42ca12cfca379918ab5410edaaa911e4b071ba6deeef0ff72cb9066003">TBuffer::kRead</a>, data-&gt;<a class="code" href="classTDNDData.html#ac4a9f1c600bda06f14e0caf85181ce17">fDataLength</a>, (<span class="keywordtype">void</span> *)data-&gt;<a class="code" href="classTDNDData.html#acdc6e4a45f57746608369061159cf927">fData</a>);</div><div class="line">         buf.SetReadMode();</div><div class="line">         <a class="code" href="classTObject.html">TObject</a> *obj = (<a class="code" href="classTObject.html">TObject</a> *)buf.ReadObjectAny(<a class="code" href="Class_8C.html#adcfdef0a91f6e5dcab5b9c14cf964be5">TObject::Class</a>());</div><div class="line">         sprintf(tmp, <span class="stringliteral">&quot;Received DND data : Type = \&quot;%s\&quot;; Length = %d bytes;&quot;</span>,</div><div class="line">                 obj-&gt;<a class="code" href="classTObject.html#a6e803b851b177d9674603954ccf65e86">ClassName</a>(), data-&gt;<a class="code" href="classTDNDData.html#ac4a9f1c600bda06f14e0caf85181ce17">fDataLength</a>);</div><div class="line">         <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="classTObject.html#ab80cf94f9f66badac741633f944ae02a">InheritsFrom</a>(<span class="stringliteral">&quot;TGraph&quot;</span>))</div><div class="line">            pic = <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;f1_t.xpm&quot;</span>);</div><div class="line">         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="classTObject.html#ab80cf94f9f66badac741633f944ae02a">InheritsFrom</a>(<span class="stringliteral">&quot;TH2F&quot;</span>))</div><div class="line">            pic = <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;h2_t.xpm&quot;</span>);</div><div class="line">         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="classTObject.html#ab80cf94f9f66badac741633f944ae02a">InheritsFrom</a>(<span class="stringliteral">&quot;TH1F&quot;</span>))</div><div class="line">            pic = <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;h1_t.xpm&quot;</span>);</div><div class="line">         itm = fListTree-&gt;AddItem(fBaseLTI, obj-&gt;<a class="code" href="classTObject.html#a1d6abd2708ecd7578d7ff03c07037bd1">GetName</a>(), obj, pic, pic);</div><div class="line">         fListTree-&gt;SetToolTipItem(itm, obj-&gt;<a class="code" href="classTObject.html#a1d6abd2708ecd7578d7ff03c07037bd1">GetName</a>());</div><div class="line">      }</div><div class="line">      <span class="keywordflow">else</span> {</div><div class="line">         sprintf(tmp, <span class="stringliteral">&quot;Received DND data: \&quot;%s\&quot;&quot;</span>, (<span class="keywordtype">char</span> *)data-&gt;<a class="code" href="classTDNDData.html#acdc6e4a45f57746608369061159cf927">fData</a>);</div><div class="line">         <a class="code" href="classTObjString.html">TObjString</a> *ostr = <span class="keyword">new</span> <a class="code" href="classTObjString.html">TObjString</a>((<span class="keywordtype">char</span> *)data-&gt;<a class="code" href="classTDNDData.html#acdc6e4a45f57746608369061159cf927">fData</a>);</div><div class="line">         <a class="code" href="classTImage.html">TImage</a> *img1 = <a class="code" href="classTImage.html#a1ed3afd90c932ce42025dea9b0bcb6c2">TImage::Open</a>(<span class="stringliteral">&quot;doc_t.xpm&quot;</span>);</div><div class="line">         <a class="code" href="classTImage.html">TImage</a> *img2 = <a class="code" href="classTImage.html#a1ed3afd90c932ce42025dea9b0bcb6c2">TImage::Open</a>(<span class="stringliteral">&quot;slink_t.xpm&quot;</span>);</div><div class="line">         <span class="keywordflow">if</span> (img1 &amp;&amp; img2) {</div><div class="line">            img1-&gt;<a class="code" href="classTImage.html#ab72e83d4ca41b91fb437129f644f78e6">Merge</a>(img2);</div><div class="line">            pic = <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicturePool()-&gt;GetPicture(<span class="stringliteral">&quot;doc_lnk&quot;</span>, img1-&gt;<a class="code" href="classTImage.html#abd283c0b8e4f72a50131bb7d7a63905c">GetPixmap</a>(),</div><div class="line">                                                        img1-&gt;<a class="code" href="classTImage.html#afbace3f57aefb1f052a97052113f1c72">GetMask</a>());</div><div class="line">            <span class="keyword">delete</span> img2;</div><div class="line">            <span class="keyword">delete</span> img1;</div><div class="line">         }</div><div class="line">         <span class="keywordflow">else</span> pic = <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(<span class="stringliteral">&quot;doc_t.xpm&quot;</span>);</div><div class="line">         itm = fListTree-&gt;AddItem(fBaseLTI, <span class="stringliteral">&quot;Link...&quot;</span>, ostr, pic, pic);</div><div class="line">         fListTree-&gt;SetToolTipItem(itm, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)data-&gt;<a class="code" href="classTDNDData.html#acdc6e4a45f57746608369061159cf927">fData</a>);</div><div class="line">      }</div><div class="line">      <span class="keywordflow">if</span> (itm) itm-&gt;<a class="code" href="classTGListTreeItem.html#aa3e3ffc3a2152f5c03e13f098f231a98">SetDNDSource</a>(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line">      fStatus-&gt;ChangeText(tmp);</div><div class="line">   }</div><div class="line">   <a class="code" href="classTTimer.html#a5ab29a435585f75462292766c97f6d6c">TTimer::SingleShot</a>(3000, <span class="stringliteral">&quot;DNDMainFrame&quot;</span>, <span class="keyword">this</span>, <span class="stringliteral">&quot;ResetStatus()&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><a class="code" href="classTObject.html">TObject</a> *DNDMainFrame::GetObject(<span class="keyword">const</span> <span class="keywordtype">char</span> *obj)</div><div class="line">{</div><div class="line">   <span class="comment">// Return the object specified in argument. If the object doesn&#39;t exist yet,</span></div><div class="line">   <span class="comment">// it is firt created.</span></div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (!strcmp(obj, <span class="stringliteral">&quot;Graph&quot;</span>)) {</div><div class="line">      <span class="keywordflow">if</span> (fGraph == 0) {</div><div class="line">         <span class="keyword">const</span> <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> <a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a> = 20;</div><div class="line">         <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>[<a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>], <a class="code" href="legend1_8C.html#a1380cd153a0fc78015dd604dbcb6c841">y</a>[<a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>];</div><div class="line">         <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> i=0;i&lt;<a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>;i++) {</div><div class="line">           <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>[i] = i*0.1;</div><div class="line">           <a class="code" href="legend1_8C.html#a1380cd153a0fc78015dd604dbcb6c841">y</a>[i] = 10*<a class="code" href="TMath_8h.html#ad910bc71940a50c2a35d308c236013b6">sin</a>(<a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>[i]+0.2);</div><div class="line">         }</div><div class="line">         fGraph = <span class="keyword">new</span> <a class="code" href="classTGraph.html">TGraph</a>(<a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>, <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>, <a class="code" href="legend1_8C.html#a1380cd153a0fc78015dd604dbcb6c841">y</a>);</div><div class="line">      }</div><div class="line">      <span class="keywordflow">return</span> fGraph;</div><div class="line">   }</div><div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(obj, <span class="stringliteral">&quot;1D Hist&quot;</span>)) {</div><div class="line">      <span class="keywordflow">if</span> (fHist1D == 0) {</div><div class="line">         fHist1D = <span class="keyword">new</span> <a class="code" href="classTH1F.html">TH1F</a>(<span class="stringliteral">&quot;1D Hist&quot;</span>,<span class="stringliteral">&quot;This is the px distribution&quot;</span>,100,-4,4);</div><div class="line">         <a class="code" href="RtypesCore_8h.html#aeea98adf47c4604318761944f6780133">Float_t</a> px, py;</div><div class="line">         <span class="keywordflow">for</span> ( <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> i=0; i&lt;10000; i++) {</div><div class="line">            <a class="code" href="TRandom_8h.html#a9ee275021031e1e27291bb36baa0e3e2">gRandom</a>-&gt;<a class="code" href="classTRandom.html#a5e1a0f4354a0c4edad2e87961f28fea4">Rannor</a>(px, py);</div><div class="line">            fHist1D-&gt;Fill(px);</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="keywordflow">return</span> fHist1D;</div><div class="line">   }</div><div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(obj, <span class="stringliteral">&quot;2D Hist&quot;</span>)) {</div><div class="line">      <span class="keywordflow">if</span> (fHist2D == 0) {</div><div class="line">         <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> params[] = {</div><div class="line">            130,-1.4,1.8,1.5,1, 150,2,0.5,-2,0.5, 3600,-2,0.7,-3,0.3</div><div class="line">         };</div><div class="line">         <a class="code" href="classTF2.html">TF2</a> *f2 = <span class="keyword">new</span> <a class="code" href="classTF2.html">TF2</a>(<span class="stringliteral">&quot;f2&quot;</span>,<span class="stringliteral">&quot;xygaus + xygaus(5) + xylandau(10)&quot;</span>,</div><div class="line">                           -4, 4, -4, 4);</div><div class="line">         f2-&gt;<a class="code" href="classTF1.html#ad3b4503c22e70e5c219031d83e137905">SetParameters</a>(params);</div><div class="line">         fHist2D = <span class="keyword">new</span> <a class="code" href="classTH2F.html">TH2F</a>(<span class="stringliteral">&quot;2D Hist&quot;</span>,<span class="stringliteral">&quot;xygaus+xygaus(5)+xylandau(10)&quot;</span>,</div><div class="line">                            20, -4, 4, 20, -4, 4);</div><div class="line">         fHist2D-&gt;FillRandom(<span class="stringliteral">&quot;f2&quot;</span>,40000);</div><div class="line">      }</div><div class="line">      <span class="keywordflow">return</span> fHist2D;</div><div class="line">   }</div><div class="line">   <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> DNDMainFrame::HandleMenu(<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> menu_id)</div><div class="line">{</div><div class="line">   <span class="comment">// Handle menu events.</span></div><div class="line"></div><div class="line">   <a class="code" href="classTRootHelpDialog.html">TRootHelpDialog</a> *hd;</div><div class="line">   <span class="keyword">static</span> <a class="code" href="classTString.html">TString</a> dir(<span class="stringliteral">&quot;.&quot;</span>);</div><div class="line">   <a class="code" href="classTGFileInfo.html">TGFileInfo</a> fi;</div><div class="line">   fi.<a class="code" href="classTGFileInfo.html#a50e90b9ea9f079dbce633d82cf42bc63">fFileTypes</a> = dnd_types;</div><div class="line">   fi.<a class="code" href="classTGFileInfo.html#a5f7255f96b20be5855bda42376e0bf5c">fIniDir</a>    = <a class="code" href="TString_8h.html#afa24bfb99acf11cc5836a2a63ca87465">StrDup</a>(dir);</div><div class="line"></div><div class="line">   <span class="keywordflow">switch</span> (menu_id) {</div><div class="line">      <span class="keywordflow">case</span> M_FILE_EXIT:</div><div class="line">         <span class="comment">// close the window and quit application</span></div><div class="line">         DoCloseWindow();</div><div class="line">         <a class="code" href="TApplication_8h.html#a31301dc3addd8971e410c605ff3ade4c">gApplication</a>-&gt;<a class="code" href="classTApplication.html#a5dbb402567d327781a5e9be037e47c27">Terminate</a>(0);</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line">      <span class="keywordflow">case</span> M_FILE_OPEN:</div><div class="line">         <span class="keyword">new</span> <a class="code" href="classTGFileDialog.html">TGFileDialog</a>(<a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetRoot(), <span class="keyword">this</span>, <a class="code" href="TGFileDialog_8h.html#ac5bd24d5c7f2709c860862b58a4ca9baa1d2874870e89d27bb3db54231e66be85">kFDOpen</a>, &amp;fi);</div><div class="line">         dir = fi.<a class="code" href="classTGFileInfo.html#a5f7255f96b20be5855bda42376e0bf5c">fIniDir</a>;</div><div class="line">         <span class="comment">// doesn&#39;t do much, but can be used to open a root file...</span></div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line">      <span class="keywordflow">case</span> M_FILE_BROWSE:</div><div class="line">         <span class="comment">// start a root object browser</span></div><div class="line">         <span class="keyword">new</span> <a class="code" href="classTBrowser.html">TBrowser</a>();</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line">      <span class="keywordflow">case</span> M_FILE_NEWCANVAS:</div><div class="line">         <span class="comment">// open a root canvas</span></div><div class="line">         <a class="code" href="TROOT_8h.html#a851dd11b3478372a25ba6eff6dcfa5b1">gROOT</a>-&gt;MakeDefCanvas();</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line">      <span class="keywordflow">case</span> M_FILE_CLOSEWIN:</div><div class="line">         DoCloseWindow();</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line">      <span class="keywordflow">case</span> M_HELP_ABOUT:</div><div class="line">         hd = <span class="keyword">new</span> <a class="code" href="classTRootHelpDialog.html">TRootHelpDialog</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;About Drag and Drop...&quot;</span>, 550, 250);</div><div class="line">         hd-&gt;<a class="code" href="classTRootHelpDialog.html#a032f6156892674c5e5136a1cfead2689">SetText</a>(gHelpDND);</div><div class="line">         hd-&gt;<a class="code" href="classTRootHelpDialog.html#a3f86998c9439852a867088919c30e3da">Popup</a>();</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line">   }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> DNDMainFrame::ResetStatus()</div><div class="line">{</div><div class="line">   <span class="comment">// Restore the original text of the status label and its original color.</span></div><div class="line"></div><div class="line">   fStatus-&gt;SetTextColor(0x0000ff);</div><div class="line">   fStatus-&gt;ChangeText(gReadyMsg);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> drag_and_drop()</div><div class="line">{</div><div class="line">   <span class="comment">// Main function (entry point)</span></div><div class="line"></div><div class="line">   DNDMainFrame *mainWindow = <span class="keyword">new</span> DNDMainFrame(<a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetRoot(), 700, 400);</div><div class="line">   mainWindow-&gt;MapWindow();</div><div class="line">}</div><div class="line"></div></div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Bertrand Bellenot </dd></dl>

<p class="definition">Definition in file <a class="el" href="drag__and__drop_8C_source.html">drag_and_drop.C</a>.</p>
</div></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:10:12 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
