<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tree/dataframe/src/RDFInterfaceUtils.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_70093cb3a9d1f8840af4e997fde867c3.html">tree</a></li><li class="navelem"><a class="el" href="dir_8af57de82206d86c1654bc47e0b85bc3.html">dataframe</a></li><li class="navelem"><a class="el" href="dir_647aec5a94dac80d1597a04d372ca11d.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RDFInterfaceUtils.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RDFInterfaceUtils_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Author: Enrico Guiraud, Danilo Piparo CERN  02/2018</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/*************************************************************************</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 1995-2018, Rene Brun and Fons Rademakers.               *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * All rights reserved.                                                  *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *                                                                       *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * For the licensing terms see $ROOTSYS/LICENSE.                         *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * For the list of contributors see $ROOTSYS/README/CREDITS.             *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *************************************************************************/</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="InterfaceUtils_8hxx.html">ROOT/RDF/InterfaceUtils.hxx</a>&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="RDataFrame_8hxx.html">ROOT/RDataFrame.hxx</a>&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="RInterface_8hxx.html">ROOT/RDF/RInterface.hxx</a>&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="RStringView_8hxx.html">ROOT/RStringView.hxx</a>&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TSeq_8hxx.html">ROOT/TSeq.hxx</a>&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="RtypesCore_8h.html">RtypesCore.h</a>&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TDirectory_8h.html">TDirectory.h</a>&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TChain_8h.html">TChain.h</a>&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TClass_8h.html">TClass.h</a>&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TClassEdit_8h.html">TClassEdit.h</a>&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TFriendElement_8h.html">TFriendElement.h</a>&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TInterpreter_8h.html">TInterpreter.h</a>&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TObject_8h.html">TObject.h</a>&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TRegexp_8h.html">TRegexp.h</a>&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TPRegexp_8h.html">TPRegexp.h</a>&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TString_8h.html">TString.h</a>&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TTree_8h.html">TTree.h</a>&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// pragma to disable warnings on Rcpp which have</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// so many noise compiling</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#if defined(__GNUC__)</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#pragma GCC diagnostic push</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Woverloaded-virtual&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Wshadow&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;lexertk.hpp&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#if defined(__GNUC__)</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#pragma GCC diagnostic pop</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;iosfwd&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;typeinfo&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceROOT.html">ROOT</a> {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">namespace </span>Detail {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">namespace </span>RDF {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">class </span>RCustomColumnBase;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">class </span>RFilterBase;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">class </span>RLoopManager;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">class </span>RRangeBase;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;} <span class="comment">// namespace RDF</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;} <span class="comment">// namespace Detail</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">namespace </span>RDF {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">class </span>RDataSource;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;} <span class="comment">// namespace RDF</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;} <span class="comment">// namespace ROOT</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceROOT.html">ROOT</a> {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">namespace </span>Internal {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">namespace </span>RDF {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">/// A tokeniser for the expression which is in C++</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/// The goal is to extract all names which are potentially</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/// columns. The difficulty is to catch also the names containing dots.</span></div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a5d5f126919a0a3c272eda563da2aac57">   70</a></span>&#160;<span class="comment"></span>std::set&lt;std::string&gt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a5d5f126919a0a3c272eda563da2aac57">GetPotentialColumnNames</a>(<span class="keyword">const</span> std::string &amp;expr)</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   lexertk::generator generator;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> ok = generator.process(expr);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <span class="keywordflow">if</span> (!ok) {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> msg = <span class="stringliteral">&quot;Failed to tokenize expression:\n&quot;</span> + expr + <span class="stringliteral">&quot;\n\nMake sure it is valid C++.&quot;</span>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(msg);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   std::set&lt;std::string&gt; potCols;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> nToks = generator.size();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   std::string potColWithDots;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <span class="keyword">auto</span> IsSymbol = [](<span class="keyword">const</span> lexertk::token &amp;t) { <span class="keywordflow">return</span> t.type == lexertk::token::e_symbol; };</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   <span class="keyword">auto</span> IsDot = [](<span class="keyword">const</span> lexertk::token &amp;t) { <span class="keywordflow">return</span> t.value == <span class="stringliteral">&quot;.&quot;</span>; };</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <span class="comment">// Now we start iterating over the tokens</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0ULL; i &lt; nToks; ++i) {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keyword">auto</span> &amp;tok = generator[i];</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordflow">if</span> (!IsSymbol(tok))</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="keywordflow">if</span> (i == 0 || (i &gt; 0 &amp;&amp; !IsDot(generator[i - 1])))</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;         potCols.insert(tok.value);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="comment">// after the current token we may have a chain of .&lt;symbol&gt;.&lt;symbol&gt;...</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="comment">// we need to build a set of potential columns incrementally</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="comment">// and stop at the right point. All this advancing the token</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="comment">// cursor.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      potColWithDots = tok.value;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">while</span> (i &lt; nToks) {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;         <span class="keywordflow">if</span> (i + 2 == nToks)</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;         <span class="keyword">auto</span> &amp;nextTok = generator[i + 1];</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;         <span class="keyword">auto</span> &amp;next2nextTok = generator[i + 2];</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;         <span class="keywordflow">if</span> (!IsDot(nextTok) || !IsSymbol(next2nextTok)) {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;         }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;         potColWithDots += <span class="stringliteral">&quot;.&quot;</span> + next2nextTok.value;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;         potCols.insert(potColWithDots);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;         i += 2;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      potColWithDots = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <span class="keywordflow">return</span> potCols;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// The set here is used as a registry, the real list, which keeps the order, is</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// the one in the vector</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="keyword">class </span>RActionBase;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a3e3ea361a4d91bfe44ea556a615ccd86">  121</a></span>&#160;HeadNode_t <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a3e3ea361a4d91bfe44ea556a615ccd86">CreateSnaphotRDF</a>(<span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;validCols,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                            std::string_view treeName,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                            std::string_view fileName,</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                            <span class="keywordtype">bool</span> isLazy,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                            <a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html">RLoopManager</a> &amp;loopManager,</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                            std::unique_ptr&lt;RDFInternal::RActionBase&gt; actionPtr)</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <span class="comment">// create new RDF</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   <a class="code" href="classTDirectory_1_1TContext.html">::TDirectory::TContext</a> ctxt;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <span class="keyword">auto</span> snapshotRDF = std::make_shared&lt;ROOT::RDataFrame&gt;(treeName, fileName, validCols);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <span class="keyword">auto</span> snapshotRDFResPtr = <a class="code" href="namespaceROOT_1_1Detail_1_1RDF.html#ac9c3a5813619e855421a8513f0e6f45b">MakeResultPtr</a>(snapshotRDF, loopManager, std::move(actionPtr));</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <span class="keywordflow">if</span> (!isLazy) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      *snapshotRDFResPtr;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="keywordflow">return</span> snapshotRDFResPtr;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a6209f558c749b8c5cb3460776bfb4fc7">  139</a></span>&#160;std::string <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a6209f558c749b8c5cb3460776bfb4fc7">DemangleTypeIdName</a>(<span class="keyword">const</span> std::type_info &amp;typeInfo)</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="RooMathCoreReg_8cxx.html#a9ade5aa78cf41af74bbde701922393a6">dummy</a>(0);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="namespaceTClassEdit.html#a77a03f5c3e149fe07f06e43560c6e4db">TClassEdit::DemangleTypeIdName</a>(typeInfo, <a class="code" href="RooMathCoreReg_8cxx.html#a9ade5aa78cf41af74bbde701922393a6">dummy</a>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a5335e5e27b91cf34bc2fa3674ea33a14">  145</a></span>&#160;<a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a5335e5e27b91cf34bc2fa3674ea33a14">ConvertRegexToColumns</a>(<span class="keyword">const</span> <a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html">RDFInternal::RBookedCustomColumns</a> &amp; customColumns,</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                                    <a class="code" href="classTTree.html">TTree</a> *<a class="code" href="namespacetree.html">tree</a>,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                    <a class="code" href="classROOT_1_1RDF_1_1RDataSource.html">ROOT::RDF::RDataSource</a> *dataSource,</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                    std::string_view columnNameRegexp,</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                    std::string_view callerName)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> theRegexSize = columnNameRegexp.size();</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   std::string theRegex(columnNameRegexp);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> isEmptyRegex = 0 == theRegexSize;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   <span class="comment">// This is to avoid cases where branches called b1, b2, b3 are all matched by expression &quot;b&quot;</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <span class="keywordflow">if</span> (theRegexSize &gt; 0 &amp;&amp; theRegex[0] != <span class="charliteral">&#39;^&#39;</span>)</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      theRegex = <span class="stringliteral">&quot;^&quot;</span> + theRegex;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <span class="keywordflow">if</span> (theRegexSize &gt; 0 &amp;&amp; theRegex[theRegexSize - 1] != <span class="charliteral">&#39;$&#39;</span>)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      theRegex = theRegex + <span class="stringliteral">&quot;$&quot;</span>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> selectedColumns;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   selectedColumns.reserve(32);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <span class="comment">// Since we support gcc48 and it does not provide in its stl std::regex,</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <span class="comment">// we need to use TRegexp</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <a class="code" href="classTPRegexp.html">TPRegexp</a> regexp(theRegex);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp;branchName : customColumns.<a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html#a98ea12457bf166305eb35047e27832ca">GetNames</a>()) {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">if</span> ((isEmptyRegex || 0 != regexp.<a class="code" href="classTPRegexp.html#a5dd1c3547ee19ca51a9d3a7fc05f587f">Match</a>(branchName.c_str())) &amp;&amp;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            !<a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a9ad2b45e96ec8a29c672c800e8a2798d">RDFInternal::IsInternalColumn</a>(branchName)) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;         selectedColumns.emplace_back(branchName);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="namespacetree.html">tree</a>) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keyword">auto</span> branchNames = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a600a6d92859c7df4601b92b25a68e795">RDFInternal::GetTopLevelBranchNames</a>(*<a class="code" href="namespacetree.html">tree</a>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;branchName : branchNames) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;         <span class="keywordflow">if</span> (isEmptyRegex || 0 != regexp.<a class="code" href="classTPRegexp.html#a5dd1c3547ee19ca51a9d3a7fc05f587f">Match</a>(branchName.c_str())) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            selectedColumns.emplace_back(branchName);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;         }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <span class="keywordflow">if</span> (dataSource) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keyword">auto</span> &amp;dsColNames = dataSource-&gt;<a class="code" href="classROOT_1_1RDF_1_1RDataSource.html#a6bf12cd2528e80dace77c643438ef374">GetColumnNames</a>();</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;dsColName : dsColNames) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;         <span class="keywordflow">if</span> ((isEmptyRegex || 0 != regexp.<a class="code" href="classTPRegexp.html#a5dd1c3547ee19ca51a9d3a7fc05f587f">Match</a>(dsColName.c_str())) &amp;&amp;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;               !<a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a9ad2b45e96ec8a29c672c800e8a2798d">RDFInternal::IsInternalColumn</a>(dsColName)) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            selectedColumns.emplace_back(dsColName);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;         }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keywordflow">if</span> (selectedColumns.empty()) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      std::string <a class="code" href="entrylist__figure1_8C.html#af575f17e6be3f269b86b041a60560dbf">text</a>(callerName);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">if</span> (columnNameRegexp.empty()) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         <a class="code" href="entrylist__figure1_8C.html#af575f17e6be3f269b86b041a60560dbf">text</a> = <span class="stringliteral">&quot;: there is no column available to match.&quot;</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;         <a class="code" href="entrylist__figure1_8C.html#af575f17e6be3f269b86b041a60560dbf">text</a> = <span class="stringliteral">&quot;: regex \&quot;&quot;</span> + std::string(columnNameRegexp) + <span class="stringliteral">&quot;\&quot; did not match any column.&quot;</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(<a class="code" href="entrylist__figure1_8C.html#af575f17e6be3f269b86b041a60560dbf">text</a>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="keywordflow">return</span> selectedColumns;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#af15630a593c168e60d1cdc04dd405759">  205</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#af15630a593c168e60d1cdc04dd405759">GetTopLevelBranchNamesImpl</a>(<a class="code" href="classTTree.html">TTree</a> &amp;t, std::set&lt;std::string&gt; &amp;bNamesReg, <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;bNames,</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                std::set&lt;TTree *&gt; &amp;analysedTrees)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keywordflow">if</span> (!analysedTrees.insert(&amp;t).second) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keyword">auto</span> branches = t.<a class="code" href="classTTree.html#acd351ad0dda7aa50e2ac9254b3dc9f0e">GetListOfBranches</a>();</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <span class="keywordflow">if</span> (branches) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> branchObj : *branches) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;         <span class="keyword">auto</span> name = branchObj-&gt;<a class="code" href="classTCollection.html#a3cc7d60e72049ef09935e5020c3bbf9f">GetName</a>();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;         <span class="keywordflow">if</span> (bNamesReg.insert(name).second) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            bNames.emplace_back(name);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="keyword">auto</span> friendTrees = t.<a class="code" href="classTTree.html#a7d1ebdc3c5887268693d5dd9d3bbe9fb">GetListOfFriends</a>();</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <span class="keywordflow">if</span> (!friendTrees)</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> friendTreeObj : *friendTrees) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keyword">auto</span> friendTree = ((<a class="code" href="classTFriendElement.html">TFriendElement</a> *)friendTreeObj)-&gt;GetTree();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#af15630a593c168e60d1cdc04dd405759">GetTopLevelBranchNamesImpl</a>(*friendTree, bNamesReg, bNames, analysedTrees);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">///////////////////////////////////////////////////////////////////////////////</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/// Get all the top-level branches names, including the ones of the friend trees</span></div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a600a6d92859c7df4601b92b25a68e795">  236</a></span>&#160;<span class="comment"></span><a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a600a6d92859c7df4601b92b25a68e795">GetTopLevelBranchNames</a>(<a class="code" href="classTTree.html">TTree</a> &amp;t)</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;{</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   std::set&lt;std::string&gt; bNamesSet;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> bNames;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   std::set&lt;TTree *&gt; analysedTrees;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#af15630a593c168e60d1cdc04dd405759">GetTopLevelBranchNamesImpl</a>(t, bNamesSet, bNames, analysedTrees);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <span class="keywordflow">return</span> bNames;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a1fea79075ea514916b6fdb9fbbc8bb9c">  245</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a1fea79075ea514916b6fdb9fbbc8bb9c">IsValidCppVarName</a>(<span class="keyword">const</span> std::string &amp;var)</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordflow">if</span> (var.empty())</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> firstChar = var[0];</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="comment">// first character must be either a letter or an underscore</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keyword">auto</span> isALetter = [](<span class="keywordtype">char</span> <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>) { <span class="keywordflow">return</span> (<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> &lt;= <span class="charliteral">&#39;Z&#39;</span>) || (<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> &lt;= <span class="charliteral">&#39;z&#39;</span>); };</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">bool</span> isValidFirstChar = firstChar == <span class="charliteral">&#39;_&#39;</span> || isALetter(firstChar);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keywordflow">if</span> (!isValidFirstChar)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="comment">// all characters must be either a letter, an underscore or a number</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <span class="keyword">auto</span> isANumber = [](<span class="keywordtype">char</span> <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>) { <span class="keywordflow">return</span> <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> &lt;= <span class="charliteral">&#39;9&#39;</span>; };</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keyword">auto</span> isValidTok = [&amp;isALetter, &amp;isANumber](<span class="keywordtype">char</span> <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>) { <span class="keywordflow">return</span> <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> == <span class="charliteral">&#39;_&#39;</span> || isALetter(<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>) || isANumber(<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>); };</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> : var)</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">if</span> (!isValidTok(<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>))</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#af8022192a97bfd1a641ea0f814444ab0">  267</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#af8022192a97bfd1a641ea0f814444ab0">CheckCustomColumn</a>(std::string_view definedCol, <a class="code" href="classTTree.html">TTree</a> *treePtr, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;customCols,</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                       <span class="keyword">const</span> std::map&lt;std::string, std::string&gt; &amp;aliasMap, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;dataSourceColumns)</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;{</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keyword">const</span> std::string definedColStr(definedCol);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a1fea79075ea514916b6fdb9fbbc8bb9c">IsValidCppVarName</a>(definedColStr)) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> msg = <span class="stringliteral">&quot;Cannot define column \&quot;&quot;</span> + definedColStr + <span class="stringliteral">&quot;\&quot;: not a valid C++ variable name.&quot;</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(msg);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">if</span> (treePtr != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="comment">// check if definedCol is already present in TTree</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> branch = treePtr-&gt;<a class="code" href="classTTree.html#a0b37fd6f19f6ef70b37c36b64242c2f4">GetBranch</a>(definedColStr.c_str());</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">if</span> (branch != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;         <span class="keyword">const</span> <span class="keyword">auto</span> msg = <span class="stringliteral">&quot;branch \&quot;&quot;</span> + definedColStr + <span class="stringliteral">&quot;\&quot; already present in TTree&quot;</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;         <span class="keywordflow">throw</span> std::runtime_error(msg);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="comment">// check if definedCol has already been `Define`d in the functional graph</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   <span class="keywordflow">if</span> (std::find(customCols.begin(), customCols.end(), definedCol) != customCols.end()) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> msg = <span class="stringliteral">&quot;Redefinition of column \&quot;&quot;</span> + definedColStr + <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(msg);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="comment">// Check if the definedCol is an alias</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> aliasColNameIt = aliasMap.find(definedColStr);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keywordflow">if</span> (aliasColNameIt != aliasMap.end()) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> msg = <span class="stringliteral">&quot;An alias with name &quot;</span> + definedColStr + <span class="stringliteral">&quot; pointing to column &quot;</span> +</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      aliasColNameIt-&gt;second + <span class="stringliteral">&quot; is already existing.&quot;</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(msg);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="comment">// check if definedCol is already present in the DataSource (but has not yet been `Define`d)</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordflow">if</span> (!dataSourceColumns.empty()) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">if</span> (std::find(dataSourceColumns.begin(), dataSourceColumns.end(), definedCol) != dataSourceColumns.end()) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         <span class="keyword">const</span> <span class="keyword">auto</span> msg = <span class="stringliteral">&quot;Redefinition of column \&quot;&quot;</span> + definedColStr + <span class="stringliteral">&quot;\&quot; already present in the data-source&quot;</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;         <span class="keywordflow">throw</span> std::runtime_error(msg);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a611f2443179dab078fb17dc7d3763647">  308</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a611f2443179dab078fb17dc7d3763647">CheckTypesAndPars</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nTemplateParams, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nColumnNames)</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;{</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <span class="keywordflow">if</span> (nTemplateParams != nColumnNames) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      std::string err_msg = <span class="stringliteral">&quot;The number of template parameters specified is &quot;</span>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      err_msg += std::to_string(nTemplateParams);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      err_msg += <span class="stringliteral">&quot; while &quot;</span>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      err_msg += std::to_string(nColumnNames);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      err_msg += <span class="stringliteral">&quot; columns have been specified.&quot;</span>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(err_msg);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">/// Choose between local column names or default column names, throw in case of errors.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"></span><span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a></div><div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a04be22015deb92209ee54bc3a3ed855a">  322</a></span>&#160;<a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a04be22015deb92209ee54bc3a3ed855a">SelectColumns</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nRequiredNames, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;names, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;defaultNames)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;{</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keywordflow">if</span> (names.empty()) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="comment">// use default column names</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">if</span> (defaultNames.size() &lt; nRequiredNames)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;         <span class="keywordflow">throw</span> std::runtime_error(</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            std::to_string(nRequiredNames) + <span class="stringliteral">&quot; column name&quot;</span> + (nRequiredNames == 1 ? <span class="stringliteral">&quot; is&quot;</span> : <span class="stringliteral">&quot;s are&quot;</span>) +</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="stringliteral">&quot; required but none were provided and the default list has size &quot;</span> + std::to_string(defaultNames.size()));</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">// return first nRequiredNames default column names</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a>(defaultNames.begin(), defaultNames.begin() + nRequiredNames);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="comment">// use column names provided by the user to this particular transformation/action</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">if</span> (names.size() != nRequiredNames) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;         <span class="keyword">auto</span> msg = std::to_string(nRequiredNames) + <span class="stringliteral">&quot; column name&quot;</span> + (nRequiredNames == 1 ? <span class="stringliteral">&quot; is&quot;</span> : <span class="stringliteral">&quot;s are&quot;</span>) +</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    <span class="stringliteral">&quot; required but &quot;</span> + std::to_string(names.size()) + (names.size() == 1 ? <span class="stringliteral">&quot; was&quot;</span> : <span class="stringliteral">&quot; were&quot;</span>) +</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    <span class="stringliteral">&quot; provided:&quot;</span>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;         <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;name : names)</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            msg += <span class="stringliteral">&quot; \&quot;&quot;</span> + name + <span class="stringliteral">&quot;\&quot;,&quot;</span>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;         msg.back() = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;         <span class="keywordflow">throw</span> std::runtime_error(msg);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">return</span> names;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a80fa931ee1243bf1c649222e85c3e2c4">  347</a></span>&#160;<a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a80fa931ee1243bf1c649222e85c3e2c4">FindUnknownColumns</a>(<span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;requiredCols, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;datasetColumns,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;definedCols, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;dataSourceColumns)</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> unknownColumns;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;column : requiredCols) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> isBranch = std::find(datasetColumns.begin(), datasetColumns.end(), column) != datasetColumns.end();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordflow">if</span> (isBranch)</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> isCustomColumn = std::find(definedCols.begin(), definedCols.end(), column) != definedCols.end();</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">if</span> (isCustomColumn)</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> isDataSourceColumn =</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;         std::find(dataSourceColumns.begin(), dataSourceColumns.end(), column) != dataSourceColumns.end();</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordflow">if</span> (isDataSourceColumn)</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      unknownColumns.emplace_back(column);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="keywordflow">return</span> unknownColumns;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a9ad2b45e96ec8a29c672c800e8a2798d">  367</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a9ad2b45e96ec8a29c672c800e8a2798d">IsInternalColumn</a>(std::string_view colName)</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;{</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> str = colName.data();</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> goodPrefix = colName.size() &gt; 3 &amp;&amp;               <span class="comment">// has at least more characters than {r,t}df</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                           (<span class="charliteral">&#39;r&#39;</span> == str[0] || <span class="charliteral">&#39;t&#39;</span> == str[0]) &amp;&amp; <span class="comment">// starts with r or t</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                           0 == strncmp(<span class="stringliteral">&quot;df&quot;</span>, str + 1, 2);     <span class="comment">// 2nd and 3rd letters are df</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordflow">return</span> goodPrefix &amp;&amp; <span class="charliteral">&#39;_&#39;</span> == colName.back();                 <span class="comment">// also ends with &#39;_&#39;</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a8e5e8b5d2011696d40f3fd6d4c5ee500">  376</a></span>&#160;std::vector&lt;std::string&gt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a8e5e8b5d2011696d40f3fd6d4c5ee500">GetFilterNames</a>(<span class="keyword">const</span> std::shared_ptr&lt;RLoopManager&gt; &amp;loopManager)</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <span class="keywordflow">return</span> loopManager-&gt;GetFiltersNames();</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">// Replace all the occurrences of a string by another string</span></div><div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a3a280022341ccc767bf41c91c86cea3d">  382</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a3a280022341ccc767bf41c91c86cea3d">Replace</a>(std::string &amp;<a class="code" href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">s</a>, <span class="keyword">const</span> std::string what, <span class="keyword">const</span> std::string withWhat)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;{</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keywordtype">size_t</span> idx = 0;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <span class="keyword">auto</span> numReplacements = 0U;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   <span class="keywordflow">while</span> ((idx = <a class="code" href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">s</a>.find(what, idx)) != std::string::npos) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <a class="code" href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">s</a>.replace(idx, what.size(), withWhat);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      idx += withWhat.size();</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      numReplacements++;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <span class="keywordflow">return</span> numReplacements;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;}</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// Match expression against names of branches passed as parameter</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">// Return vector of names of the branches used in the expression</span></div><div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#aaaa39031940432053c4f26ed53c4c75e">  396</a></span>&#160;std::vector&lt;std::string&gt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#aaaa39031940432053c4f26ed53c4c75e">FindUsedColumnNames</a>(std::string_view expression, <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> branches,</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;customColumns, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;dsColumns,</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                             <span class="keyword">const</span> std::map&lt;std::string, std::string&gt; &amp;aliasMap)</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="comment">// To help matching the regex</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> potCols = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a5d5f126919a0a3c272eda563da2aac57">GetPotentialColumnNames</a>(std::string(expression));</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keywordflow">if</span> (potCols.size() == 0) <span class="keywordflow">return</span> {};</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   std::set&lt;std::string&gt; usedBranches;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="comment">// Check which custom columns match</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;brName : customColumns) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">if</span> (potCols.find(brName) != potCols.end()) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;         usedBranches.insert(brName);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="comment">// Check which tree branches match</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="comment">// We need to match the longest</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <span class="comment">// First: reverse sort to have longer branches before, e.g.</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="comment">// a.b.c</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   <span class="comment">// a.b</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="comment">// a</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <span class="comment">// We want that the longest branch ends up in usedBranches before.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   std::sort(branches.begin(), branches.end(),</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;             [](<span class="keyword">const</span> std::string &amp;<a class="code" href="RSha256_8hxx.html#aa4074fe219868f65efa393f656020fed">s0</a>, <span class="keyword">const</span> std::string &amp;<a class="code" href="RSha256_8hxx.html#ac1e4ed4e56436a432900cad5a1225731">s1</a>) {<span class="keywordflow">return</span> <a class="code" href="RSha256_8hxx.html#aa4074fe219868f65efa393f656020fed">s0</a> &gt; <a class="code" href="RSha256_8hxx.html#ac1e4ed4e56436a432900cad5a1225731">s1</a>;});</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;brName : branches) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="comment">// If the branch is not in the potential columns, we simply move on</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">if</span> (potCols.find(brName) == potCols.end()) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="comment">// If not, we check if the branch name is contained in one of the branch</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="comment">// names which we already added to the usedBranches.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keyword">auto</span> isContained = [&amp;brName](<span class="keyword">const</span> std::string &amp;usedBr) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;         <span class="comment">// We check two things:</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;         <span class="comment">// 1. That the string is contained, e.g. a.b is contained in a.b.c.d</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;         <span class="comment">// 2. That the number of &#39;.&#39;s is greater, otherwise in situations where</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;         <span class="comment">//    2 branches have names like br0 and br01, br0 is not matched (ROOT-9929)</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;         <span class="keywordflow">return</span> usedBr.find(brName) != std::string::npos &amp;&amp;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;           std::count(usedBr.begin(), usedBr.end(), <span class="charliteral">&#39;.&#39;</span>) &gt; std::count(brName.begin(), brName.end(), <span class="charliteral">&#39;.&#39;</span>);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;         };</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keyword">auto</span> it = std::find_if(usedBranches.begin(), usedBranches.end(), isContained);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="keywordflow">if</span> (it == usedBranches.end()) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;         usedBranches.insert(brName);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="comment">// Check which data-source columns match</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;col : dsColumns) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">if</span> (potCols.find(col) != potCols.end()) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;         usedBranches.insert(col);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="comment">// Check which aliases match</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;alias_colName : aliasMap) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keyword">auto</span> &amp;alias = alias_colName.first;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">if</span> (potCols.find(alias) != potCols.end()) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;         usedBranches.insert(alias);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keywordflow">return</span> std::vector&lt;std::string&gt;(usedBranches.begin(), usedBranches.end());</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">// TODO we should also replace other invalid chars, like &#39;[],&#39; and spaces</span></div><div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a6a02589b09621621360d24444a7bdb34">  465</a></span>&#160;std::vector&lt;std::string&gt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a6a02589b09621621360d24444a7bdb34">ReplaceDots</a>(<span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;colNames)</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   std::vector&lt;std::string&gt; dotlessNames = colNames;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> : dotlessNames) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> hasDot = <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>.find_first_of(<span class="charliteral">&#39;.&#39;</span>) != std::string::npos;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="keywordflow">if</span> (hasDot) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;         std::replace(<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>.begin(), <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>.end(), <span class="charliteral">&#39;.&#39;</span>, <span class="charliteral">&#39;_&#39;</span>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;         <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>.insert(0u, <span class="stringliteral">&quot;__rdf_arg_&quot;</span>);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keywordflow">return</span> dotlessNames;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">// TODO comment well -- there is a lot going on in this function in terms of side-effects</span></div><div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a738cfab9e550551b4e33aa0d20a24dd3">  479</a></span>&#160;std::vector&lt;std::string&gt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a738cfab9e550551b4e33aa0d20a24dd3">ColumnTypesAsString</a>(<a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;colNames, <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;varNames,</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                                             <span class="keyword">const</span> std::map&lt;std::string, std::string&gt; &amp;aliasMap, <a class="code" href="classTTree.html">TTree</a> *<a class="code" href="namespacetree.html">tree</a>,</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                                             <a class="code" href="classROOT_1_1RDF_1_1RDataSource.html">RDataSource</a> *ds, std::string &amp;expr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> namespaceID,</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html">RDFInternal::RBookedCustomColumns</a> &amp;customCols)</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;{</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   std::vector&lt;std::string&gt; colTypes;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   colTypes.reserve(colNames.size());</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> aliasMapEnd = aliasMap.end();</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> = colNames.begin(), <a class="code" href="Dict_8h.html#ae4dfd0ff80708edc0ec19fe36e65d9a7">v</a> = varNames.begin(); <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> != colNames.end();) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;colName = *<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">if</span> (colName.find(<span class="charliteral">&#39;.&#39;</span>) != std::string::npos) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;         <span class="comment">// If the column name contains dots, replace its name in the expression with the corresponding varName</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;         <span class="keyword">auto</span> numRepl = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a3a280022341ccc767bf41c91c86cea3d">Replace</a>(expr, colName, *<a class="code" href="Dict_8h.html#ae4dfd0ff80708edc0ec19fe36e65d9a7">v</a>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;         <span class="keywordflow">if</span> (numRepl == 0) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="comment">// Discard this column: we could not replace it, although we matched it previously</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="comment">// This is because it is a substring of a column we already replaced in the expression</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="comment">// e.g. &quot;a.b&quot; is a substring column of &quot;a.b.c&quot;</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> = colNames.erase(<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <a class="code" href="Dict_8h.html#ae4dfd0ff80708edc0ec19fe36e65d9a7">v</a> = varNames.erase(<a class="code" href="Dict_8h.html#ae4dfd0ff80708edc0ec19fe36e65d9a7">v</a>);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;         }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;         <span class="comment">// Column name with no dots: check the name is still there</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         <span class="comment">// it might have only been there as part of a column name with dots, e.g. &quot;a&quot; inside &quot;a.b.c&quot;</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;         <span class="keyword">const</span> <span class="keyword">auto</span> paddedExpr = <span class="stringliteral">&quot; &quot;</span> + expr + <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         <span class="keyword">static</span> <span class="keyword">const</span> std::string noWordChars(<span class="stringliteral">&quot;[^a-zA-Z0-9_]&quot;</span>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;         <span class="keyword">const</span> <span class="keyword">auto</span> colNameRxBody = noWordChars + colName + noWordChars;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;         <a class="code" href="classTRegexp.html">TRegexp</a> colNameRegex(colNameRxBody.c_str());</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;         <a class="code" href="RtypesCore_8h.html#a649fe0f43fc2d393d99c5d39848f96b9">Ssiz_t</a> matchedLen;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;         <span class="keyword">const</span> <span class="keyword">auto</span> colStillThere = colNameRegex.<a class="code" href="classTRegexp.html#abdc7471c3a0d8d5c91a6354a58f62002">Index</a>(paddedExpr.c_str(), &amp;matchedLen) != -1;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;         <span class="keywordflow">if</span> (!colStillThere) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a> = colNames.erase(<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <a class="code" href="Dict_8h.html#ae4dfd0ff80708edc0ec19fe36e65d9a7">v</a> = varNames.erase(<a class="code" href="Dict_8h.html#ae4dfd0ff80708edc0ec19fe36e65d9a7">v</a>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;         }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <span class="comment">// Replace the colName with the real one in case colName it&#39;s an alias</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="comment">// The real name is used to get the type, but the variable name will still be colName</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> aliasMapIt = aliasMap.find(colName);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;realColName = aliasMapEnd == aliasMapIt ? colName : aliasMapIt-&gt;second;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="comment">// The map is a const reference, so no operator[]</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> isCustomCol = customCols.<a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html#aa832512be97dfeb38067877ea3931fda">HasName</a>(realColName);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> customColID = isCustomCol ? customCols.<a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html#aaed6dfb91b47f46e9cd29989af0a075b">GetColumns</a>().at(realColName)-&gt;GetID() : 0;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> colTypeName =</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;         <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#aab37c96b52a6b9f3fb926bcb865694f7">ColumnName2ColumnTypeName</a>(realColName, namespaceID, <a class="code" href="namespacetree.html">tree</a>, ds, isCustomCol, <span class="comment">/*vector2rvec=*/</span><span class="keyword">true</span>, customColID);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      colTypes.emplace_back(colTypeName);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      ++<a class="code" href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a>, ++<a class="code" href="Dict_8h.html#ae4dfd0ff80708edc0ec19fe36e65d9a7">v</a>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="keywordflow">return</span> colTypes;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">// Jit expression &quot;in the vacuum&quot;, throw if cling exits with an error</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">// This is to make sure that column names, types and expression string are proper C++</span></div><div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#adbf564a5417ebe04b73777b134a6e95d">  536</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#adbf564a5417ebe04b73777b134a6e95d">TryToJitExpression</a>(<span class="keyword">const</span> std::string &amp;expression, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;colNames,</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                        <span class="keyword">const</span> std::vector&lt;std::string&gt; &amp;colTypes, <span class="keywordtype">bool</span> hasReturnStmt)</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;{</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <a class="code" href="TError_8h.html#a0d9522d2162c4791a430247c1522946d">R__ASSERT</a>(colNames.size() == colTypes.size());</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iNs = 0U;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   std::stringstream dummyDecl;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   dummyDecl &lt;&lt; <span class="stringliteral">&quot;namespace __rdf_&quot;</span> &lt;&lt; std::to_string(iNs++) &lt;&lt; <span class="stringliteral">&quot;{ auto rdf_f = []() {&quot;</span>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> col = colNames.begin(), <a class="code" href="TGX11_8cxx.html#ac765329451135abec74c45e1897abf26">type</a> = colTypes.begin(); col != colNames.end(); ++col, ++<a class="code" href="TGX11_8cxx.html#ac765329451135abec74c45e1897abf26">type</a>) {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      dummyDecl &lt;&lt; *<a class="code" href="TGX11_8cxx.html#ac765329451135abec74c45e1897abf26">type</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; *col &lt;&lt; <span class="stringliteral">&quot;;\n&quot;</span>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="comment">// Now that branches are declared as variables, put the body of the</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="comment">// lambda in dummyDecl and close scopes of f and namespace __rdf_N</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <span class="keywordflow">if</span> (hasReturnStmt)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      dummyDecl &lt;&lt; expression &lt;&lt; <span class="stringliteral">&quot;\n;};}&quot;</span>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      dummyDecl &lt;&lt; <span class="stringliteral">&quot;return &quot;</span> &lt;&lt; expression &lt;&lt; <span class="stringliteral">&quot;\n;};}&quot;</span>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <span class="comment">// Try to declare the dummy lambda, error out if it does not compile</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="TInterpreter_8h.html#a943f074408c15163f1edf41c2dcd95ac">gInterpreter</a>-&gt;Declare(dummyDecl.str().c_str())) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keyword">auto</span> msg =</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;         <span class="stringliteral">&quot;Cannot interpret the following expression:\n&quot;</span> + std::string(expression) + <span class="stringliteral">&quot;\n\nMake sure it is valid C++.&quot;</span>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(msg);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;std::string</div><div class="line"><a name="l00565"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a078ecba4af184c99c92c5738739cb42b">  565</a></span>&#160;<a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a078ecba4af184c99c92c5738739cb42b">BuildLambdaString</a>(<span class="keyword">const</span> std::string &amp;expr, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;vars, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;varTypes, <span class="keywordtype">bool</span> hasReturnStmt)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;{</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <a class="code" href="TError_8h.html#a0d9522d2162c4791a430247c1522946d">R__ASSERT</a>(vars.size() == varTypes.size());</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   std::stringstream ss;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   ss &lt;&lt; <span class="stringliteral">&quot;[](&quot;</span>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0u; i &lt; vars.size(); ++i) {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="comment">// We pass by reference to avoid expensive copies</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="comment">// It can&#39;t be const reference in general, as users might want/need to call non-const methods on the values</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      ss &lt;&lt; varTypes[i] &lt;&lt; <span class="stringliteral">&quot;&amp; &quot;</span> &lt;&lt; vars[i] &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <span class="keywordflow">if</span> (!vars.empty())</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      ss.seekp(-2, ss.cur);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keywordflow">if</span> (hasReturnStmt)</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      ss &lt;&lt; <span class="stringliteral">&quot;){&quot;</span>;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      ss &lt;&lt; <span class="stringliteral">&quot;){return &quot;</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   ss &lt;&lt; expr &lt;&lt; <span class="stringliteral">&quot;\n;}&quot;</span>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordflow">return</span> ss.str();</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">  588</a></span>&#160;std::string <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *<span class="keyword">const</span> addr)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;{</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   std::stringstream <a class="code" href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">s</a>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <span class="comment">// Windows-friendly</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   s &lt;&lt; std::hex &lt;&lt; std::showbase &lt;&lt; reinterpret_cast&lt;size_t&gt;(addr);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">s</a>.str();</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">// Jit a string filter expression and jit-and-call this-&gt;Filter with the appropriate arguments</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">// Return pointer to the new functional chain node returned by the call, cast to Long_t</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#aea1372ac1298640821745b93860d74d7">  599</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#aea1372ac1298640821745b93860d74d7">BookFilterJit</a>(<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RJittedFilter.html">RJittedFilter</a> *jittedFilter, <span class="keywordtype">void</span> *prevNodeOnHeap, std::string_view name,</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                   std::string_view expression, <span class="keyword">const</span> std::map&lt;std::string, std::string&gt; &amp;aliasMap,</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                   <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;branches, <span class="keyword">const</span> <a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html">RDFInternal::RBookedCustomColumns</a> &amp;customCols, <a class="code" href="classTTree.html">TTree</a> *<a class="code" href="namespacetree.html">tree</a>,</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                   <a class="code" href="classROOT_1_1RDF_1_1RDataSource.html">RDataSource</a> *ds, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> namespaceID)</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;{</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> &amp;dsColumns = ds ? ds-&gt;<a class="code" href="classROOT_1_1RDF_1_1RDataSource.html#a6bf12cd2528e80dace77c643438ef374">GetColumnNames</a>() : <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a>{};</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <span class="comment">// not const because `ColumnTypesAsStrings` might delete redundant matches and replace variable names</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <span class="keyword">auto</span> usedBranches = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#aaaa39031940432053c4f26ed53c4c75e">FindUsedColumnNames</a>(expression, branches, customCols.<a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html#a98ea12457bf166305eb35047e27832ca">GetNames</a>(), dsColumns, aliasMap);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keyword">auto</span> varNames = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a6a02589b09621621360d24444a7bdb34">ReplaceDots</a>(usedBranches);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="keyword">auto</span> dotlessExpr = std::string(expression);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> usedColTypes =</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a738cfab9e550551b4e33aa0d20a24dd3">ColumnTypesAsString</a>(usedBranches, varNames, aliasMap, <a class="code" href="namespacetree.html">tree</a>, ds, dotlessExpr, namespaceID, customCols);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <a class="code" href="classTRegexp.html">TRegexp</a> re(<span class="stringliteral">&quot;[^a-zA-Z0-9_]?return[^a-zA-Z0-9_]&quot;</span>);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <a class="code" href="RtypesCore_8h.html#a649fe0f43fc2d393d99c5d39848f96b9">Ssiz_t</a> matchedLen;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">bool</span> hasReturnStmt = re.<a class="code" href="classTRegexp.html#abdc7471c3a0d8d5c91a6354a58f62002">Index</a>(dotlessExpr, &amp;matchedLen) != -1;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keyword">auto</span> lm = jittedFilter-&gt;<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RNodeBase.html#adf4239ff9b19151f8628aeb1680275e5">GetLoopManagerUnchecked</a>();</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   lm-&gt;<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a7fa355faf48f254b33d2dd5900ebc73b">JitDeclarations</a>(); <span class="comment">// TryToJitExpression might need some of the Define&#39;d column type aliases</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#adbf564a5417ebe04b73777b134a6e95d">TryToJitExpression</a>(dotlessExpr, varNames, usedColTypes, hasReturnStmt);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> filterLambda = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a078ecba4af184c99c92c5738739cb42b">BuildLambdaString</a>(dotlessExpr, varNames, usedColTypes, hasReturnStmt);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> jittedFilterAddr = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(jittedFilter);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> prevNodeAddr = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(prevNodeOnHeap);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <span class="comment">// columnsOnHeap is deleted by the jitted call to JitFilterHelper</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html">ROOT::Internal::RDF::RBookedCustomColumns</a> *columnsOnHeap = <span class="keyword">new</span> <a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html">ROOT::Internal::RDF::RBookedCustomColumns</a>(customCols);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> columnsOnHeapAddr = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(columnsOnHeap);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="comment">// Produce code snippet that creates the filter and registers it with the corresponding RJittedFilter</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="comment">// Windows requires std::hex &lt;&lt; std::showbase &lt;&lt; (size_t)pointer to produce notation &quot;0x1234&quot;</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   std::stringstream filterInvocation;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   filterInvocation &lt;&lt; <span class="stringliteral">&quot;ROOT::Internal::RDF::JitFilterHelper(&quot;</span> &lt;&lt; filterLambda &lt;&lt; <span class="stringliteral">&quot;, {&quot;</span>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;brName : usedBranches) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="comment">// Here we selectively replace the brName with the real column name if it&#39;s necessary.</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> aliasMapIt = aliasMap.find(brName);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keyword">auto</span> &amp;realBrName = aliasMapIt == aliasMap.end() ? brName : aliasMapIt-&gt;second;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      filterInvocation &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; realBrName &lt;&lt; <span class="stringliteral">&quot;\&quot;, &quot;</span>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <span class="keywordflow">if</span> (!usedBranches.empty())</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      filterInvocation.seekp(-2, filterInvocation.cur); <span class="comment">// remove the last &quot;,</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   filterInvocation &lt;&lt; <span class="stringliteral">&quot;}, \&quot;&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;\&quot;, &quot;</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;reinterpret_cast&lt;ROOT::Detail::RDF::RJittedFilter*&gt;(&quot;</span> &lt;&lt; jittedFilterAddr &lt;&lt; <span class="stringliteral">&quot;), &quot;</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;reinterpret_cast&lt;std::shared_ptr&lt;ROOT::Detail::RDF::RNodeBase&gt;*&gt;(&quot;</span> &lt;&lt; prevNodeAddr &lt;&lt; <span class="stringliteral">&quot;),&quot;</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;reinterpret_cast&lt;ROOT::Internal::RDF::RBookedCustomColumns*&gt;(&quot;</span> &lt;&lt; columnsOnHeapAddr &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;);&quot;</span>;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   lm-&gt;ToJitExec(filterInvocation.str());</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">// Jit a Define call</span></div><div class="line"><a name="l00652"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#ae608e3c564317d4d7ece22ccec5c6568">  652</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#ae608e3c564317d4d7ece22ccec5c6568">BookDefineJit</a>(std::string_view name, std::string_view expression, <a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html">RLoopManager</a> &amp;lm, <a class="code" href="classROOT_1_1RDF_1_1RDataSource.html">RDataSource</a> *ds,</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                   <span class="keyword">const</span> std::shared_ptr&lt;RJittedCustomColumn&gt; &amp;jittedCustomColumn,</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html">RDFInternal::RBookedCustomColumns</a> &amp;customCols, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;branches)</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> &amp;aliasMap = lm.<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#aea327234d337af6dd901779ffcc81745">GetAliasMap</a>();</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keyword">auto</span> *<span class="keyword">const</span> <a class="code" href="namespacetree.html">tree</a> = lm.<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a4f88c4e7b6110c978af0e0297d05dc69">GetTree</a>();</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> namespaceID = lm.<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a70988d8b1b7175fea6dc5966ff1922e2">GetID</a>();</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> &amp;dsColumns = ds ? ds-&gt;<a class="code" href="classROOT_1_1RDF_1_1RDataSource.html#a6bf12cd2528e80dace77c643438ef374">GetColumnNames</a>() : <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a>{};</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="comment">// not const because `ColumnTypesAsStrings` might delete redundant matches and replace variable names</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   <span class="keyword">auto</span> usedBranches = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#aaaa39031940432053c4f26ed53c4c75e">FindUsedColumnNames</a>(expression, branches, customCols.<a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html#a98ea12457bf166305eb35047e27832ca">GetNames</a>(), dsColumns, aliasMap);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   <span class="keyword">auto</span> varNames = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a6a02589b09621621360d24444a7bdb34">ReplaceDots</a>(usedBranches);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <span class="keyword">auto</span> dotlessExpr = std::string(expression);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> usedColTypes =</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a738cfab9e550551b4e33aa0d20a24dd3">ColumnTypesAsString</a>(usedBranches, varNames, aliasMap, <a class="code" href="namespacetree.html">tree</a>, ds, dotlessExpr, namespaceID, customCols);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   <a class="code" href="classTRegexp.html">TRegexp</a> re(<span class="stringliteral">&quot;[^a-zA-Z0-9_]?return[^a-zA-Z0-9_]&quot;</span>);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <a class="code" href="RtypesCore_8h.html#a649fe0f43fc2d393d99c5d39848f96b9">Ssiz_t</a> matchedLen;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">bool</span> hasReturnStmt = re.<a class="code" href="classTRegexp.html#abdc7471c3a0d8d5c91a6354a58f62002">Index</a>(dotlessExpr, &amp;matchedLen) != -1;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   lm.<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a7fa355faf48f254b33d2dd5900ebc73b">JitDeclarations</a>(); <span class="comment">// TryToJitExpression might need some of the Define&#39;d column type aliases</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#adbf564a5417ebe04b73777b134a6e95d">TryToJitExpression</a>(dotlessExpr, varNames, usedColTypes, hasReturnStmt);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> definelambda = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a078ecba4af184c99c92c5738739cb42b">BuildLambdaString</a>(dotlessExpr, varNames, usedColTypes, hasReturnStmt);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> customColID = std::to_string(jittedCustomColumn-&gt;GetID());</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> lambdaName = <span class="stringliteral">&quot;eval_&quot;</span> + std::string(name) + customColID;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="namespaceTGeant4Unit.html#a9b0630f8addb68eecc990baa3a5e6e15">ns</a> = <span class="stringliteral">&quot;__rdf&quot;</span> + std::to_string(namespaceID);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keyword">auto</span> customColumnsCopy = <span class="keyword">new</span> <a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html">RDFInternal::RBookedCustomColumns</a>(customCols);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="keyword">auto</span> customColumnsAddr = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(customColumnsCopy);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="comment">// Declare the lambda variable and an alias for the type of the defined column in namespace __rdf</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="comment">// This assumes that a given variable is Define&#39;d once per RDataFrame -- we might want to relax this requirement</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="comment">// to let python users execute a Define cell multiple times</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> defineDeclaration =</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="stringliteral">&quot;namespace &quot;</span> + <a class="code" href="namespaceTGeant4Unit.html#a9b0630f8addb68eecc990baa3a5e6e15">ns</a> + <span class="stringliteral">&quot; { auto &quot;</span> + lambdaName + <span class="stringliteral">&quot; = &quot;</span> + definelambda + <span class="stringliteral">&quot;;\n&quot;</span> + <span class="stringliteral">&quot;using &quot;</span> + std::string(name) +</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      customColID + <span class="stringliteral">&quot;_type = typename ROOT::TypeTraits::CallableTraits&lt;decltype(&quot;</span> + lambdaName + <span class="stringliteral">&quot; )&gt;::ret_type;  }\n&quot;</span>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   lm.<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a5ad043b731972ff5988643292c91e9e2">ToJitDeclare</a>(defineDeclaration);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   std::stringstream defineInvocation;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   defineInvocation &lt;&lt; <span class="stringliteral">&quot;ROOT::Internal::RDF::JitDefineHelper(&quot;</span> &lt;&lt; definelambda &lt;&lt; <span class="stringliteral">&quot;, {&quot;</span>;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> brName : usedBranches) {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <span class="comment">// Here we selectively replace the brName with the real column name if it&#39;s necessary.</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keyword">auto</span> aliasMapIt = aliasMap.find(brName);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="keyword">auto</span> &amp;realBrName = aliasMapIt == aliasMap.end() ? brName : aliasMapIt-&gt;second;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      defineInvocation &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; realBrName &lt;&lt; <span class="stringliteral">&quot;\&quot;, &quot;</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="keywordflow">if</span> (!usedBranches.empty())</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      defineInvocation.seekp(-2, defineInvocation.cur); <span class="comment">// remove the last &quot;,</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   defineInvocation &lt;&lt; <span class="stringliteral">&quot;}, \&quot;&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;\&quot;, reinterpret_cast&lt;ROOT::Detail::RDF::RLoopManager*&gt;(&quot;</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                    &lt;&lt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(&amp;lm) &lt;&lt; <span class="stringliteral">&quot;), *reinterpret_cast&lt;ROOT::Detail::RDF::RJittedCustomColumn*&gt;(&quot;</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                    &lt;&lt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(jittedCustomColumn.get()) &lt;&lt; <span class="stringliteral">&quot;),&quot;</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;reinterpret_cast&lt;ROOT::Internal::RDF::RBookedCustomColumns*&gt;(&quot;</span> &lt;&lt; customColumnsAddr &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;);&quot;</span>;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   lm.<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a5d705c539f55eecc7ec0da28e95300b4">ToJitExec</a>(defineInvocation.str());</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;}</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">// Jit and call something equivalent to &quot;this-&gt;BuildAndBook&lt;BranchTypes...&gt;(params...)&quot;</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">// (see comments in the body for actual jitted code)</span></div><div class="line"><a name="l00712"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a8b4a7077aae2890888ce724a6dec8734">  712</a></span>&#160;std::string <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a8b4a7077aae2890888ce724a6dec8734">JitBuildAction</a>(<span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;bl, <span class="keywordtype">void</span> *prevNode, <span class="keyword">const</span> std::type_info &amp;art, <span class="keyword">const</span> std::type_info &amp;at,</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                           <span class="keywordtype">void</span> *rOnHeap, <a class="code" href="classTTree.html">TTree</a> *<a class="code" href="namespacetree.html">tree</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nSlots,</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html">RDFInternal::RBookedCustomColumns</a> &amp;customCols, <a class="code" href="classROOT_1_1RDF_1_1RDataSource.html">RDataSource</a> *ds,</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                           std::shared_ptr&lt;RJittedAction&gt; *jittedActionOnHeap, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> namespaceID)</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;{</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="keyword">auto</span> nBranches = bl.size();</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="comment">// retrieve branch type names as strings</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   std::vector&lt;std::string&gt; columnTypeNames(nBranches);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0u; i &lt; nBranches; ++i) {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> isCustomCol = customCols.<a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html#aa832512be97dfeb38067877ea3931fda">HasName</a>(bl[i]);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> customColID = isCustomCol ? customCols.<a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html#aaed6dfb91b47f46e9cd29989af0a075b">GetColumns</a>().at(bl[i])-&gt;GetID() : 0;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> columnTypeName =</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;         <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#aab37c96b52a6b9f3fb926bcb865694f7">ColumnName2ColumnTypeName</a>(bl[i], namespaceID, <a class="code" href="namespacetree.html">tree</a>, ds, isCustomCol, <span class="comment">/*vector2rvec=*/</span><span class="keyword">true</span>, customColID);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordflow">if</span> (columnTypeName.empty()) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;         std::string exceptionText = <span class="stringliteral">&quot;The type of column &quot;</span>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;         exceptionText += bl[i];</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;         exceptionText += <span class="stringliteral">&quot; could not be guessed. Please specify one.&quot;</span>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;         <span class="keywordflow">throw</span> std::runtime_error(exceptionText.c_str());</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      columnTypeNames[i] = columnTypeName;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <span class="comment">// retrieve type of result of the action as a string</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <span class="keyword">auto</span> actionResultTypeClass = <a class="code" href="classTClass.html#a4a5443bb08096e49cb6b1bce1d07139d">TClass::GetClass</a>(art);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordflow">if</span> (!actionResultTypeClass) {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      std::string exceptionText = <span class="stringliteral">&quot;An error occurred while inferring the result type of an operation.&quot;</span>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(exceptionText.c_str());</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> actionResultTypeName = actionResultTypeClass-&gt;GetName();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <span class="comment">// retrieve type of action as a string</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <span class="keyword">auto</span> actionTypeClass = <a class="code" href="classTClass.html#a4a5443bb08096e49cb6b1bce1d07139d">TClass::GetClass</a>(at);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <span class="keywordflow">if</span> (!actionTypeClass) {</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      std::string exceptionText = <span class="stringliteral">&quot;An error occurred while inferring the action type of the operation.&quot;</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(exceptionText.c_str());</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> actionTypeName = actionTypeClass-&gt;GetName();</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <span class="keyword">auto</span> customColumnsCopy = <span class="keyword">new</span> <a class="code" href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html">RDFInternal::RBookedCustomColumns</a>(customCols); <span class="comment">// deleted in jitted CallBuildAction</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keyword">auto</span> customColumnsAddr = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(customColumnsCopy);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <span class="comment">// Build a call to CallBuildAction with the appropriate argument. When run through the interpreter, this code will</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <span class="comment">// just-in-time create an RAction object and it will assign it to its corresponding RJittedAction.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   std::stringstream createAction_str;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   createAction_str &lt;&lt; <span class="stringliteral">&quot;ROOT::Internal::RDF::CallBuildAction&quot;</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span> &lt;&lt; actionTypeName;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;colType : columnTypeNames)</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      createAction_str &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; colType;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <span class="comment">// on Windows, to prefix the hexadecimal value of a pointer with &#39;0x&#39;,</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <span class="comment">// one need to write: std::hex &lt;&lt; std::showbase &lt;&lt; (size_t)pointer</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   createAction_str &lt;&lt; <span class="stringliteral">&quot;&gt;(reinterpret_cast&lt;std::shared_ptr&lt;ROOT::Detail::RDF::RNodeBase&gt;*&gt;(&quot;</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                    &lt;&lt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(prevNode) &lt;&lt; <span class="stringliteral">&quot;), {&quot;</span>;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0u; i &lt; bl.size(); ++i) {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">if</span> (i != 0u)</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;         createAction_str &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      createAction_str &lt;&lt; <span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; bl[i] &lt;&lt; <span class="charliteral">&#39;&quot;&#39;</span>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   createAction_str &lt;&lt; <span class="stringliteral">&quot;}, &quot;</span> &lt;&lt; std::dec &lt;&lt; std::noshowbase &lt;&lt; nSlots &lt;&lt; <span class="stringliteral">&quot;, reinterpret_cast&lt;&quot;</span> &lt;&lt; actionResultTypeName</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;*&gt;(&quot;</span> &lt;&lt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(rOnHeap) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;, reinterpret_cast&lt;std::shared_ptr&lt;ROOT::Internal::RDF::RJittedAction&gt;*&gt;(&quot;</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                    &lt;&lt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">PrettyPrintAddr</a>(jittedActionOnHeap) &lt;&lt; <span class="stringliteral">&quot;),&quot;</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;reinterpret_cast&lt;ROOT::Internal::RDF::RBookedCustomColumns*&gt;(&quot;</span> &lt;&lt; customColumnsAddr &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;);&quot;</span>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="keywordflow">return</span> createAction_str.str();</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;}</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a659c710ab262726126fd16fd0b352198">  779</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a659c710ab262726126fd16fd0b352198">AtLeastOneEmptyString</a>(<span class="keyword">const</span> std::vector&lt;std::string_view&gt; strings)</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;{</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">s</a> : strings) {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">s</a>.empty())</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;}</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#a5dbfe8cbaae66b2124dc4aeab7e9655b">  788</a></span>&#160;std::shared_ptr&lt;RNodeBase&gt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a5dbfe8cbaae66b2124dc4aeab7e9655b">UpcastNode</a>(std::shared_ptr&lt;RNodeBase&gt; ptr)</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;{</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <span class="keywordflow">return</span> ptr;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;}</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">/// Given the desired number of columns and the user-provided list of columns:</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">/// * fallback to using the first nColumns default columns if needed (or throw if nColumns &gt; nDefaultColumns)</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">/// * check that selected column names refer to valid branches, custom columns or datasource columns (throw if not)</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">/// Return the list of selected column names.</span></div><div class="line"><a name="l00797"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#ac436d37d5c513f4c5b167fec12f596c5">  797</a></span>&#160;<span class="comment"></span><a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#ac436d37d5c513f4c5b167fec12f596c5">GetValidatedColumnNames</a>(<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html">RLoopManager</a> &amp;lm, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nColumns, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;columns,</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;validCustomColumns, <a class="code" href="classROOT_1_1RDF_1_1RDataSource.html">RDataSource</a> *ds)</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;{</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> &amp;defaultColumns = lm.<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a9bf7bf045f9836cb760f14ac45c31432">GetDefaultColumnNames</a>();</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="keyword">auto</span> selectedColumns = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a04be22015deb92209ee54bc3a3ed855a">SelectColumns</a>(nColumns, columns, defaultColumns);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> &amp;validBranchNames = lm.<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a3a7cb215987026d2484ac2116c76e151">GetBranchNames</a>();</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> unknownColumns = <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#a80fa931ee1243bf1c649222e85c3e2c4">FindUnknownColumns</a>(selectedColumns, validBranchNames, validCustomColumns,</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                                                  ds ? ds-&gt;<a class="code" href="classROOT_1_1RDF_1_1RDataSource.html#a6bf12cd2528e80dace77c643438ef374">GetColumnNames</a>() : <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a>{});</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <span class="keywordflow">if</span> (!unknownColumns.empty()) {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="comment">// throw</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      std::stringstream unknowns;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      std::string delim = unknownColumns.size() &gt; 1 ? <span class="stringliteral">&quot;s: &quot;</span> : <span class="stringliteral">&quot;: &quot;</span>; <span class="comment">// singular/plural</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;unknownColumn : unknownColumns) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;         unknowns &lt;&lt; delim &lt;&lt; unknownColumn;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;         delim = <span class="charliteral">&#39;,&#39;</span>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Unknown column&quot;</span> + unknowns.str());</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <span class="comment">// Now we need to check within the aliases if some of the yet unknown names can be recovered</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keyword">auto</span> &amp;aliasMap = lm.<a class="code" href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#aea327234d337af6dd901779ffcc81745">GetAliasMap</a>();</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <span class="keyword">auto</span> aliasMapEnd = aliasMap.end();</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> idx : <a class="code" href="classROOT_1_1TSeq.html">ROOT::TSeqU</a>(selectedColumns.size())) {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;colName = selectedColumns[idx];</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> aliasColumnNameIt = aliasMap.find(colName);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordflow">if</span> (aliasMapEnd != aliasColumnNameIt) {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;         selectedColumns[idx] = aliasColumnNameIt-&gt;second;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   }</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   <span class="keywordflow">return</span> selectedColumns;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">/// Return a bitset each element of which indicates whether the corresponding element in `selectedColumns` is the</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">/// name of a column that must be defined via datasource. All elements of the returned vector are false if no</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">/// data-source is present.</span></div><div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="namespaceROOT_1_1Internal_1_1RDF.html#adc4f7df837eec76757e21429c2a347af">  835</a></span>&#160;<span class="comment"></span>std::vector&lt;bool&gt; <a class="code" href="namespaceROOT_1_1Internal_1_1RDF.html#adc4f7df837eec76757e21429c2a347af">FindUndefinedDSColumns</a>(<span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;requestedCols, <span class="keyword">const</span> <a class="code" href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ColumnNames_t</a> &amp;definedCols)</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;{</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span> nColumns = requestedCols.size();</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   std::vector&lt;bool&gt; mustBeDefined(nColumns, <span class="keyword">false</span>);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0u; i &lt; nColumns; ++i)</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      mustBeDefined[i] = std::find(definedCols.begin(), definedCols.end(), requestedCols[i]) == definedCols.end();</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <span class="keywordflow">return</span> mustBeDefined;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;} <span class="comment">// namespace RDF</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;} <span class="comment">// namespace Internal</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;} <span class="comment">// namespace ROOT</span></div><div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RLoopManager_html_a7fa355faf48f254b33d2dd5900ebc73b"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a7fa355faf48f254b33d2dd5900ebc73b">ROOT::Detail::RDF::RLoopManager::JitDeclarations</a></div><div class="ttdeci">void JitDeclarations()</div><div class="ttdoc">Declare to the interpreter type aliases and other entities required by RDF jitted nodes...</div><div class="ttdef"><b>Definition:</b> <a href="RLoopManager_8cxx_source.html#l00458">RLoopManager.cxx:458</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_af15630a593c168e60d1cdc04dd405759"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#af15630a593c168e60d1cdc04dd405759">ROOT::Internal::RDF::GetTopLevelBranchNamesImpl</a></div><div class="ttdeci">void GetTopLevelBranchNamesImpl(TTree &amp;t, std::set&lt; std::string &gt; &amp;bNamesReg, ColumnNames_t &amp;bNames, std::set&lt; TTree *&gt; &amp;analysedTrees)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00205">RDFInterfaceUtils.cxx:205</a></div></div>
<div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RLoopManager_html"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html">ROOT::Detail::RDF::RLoopManager</a></div><div class="ttdoc">The head node of a RDF computation graph. </div><div class="ttdef"><b>Definition:</b> <a href="RLoopManager_8hxx_source.html#l00056">RLoopManager.hxx:56</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a600a6d92859c7df4601b92b25a68e795"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a600a6d92859c7df4601b92b25a68e795">ROOT::Internal::RDF::GetTopLevelBranchNames</a></div><div class="ttdeci">ColumnNames_t GetTopLevelBranchNames(TTree &amp;t)</div><div class="ttdoc">Get all the top-level branches names, including the ones of the friend trees. </div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00236">RDFInterfaceUtils.cxx:236</a></div></div>
<div class="ttc" id="TClass_8h_html"><div class="ttname"><a href="TClass_8h.html">TClass.h</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a6a02589b09621621360d24444a7bdb34"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a6a02589b09621621360d24444a7bdb34">ROOT::Internal::RDF::ReplaceDots</a></div><div class="ttdeci">std::vector&lt; std::string &gt; ReplaceDots(const ColumnNames_t &amp;colNames)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00465">RDFInterfaceUtils.cxx:465</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a659c710ab262726126fd16fd0b352198"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a659c710ab262726126fd16fd0b352198">ROOT::Internal::RDF::AtLeastOneEmptyString</a></div><div class="ttdeci">bool AtLeastOneEmptyString(const std::vector&lt; std::string_view &gt; strings)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00779">RDFInterfaceUtils.cxx:779</a></div></div>
<div class="ttc" id="namespaceROOT_html"><div class="ttname"><a href="namespaceROOT.html">ROOT</a></div><div class="ttdoc">Namespace for new ROOT classes and functions. </div><div class="ttdef"><b>Definition:</b> <a href="StringConv_8hxx_source.html#l00021">StringConv.hxx:21</a></div></div>
<div class="ttc" id="RtypesCore_8h_html"><div class="ttname"><a href="RtypesCore_8h.html">RtypesCore.h</a></div></div>
<div class="ttc" id="classROOT_1_1RDF_1_1RDataSource_html_a6bf12cd2528e80dace77c643438ef374"><div class="ttname"><a href="classROOT_1_1RDF_1_1RDataSource.html#a6bf12cd2528e80dace77c643438ef374">ROOT::RDF::RDataSource::GetColumnNames</a></div><div class="ttdeci">virtual const std::vector&lt; std::string &gt; &amp; GetColumnNames() const =0</div><div class="ttdoc">Returns a reference to the collection of the dataset&amp;#39;s column names. </div></div>
<div class="ttc" id="TClassEdit_8h_html"><div class="ttname"><a href="TClassEdit_8h.html">TClassEdit.h</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a9ad2b45e96ec8a29c672c800e8a2798d"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a9ad2b45e96ec8a29c672c800e8a2798d">ROOT::Internal::RDF::IsInternalColumn</a></div><div class="ttdeci">bool IsInternalColumn(std::string_view colName)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00367">RDFInterfaceUtils.cxx:367</a></div></div>
<div class="ttc" id="TPRegexp_8h_html"><div class="ttname"><a href="TPRegexp_8h.html">TPRegexp.h</a></div></div>
<div class="ttc" id="RSha256_8hxx_html_aa4074fe219868f65efa393f656020fed"><div class="ttname"><a href="RSha256_8hxx.html#aa4074fe219868f65efa393f656020fed">s0</a></div><div class="ttdeci">#define s0(x)</div><div class="ttdef"><b>Definition:</b> <a href="RSha256_8hxx_source.html#l00090">RSha256.hxx:90</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a078ecba4af184c99c92c5738739cb42b"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a078ecba4af184c99c92c5738739cb42b">ROOT::Internal::RDF::BuildLambdaString</a></div><div class="ttdeci">std::string BuildLambdaString(const std::string &amp;expr, const ColumnNames_t &amp;vars, const ColumnNames_t &amp;varTypes, bool hasReturnStmt)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00565">RDFInterfaceUtils.cxx:565</a></div></div>
<div class="ttc" id="classTPRegexp_html"><div class="ttname"><a href="classTPRegexp.html">TPRegexp</a></div><div class="ttdef"><b>Definition:</b> <a href="TPRegexp_8h_source.html#l00036">TPRegexp.h:36</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a3a280022341ccc767bf41c91c86cea3d"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a3a280022341ccc767bf41c91c86cea3d">ROOT::Internal::RDF::Replace</a></div><div class="ttdeci">unsigned int Replace(std::string &amp;s, const std::string what, const std::string withWhat)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00382">RDFInterfaceUtils.cxx:382</a></div></div>
<div class="ttc" id="TTree_8h_html"><div class="ttname"><a href="TTree_8h.html">TTree.h</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_ae608e3c564317d4d7ece22ccec5c6568"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#ae608e3c564317d4d7ece22ccec5c6568">ROOT::Internal::RDF::BookDefineJit</a></div><div class="ttdeci">void BookDefineJit(std::string_view name, std::string_view expression, RLoopManager &amp;lm, RDataSource *ds, const std::shared_ptr&lt; RJittedCustomColumn &gt; &amp;jittedCustomColumn, const RDFInternal::RBookedCustomColumns &amp;customCols, const ColumnNames_t &amp;branches)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00652">RDFInterfaceUtils.cxx:652</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_aaaa39031940432053c4f26ed53c4c75e"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#aaaa39031940432053c4f26ed53c4c75e">ROOT::Internal::RDF::FindUsedColumnNames</a></div><div class="ttdeci">std::vector&lt; std::string &gt; FindUsedColumnNames(std::string_view expression, ColumnNames_t branches, const ColumnNames_t &amp;customColumns, const ColumnNames_t &amp;dsColumns, const std::map&lt; std::string, std::string &gt; &amp;aliasMap)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00396">RDFInterfaceUtils.cxx:396</a></div></div>
<div class="ttc" id="classTTree_html_a7d1ebdc3c5887268693d5dd9d3bbe9fb"><div class="ttname"><a href="classTTree.html#a7d1ebdc3c5887268693d5dd9d3bbe9fb">TTree::GetListOfFriends</a></div><div class="ttdeci">virtual TList * GetListOfFriends() const</div><div class="ttdef"><b>Definition:</b> <a href="TTree_8h_source.html#l00429">TTree.h:429</a></div></div>
<div class="ttc" id="classTRegexp_html"><div class="ttname"><a href="classTRegexp.html">TRegexp</a></div><div class="ttdoc">Regular expression class. </div><div class="ttdef"><b>Definition:</b> <a href="TRegexp_8h_source.html#l00031">TRegexp.h:31</a></div></div>
<div class="ttc" id="TError_8h_html_a0d9522d2162c4791a430247c1522946d"><div class="ttname"><a href="TError_8h.html#a0d9522d2162c4791a430247c1522946d">R__ASSERT</a></div><div class="ttdeci">#define R__ASSERT(e)</div><div class="ttdef"><b>Definition:</b> <a href="TError_8h_source.html#l00096">TError.h:96</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_aab37c96b52a6b9f3fb926bcb865694f7"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#aab37c96b52a6b9f3fb926bcb865694f7">ROOT::Internal::RDF::ColumnName2ColumnTypeName</a></div><div class="ttdeci">std::string ColumnName2ColumnTypeName(const std::string &amp;colName, unsigned int namespaceID, TTree *tree, RDataSource *ds, bool isCustomColumn, bool vector2rvec, unsigned int customColID)</div><div class="ttdoc">Return a string containing the type of the given branch. </div><div class="ttdef"><b>Definition:</b> <a href="RDFUtils_8cxx_source.html#l00197">RDFUtils.cxx:197</a></div></div>
<div class="ttc" id="TInterpreter_8h_html_a943f074408c15163f1edf41c2dcd95ac"><div class="ttname"><a href="TInterpreter_8h.html#a943f074408c15163f1edf41c2dcd95ac">gInterpreter</a></div><div class="ttdeci">#define gInterpreter</div><div class="ttdef"><b>Definition:</b> <a href="TInterpreter_8h_source.html#l00552">TInterpreter.h:552</a></div></div>
<div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RLoopManager_html_a5ad043b731972ff5988643292c91e9e2"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a5ad043b731972ff5988643292c91e9e2">ROOT::Detail::RDF::RLoopManager::ToJitDeclare</a></div><div class="ttdeci">void ToJitDeclare(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="RLoopManager_8hxx_source.html#l00171">RLoopManager.hxx:171</a></div></div>
<div class="ttc" id="TInterpreter_8h_html"><div class="ttname"><a href="TInterpreter_8h.html">TInterpreter.h</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a5dbfe8cbaae66b2124dc4aeab7e9655b"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a5dbfe8cbaae66b2124dc4aeab7e9655b">ROOT::Internal::RDF::UpcastNode</a></div><div class="ttdeci">std::shared_ptr&lt; RNodeBase &gt; UpcastNode(std::shared_ptr&lt; RNodeBase &gt; ptr)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00788">RDFInterfaceUtils.cxx:788</a></div></div>
<div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RLoopManager_html_a5d705c539f55eecc7ec0da28e95300b4"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a5d705c539f55eecc7ec0da28e95300b4">ROOT::Detail::RDF::RLoopManager::ToJitExec</a></div><div class="ttdeci">void ToJitExec(const std::string &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="RLoopManager_8hxx_source.html#l00172">RLoopManager.hxx:172</a></div></div>
<div class="ttc" id="TFriendElement_8h_html"><div class="ttname"><a href="TFriendElement_8h.html">TFriendElement.h</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a04be22015deb92209ee54bc3a3ed855a"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a04be22015deb92209ee54bc3a3ed855a">ROOT::Internal::RDF::SelectColumns</a></div><div class="ttdeci">const ColumnNames_t SelectColumns(unsigned int nRequiredNames, const ColumnNames_t &amp;names, const ColumnNames_t &amp;defaultNames)</div><div class="ttdoc">Choose between local column names or default column names, throw in case of errors. </div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00322">RDFInterfaceUtils.cxx:322</a></div></div>
<div class="ttc" id="classTTree_html_acd351ad0dda7aa50e2ac9254b3dc9f0e"><div class="ttname"><a href="classTTree.html#acd351ad0dda7aa50e2ac9254b3dc9f0e">TTree::GetListOfBranches</a></div><div class="ttdeci">virtual TObjArray * GetListOfBranches()</div><div class="ttdef"><b>Definition:</b> <a href="TTree_8h_source.html#l00427">TTree.h:427</a></div></div>
<div class="ttc" id="TSeq_8hxx_html"><div class="ttname"><a href="TSeq_8hxx.html">TSeq.hxx</a></div></div>
<div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RLoopManager_html_a9bf7bf045f9836cb760f14ac45c31432"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a9bf7bf045f9836cb760f14ac45c31432">ROOT::Detail::RDF::RLoopManager::GetDefaultColumnNames</a></div><div class="ttdeci">const ColumnNames_t &amp; GetDefaultColumnNames() const</div><div class="ttdoc">Return the list of default columns  empty if none was provided when constructing the RDataFrame...</div><div class="ttdef"><b>Definition:</b> <a href="RLoopManager_8cxx_source.html#l00521">RLoopManager.cxx:521</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a1fea79075ea514916b6fdb9fbbc8bb9c"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a1fea79075ea514916b6fdb9fbbc8bb9c">ROOT::Internal::RDF::IsValidCppVarName</a></div><div class="ttdeci">bool IsValidCppVarName(const std::string &amp;var)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00245">RDFInterfaceUtils.cxx:245</a></div></div>
<div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RLoopManager_html_a3a7cb215987026d2484ac2116c76e151"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a3a7cb215987026d2484ac2116c76e151">ROOT::Detail::RDF::RLoopManager::GetBranchNames</a></div><div class="ttdeci">const ColumnNames_t &amp; GetBranchNames()</div><div class="ttdoc">Return all valid TTree::Branch names (caching results for subsequent calls). </div><div class="ttdef"><b>Definition:</b> <a href="RLoopManager_8cxx_source.html#l00626">RLoopManager.cxx:626</a></div></div>
<div class="ttc" id="namespaceTClassEdit_html_a77a03f5c3e149fe07f06e43560c6e4db"><div class="ttname"><a href="namespaceTClassEdit.html#a77a03f5c3e149fe07f06e43560c6e4db">TClassEdit::DemangleTypeIdName</a></div><div class="ttdeci">char * DemangleTypeIdName(const std::type_info &amp;ti, int &amp;errorCode)</div><div class="ttdoc">Demangle in a portable way the type id name. </div><div class="ttdef"><b>Definition:</b> <a href="TClassEdit_8cxx_source.html#l02053">TClassEdit.cxx:2053</a></div></div>
<div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RJittedFilter_html"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RJittedFilter.html">ROOT::Detail::RDF::RJittedFilter</a></div><div class="ttdoc">A wrapper around a concrete RFilter, which forwards all calls to it RJittedFilter is the type of the ...</div><div class="ttdef"><b>Definition:</b> <a href="RJittedFilter_8hxx_source.html#l00039">RJittedFilter.hxx:39</a></div></div>
<div class="ttc" id="namespaceTGeant4Unit_html_a5d450e80998065902b102dca2a69066a"><div class="ttname"><a href="namespaceTGeant4Unit.html#a5d450e80998065902b102dca2a69066a">TGeant4Unit::s</a></div><div class="ttdeci">static constexpr double s</div><div class="ttdef"><b>Definition:</b> <a href="TGeant4SystemOfUnits_8h_source.html#l00162">TGeant4SystemOfUnits.h:162</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a8e5e8b5d2011696d40f3fd6d4c5ee500"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a8e5e8b5d2011696d40f3fd6d4c5ee500">ROOT::Internal::RDF::GetFilterNames</a></div><div class="ttdeci">std::vector&lt; std::string &gt; GetFilterNames(const std::shared_ptr&lt; RLoopManager &gt; &amp;loopManager)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00376">RDFInterfaceUtils.cxx:376</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a3e3ea361a4d91bfe44ea556a615ccd86"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a3e3ea361a4d91bfe44ea556a615ccd86">ROOT::Internal::RDF::CreateSnaphotRDF</a></div><div class="ttdeci">HeadNode_t CreateSnaphotRDF(const ColumnNames_t &amp;validCols, std::string_view treeName, std::string_view fileName, bool isLazy, RLoopManager &amp;loopManager, std::unique_ptr&lt; RDFInternal::RActionBase &gt; actionPtr)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00121">RDFInterfaceUtils.cxx:121</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a80fa931ee1243bf1c649222e85c3e2c4"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a80fa931ee1243bf1c649222e85c3e2c4">ROOT::Internal::RDF::FindUnknownColumns</a></div><div class="ttdeci">ColumnNames_t FindUnknownColumns(const ColumnNames_t &amp;requiredCols, const ColumnNames_t &amp;datasetColumns, const ColumnNames_t &amp;definedCols, const ColumnNames_t &amp;dataSourceColumns)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00347">RDFInterfaceUtils.cxx:347</a></div></div>
<div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RLoopManager_html_a70988d8b1b7175fea6dc5966ff1922e2"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a70988d8b1b7175fea6dc5966ff1922e2">ROOT::Detail::RDF::RLoopManager::GetID</a></div><div class="ttdeci">unsigned int GetID() const</div><div class="ttdef"><b>Definition:</b> <a href="RLoopManager_8hxx_source.html#l00176">RLoopManager.hxx:176</a></div></div>
<div class="ttc" id="classTTree_html_a0b37fd6f19f6ef70b37c36b64242c2f4"><div class="ttname"><a href="classTTree.html#a0b37fd6f19f6ef70b37c36b64242c2f4">TTree::GetBranch</a></div><div class="ttdeci">virtual TBranch * GetBranch(const char *name)</div><div class="ttdoc">Return pointer to the branch with the given name in this tree or its friends. </div><div class="ttdef"><b>Definition:</b> <a href="TTree_8cxx_source.html#l05068">TTree.cxx:5068</a></div></div>
<div class="ttc" id="TString_8h_html"><div class="ttname"><a href="TString_8h.html">TString.h</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_adc4f7df837eec76757e21429c2a347af"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#adc4f7df837eec76757e21429c2a347af">ROOT::Internal::RDF::FindUndefinedDSColumns</a></div><div class="ttdeci">std::vector&lt; bool &gt; FindUndefinedDSColumns(const ColumnNames_t &amp;requestedCols, const ColumnNames_t &amp;definedCols)</div><div class="ttdoc">Return a bitset each element of which indicates whether the corresponding element in selectedColumns ...</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00835">RDFInterfaceUtils.cxx:835</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a6209f558c749b8c5cb3460776bfb4fc7"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a6209f558c749b8c5cb3460776bfb4fc7">ROOT::Internal::RDF::DemangleTypeIdName</a></div><div class="ttdeci">std::string DemangleTypeIdName(const std::type_info &amp;typeInfo)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00139">RDFInterfaceUtils.cxx:139</a></div></div>
<div class="ttc" id="TDirectory_8h_html"><div class="ttname"><a href="TDirectory_8h.html">TDirectory.h</a></div></div>
<div class="ttc" id="Dict_8h_html_ae4dfd0ff80708edc0ec19fe36e65d9a7"><div class="ttname"><a href="Dict_8h.html#ae4dfd0ff80708edc0ec19fe36e65d9a7">v</a></div><div class="ttdeci">SVector&lt; double, 2 &gt; v</div><div class="ttdef"><b>Definition:</b> <a href="Dict_8h_source.html#l00005">Dict.h:5</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_af8022192a97bfd1a641ea0f814444ab0"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#af8022192a97bfd1a641ea0f814444ab0">ROOT::Internal::RDF::CheckCustomColumn</a></div><div class="ttdeci">void CheckCustomColumn(std::string_view definedCol, TTree *treePtr, const ColumnNames_t &amp;customCols, const std::map&lt; std::string, std::string &gt; &amp;aliasMap, const ColumnNames_t &amp;dataSourceColumns)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00267">RDFInterfaceUtils.cxx:267</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_aea1372ac1298640821745b93860d74d7"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#aea1372ac1298640821745b93860d74d7">ROOT::Internal::RDF::BookFilterJit</a></div><div class="ttdeci">void BookFilterJit(RJittedFilter *jittedFilter, void *prevNodeOnHeap, std::string_view name, std::string_view expression, const std::map&lt; std::string, std::string &gt; &amp;aliasMap, const ColumnNames_t &amp;branches, const RDFInternal::RBookedCustomColumns &amp;customCols, TTree *tree, RDataSource *ds, unsigned int namespaceID)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00599">RDFInterfaceUtils.cxx:599</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_adbf564a5417ebe04b73777b134a6e95d"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#adbf564a5417ebe04b73777b134a6e95d">ROOT::Internal::RDF::TryToJitExpression</a></div><div class="ttdeci">void TryToJitExpression(const std::string &amp;expression, const ColumnNames_t &amp;colNames, const std::vector&lt; std::string &gt; &amp;colTypes, bool hasReturnStmt)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00536">RDFInterfaceUtils.cxx:536</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Detail_1_1RDF_html_ac9c3a5813619e855421a8513f0e6f45b"><div class="ttname"><a href="namespaceROOT_1_1Detail_1_1RDF.html#ac9c3a5813619e855421a8513f0e6f45b">ROOT::Detail::RDF::MakeResultPtr</a></div><div class="ttdeci">RResultPtr&lt; T &gt; MakeResultPtr(const std::shared_ptr&lt; T &gt; &amp;r, RLoopManager &amp;df, std::shared_ptr&lt; ROOT::Internal::RDF::RActionBase &gt; actionPtr)</div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a5d5f126919a0a3c272eda563da2aac57"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a5d5f126919a0a3c272eda563da2aac57">ROOT::Internal::RDF::GetPotentialColumnNames</a></div><div class="ttdeci">std::set&lt; std::string &gt; GetPotentialColumnNames(const std::string &amp;expr)</div><div class="ttdoc">A tokeniser for the expression which is in C++ The goal is to extract all names which are potentially...</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00070">RDFInterfaceUtils.cxx:70</a></div></div>
<div class="ttc" id="RSha256_8hxx_html_ac1e4ed4e56436a432900cad5a1225731"><div class="ttname"><a href="RSha256_8hxx.html#ac1e4ed4e56436a432900cad5a1225731">s1</a></div><div class="ttdeci">#define s1(x)</div><div class="ttdef"><b>Definition:</b> <a href="RSha256_8hxx_source.html#l00091">RSha256.hxx:91</a></div></div>
<div class="ttc" id="TChain_8h_html"><div class="ttname"><a href="TChain_8h.html">TChain.h</a></div></div>
<div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RNodeBase_html_adf4239ff9b19151f8628aeb1680275e5"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RNodeBase.html#adf4239ff9b19151f8628aeb1680275e5">ROOT::Detail::RDF::RNodeBase::GetLoopManagerUnchecked</a></div><div class="ttdeci">virtual RLoopManager * GetLoopManagerUnchecked()</div><div class="ttdef"><b>Definition:</b> <a href="RNodeBase_8hxx_source.html#l00064">RNodeBase.hxx:64</a></div></div>
<div class="ttc" id="RtypesCore_8h_html_a649fe0f43fc2d393d99c5d39848f96b9"><div class="ttname"><a href="RtypesCore_8h.html#a649fe0f43fc2d393d99c5d39848f96b9">Ssiz_t</a></div><div class="ttdeci">int Ssiz_t</div><div class="ttdef"><b>Definition:</b> <a href="RtypesCore_8h_source.html#l00063">RtypesCore.h:63</a></div></div>
<div class="ttc" id="InterfaceUtils_8hxx_html"><div class="ttname"><a href="InterfaceUtils_8hxx.html">InterfaceUtils.hxx</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_ac436d37d5c513f4c5b167fec12f596c5"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#ac436d37d5c513f4c5b167fec12f596c5">ROOT::Internal::RDF::GetValidatedColumnNames</a></div><div class="ttdeci">ColumnNames_t GetValidatedColumnNames(RLoopManager &amp;lm, const unsigned int nColumns, const ColumnNames_t &amp;columns, const ColumnNames_t &amp;validCustomColumns, RDataSource *ds)</div><div class="ttdoc">Given the desired number of columns and the user-provided list of columns: </div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00797">RDFInterfaceUtils.cxx:797</a></div></div>
<div class="ttc" id="classTRegexp_html_abdc7471c3a0d8d5c91a6354a58f62002"><div class="ttname"><a href="classTRegexp.html#abdc7471c3a0d8d5c91a6354a58f62002">TRegexp::Index</a></div><div class="ttdeci">Ssiz_t Index(const TString &amp;str, Ssiz_t *len, Ssiz_t start=0) const</div><div class="ttdoc">Find the first occurrence of the regexp in string and return the position, or -1 if there is no match...</div><div class="ttdef"><b>Definition:</b> <a href="TRegexp_8cxx_source.html#l00209">TRegexp.cxx:209</a></div></div>
<div class="ttc" id="entrylist__figure1_8C_html_af575f17e6be3f269b86b041a60560dbf"><div class="ttname"><a href="entrylist__figure1_8C.html#af575f17e6be3f269b86b041a60560dbf">text</a></div><div class="ttdeci">TText * text</div><div class="ttdef"><b>Definition:</b> <a href="entrylist__figure1_8C_source.html#l00010">entrylist_figure1.C:10</a></div></div>
<div class="ttc" id="classTClass_html_a4a5443bb08096e49cb6b1bce1d07139d"><div class="ttname"><a href="classTClass.html#a4a5443bb08096e49cb6b1bce1d07139d">TClass::GetClass</a></div><div class="ttdeci">static TClass * GetClass(const char *name, Bool_t load=kTRUE, Bool_t silent=kFALSE)</div></div>
<div class="ttc" id="classROOT_1_1TSeq_html"><div class="ttname"><a href="classROOT_1_1TSeq.html">ROOT::TSeq</a></div><div class="ttdoc">  A pseudo container class which is a generator of indices. </div><div class="ttdef"><b>Definition:</b> <a href="TSeq_8hxx_source.html#l00066">TSeq.hxx:66</a></div></div>
<div class="ttc" id="TGX11_8cxx_html_ac765329451135abec74c45e1897abf26"><div class="ttname"><a href="TGX11_8cxx.html#ac765329451135abec74c45e1897abf26">type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="TGX11_8cxx_source.html#l00120">TGX11.cxx:120</a></div></div>
<div class="ttc" id="TRegexp_8h_html"><div class="ttname"><a href="TRegexp_8h.html">TRegexp.h</a></div></div>
<div class="ttc" id="RooMathCoreReg_8cxx_html_a9ade5aa78cf41af74bbde701922393a6"><div class="ttname"><a href="RooMathCoreReg_8cxx.html#a9ade5aa78cf41af74bbde701922393a6">dummy</a></div><div class="ttdeci">static RooMathCoreReg dummy</div><div class="ttdef"><b>Definition:</b> <a href="RooMathCoreReg_8cxx_source.html#l00027">RooMathCoreReg.cxx:27</a></div></div>
<div class="ttc" id="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns_html_aaed6dfb91b47f46e9cd29989af0a075b"><div class="ttname"><a href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html#aaed6dfb91b47f46e9cd29989af0a075b">ROOT::Internal::RDF::RBookedCustomColumns::GetColumns</a></div><div class="ttdeci">const RCustomColumnBasePtrMap_t &amp; GetColumns() const</div><div class="ttdoc">Returns the list of the pointers to the defined columns. </div><div class="ttdef"><b>Definition:</b> <a href="RBookedCustomColumns_8hxx_source.html#l00085">RBookedCustomColumns.hxx:85</a></div></div>
<div class="ttc" id="classTDirectory_1_1TContext_html"><div class="ttname"><a href="classTDirectory_1_1TContext.html">TDirectory::TContext</a></div><div class="ttdef"><b>Definition:</b> <a href="TDirectory_8h_source.html#l00041">TDirectory.h:41</a></div></div>
<div class="ttc" id="TObject_8h_html"><div class="ttname"><a href="TObject_8h.html">TObject.h</a></div></div>
<div class="ttc" id="RStringView_8hxx_html"><div class="ttname"><a href="RStringView_8hxx.html">RStringView.hxx</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a57c3bfc95218bf9c1508a3afa9602f32"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a57c3bfc95218bf9c1508a3afa9602f32">ROOT::Internal::RDF::PrettyPrintAddr</a></div><div class="ttdeci">std::string PrettyPrintAddr(const void *const addr)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00588">RDFInterfaceUtils.cxx:588</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a611f2443179dab078fb17dc7d3763647"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a611f2443179dab078fb17dc7d3763647">ROOT::Internal::RDF::CheckTypesAndPars</a></div><div class="ttdeci">void CheckTypesAndPars(unsigned int nTemplateParams, unsigned int nColumnNames)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00308">RDFInterfaceUtils.cxx:308</a></div></div>
<div class="ttc" id="RInterface_8hxx_html"><div class="ttname"><a href="RInterface_8hxx.html">RInterface.hxx</a></div></div>
<div class="ttc" id="RDataFrame_8hxx_html"><div class="ttname"><a href="RDataFrame_8hxx.html">RDataFrame.hxx</a></div></div>
<div class="ttc" id="classTFriendElement_html"><div class="ttname"><a href="classTFriendElement.html">TFriendElement</a></div><div class="ttdoc">A TFriendElement TF describes a TTree object TF in a file. </div><div class="ttdef"><b>Definition:</b> <a href="TFriendElement_8h_source.html#l00033">TFriendElement.h:33</a></div></div>
<div class="ttc" id="namespaceTGeant4Unit_html_a9b0630f8addb68eecc990baa3a5e6e15"><div class="ttname"><a href="namespaceTGeant4Unit.html#a9b0630f8addb68eecc990baa3a5e6e15">TGeant4Unit::ns</a></div><div class="ttdeci">static constexpr double ns</div><div class="ttdef"><b>Definition:</b> <a href="TGeant4SystemOfUnits_8h_source.html#l00161">TGeant4SystemOfUnits.h:161</a></div></div>
<div class="ttc" id="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns_html_aa832512be97dfeb38067877ea3931fda"><div class="ttname"><a href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html#aa832512be97dfeb38067877ea3931fda">ROOT::Internal::RDF::RBookedCustomColumns::HasName</a></div><div class="ttdeci">bool HasName(std::string_view name) const</div><div class="ttdoc">Check if the provided name is tracked in the names list. </div><div class="ttdef"><b>Definition:</b> <a href="RDFBookedCustomColumns_8cxx_source.html#l00007">RDFBookedCustomColumns.cxx:7</a></div></div>
<div class="ttc" id="RSha256_8hxx_html_a63f410abde93141c9013b7d3f3971738"><div class="ttname"><a href="RSha256_8hxx.html#a63f410abde93141c9013b7d3f3971738">c</a></div><div class="ttdeci">#define c(i)</div><div class="ttdef"><b>Definition:</b> <a href="RSha256_8hxx_source.html#l00101">RSha256.hxx:101</a></div></div>
<div class="ttc" id="namespacetree_html"><div class="ttname"><a href="namespacetree.html">tree</a></div><div class="ttdef"><b>Definition:</b> <a href="tree_8py_source.html#l00001">tree.py:1</a></div></div>
<div class="ttc" id="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns_html"><div class="ttname"><a href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html">ROOT::Internal::RDF::RBookedCustomColumns</a></div><div class="ttdoc">Encapsulates the columns defined by the user. </div><div class="ttdef"><b>Definition:</b> <a href="RBookedCustomColumns_8hxx_source.html#l00039">RBookedCustomColumns.hxx:39</a></div></div>
<div class="ttc" id="classTTree_html"><div class="ttname"><a href="classTTree.html">TTree</a></div><div class="ttdoc">A TTree represents a columnar dataset. </div><div class="ttdef"><b>Definition:</b> <a href="TTree_8h_source.html#l00071">TTree.h:71</a></div></div>
<div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RLoopManager_html_aea327234d337af6dd901779ffcc81745"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#aea327234d337af6dd901779ffcc81745">ROOT::Detail::RDF::RLoopManager::GetAliasMap</a></div><div class="ttdeci">const std::map&lt; std::string, std::string &gt; &amp; GetAliasMap() const</div><div class="ttdef"><b>Definition:</b> <a href="RLoopManager_8hxx_source.html#l00174">RLoopManager.hxx:174</a></div></div>
<div class="ttc" id="classROOT_1_1Detail_1_1RDF_1_1RLoopManager_html_a4f88c4e7b6110c978af0e0297d05dc69"><div class="ttname"><a href="classROOT_1_1Detail_1_1RDF_1_1RLoopManager.html#a4f88c4e7b6110c978af0e0297d05dc69">ROOT::Detail::RDF::RLoopManager::GetTree</a></div><div class="ttdeci">TTree * GetTree() const</div><div class="ttdef"><b>Definition:</b> <a href="RLoopManager_8cxx_source.html#l00526">RLoopManager.cxx:526</a></div></div>
<div class="ttc" id="classROOT_1_1RDF_1_1RDataSource_html"><div class="ttname"><a href="classROOT_1_1RDF_1_1RDataSource.html">ROOT::RDF::RDataSource</a></div><div class="ttdoc"> RDataSource defines an API that RDataFrame can use to read arbitrary data formats. </div><div class="ttdef"><b>Definition:</b> <a href="RDataSource_8hxx_source.html#l00105">RDataSource.hxx:105</a></div></div>
<div class="ttc" id="classTPRegexp_html_a5dd1c3547ee19ca51a9d3a7fc05f587f"><div class="ttname"><a href="classTPRegexp.html#a5dd1c3547ee19ca51a9d3a7fc05f587f">TPRegexp::Match</a></div><div class="ttdeci">Int_t Match(const TString &amp;s, const TString &amp;mods=&quot;&quot;, Int_t start=0, Int_t nMaxMatch=10, TArrayI *pos=0)</div><div class="ttdoc">The number of matches is returned, this equals the full match + sub-pattern matches. </div><div class="ttdef"><b>Definition:</b> <a href="TPRegexp_8cxx_source.html#l00339">TPRegexp.cxx:339</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a8b4a7077aae2890888ce724a6dec8734"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a8b4a7077aae2890888ce724a6dec8734">ROOT::Internal::RDF::JitBuildAction</a></div><div class="ttdeci">std::string JitBuildAction(const ColumnNames_t &amp;bl, void *prevNode, const std::type_info &amp;art, const std::type_info &amp;at, void *rOnHeap, TTree *tree, const unsigned int nSlots, const RDFInternal::RBookedCustomColumns &amp;customCols, RDataSource *ds, std::shared_ptr&lt; RJittedAction &gt; *jittedActionOnHeap, unsigned int namespaceID)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00712">RDFInterfaceUtils.cxx:712</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a738cfab9e550551b4e33aa0d20a24dd3"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a738cfab9e550551b4e33aa0d20a24dd3">ROOT::Internal::RDF::ColumnTypesAsString</a></div><div class="ttdeci">std::vector&lt; std::string &gt; ColumnTypesAsString(ColumnNames_t &amp;colNames, ColumnNames_t &amp;varNames, const std::map&lt; std::string, std::string &gt; &amp;aliasMap, TTree *tree, RDataSource *ds, std::string &amp;expr, unsigned int namespaceID, const RDFInternal::RBookedCustomColumns &amp;customCols)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00479">RDFInterfaceUtils.cxx:479</a></div></div>
<div class="ttc" id="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns_html_a98ea12457bf166305eb35047e27832ca"><div class="ttname"><a href="classROOT_1_1Internal_1_1RDF_1_1RBookedCustomColumns.html#a98ea12457bf166305eb35047e27832ca">ROOT::Internal::RDF::RBookedCustomColumns::GetNames</a></div><div class="ttdeci">ColumnNames_t GetNames() const</div><div class="ttdoc">Returns the list of the names of the defined columns. </div><div class="ttdef"><b>Definition:</b> <a href="RBookedCustomColumns_8hxx_source.html#l00081">RBookedCustomColumns.hxx:81</a></div></div>
<div class="ttc" id="namespaceROOT_html_a73d76a9e8633d9e5f26d7f7aad7da94a"><div class="ttname"><a href="namespaceROOT.html#a73d76a9e8633d9e5f26d7f7aad7da94a">ROOT::ColumnNames_t</a></div><div class="ttdeci">ROOT::Detail::RDF::ColumnNames_t ColumnNames_t</div><div class="ttdef"><b>Definition:</b> <a href="RDataFrame_8cxx_source.html#l00788">RDataFrame.cxx:788</a></div></div>
<div class="ttc" id="classTCollection_html_a3cc7d60e72049ef09935e5020c3bbf9f"><div class="ttname"><a href="classTCollection.html#a3cc7d60e72049ef09935e5020c3bbf9f">TCollection::GetName</a></div><div class="ttdeci">virtual const char * GetName() const</div><div class="ttdoc">Return name of this collection. </div><div class="ttdef"><b>Definition:</b> <a href="TCollection_8cxx_source.html#l00349">TCollection.cxx:349</a></div></div>
<div class="ttc" id="namespaceROOT_1_1Internal_1_1RDF_html_a5335e5e27b91cf34bc2fa3674ea33a14"><div class="ttname"><a href="namespaceROOT_1_1Internal_1_1RDF.html#a5335e5e27b91cf34bc2fa3674ea33a14">ROOT::Internal::RDF::ConvertRegexToColumns</a></div><div class="ttdeci">ColumnNames_t ConvertRegexToColumns(const RDFInternal::RBookedCustomColumns &amp;customColumns, TTree *tree, ROOT::RDF::RDataSource *dataSource, std::string_view columnNameRegexp, std::string_view callerName)</div><div class="ttdef"><b>Definition:</b> <a href="RDFInterfaceUtils_8cxx_source.html#l00145">RDFInterfaceUtils.cxx:145</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:09:48 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
