<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tutorials/dataframe/df019_Cache.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_dae94d947109c4ff2350491a13de44c3.html">dataframe</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<div class="title">df019_Cache.py File Reference<div class="ingroups"><a class="el" href="group__Tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorial__dataframe.html">Data Frame tutorials</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacedf019__Cache"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedf019__Cache.html">df019_Cache</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p> <a href="http://nbviewer.jupyter.org/url/root.cern.ch/doc/master/notebooks/df019_Cache.py.nbconvert.ipynb" target="_blank"><img src= notebook.gif alt="View in nbviewer" style="height:1em" ></a> <a href="https://cern.ch/swanserver/cgi-bin/go?projurl=https://root.cern.ch/doc/master/notebooks/df019_Cache.py.nbconvert.ipynb" target="_blank"><img src="http://swanserver.web.cern.ch/swanserver/images/badge_swan_white_150.png"  alt="Open in SWAN" style="height:1em" ></a>  This tutorial shows how the content of a data frame can be cached in memory in form of a data frame. </p>
<p>The content of the columns is stored in memory in contiguous slabs of memory and is "ready to use", i.e. no <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a> IO operation is performed.</p>
<p>Creating a cached data frame storing all of its content deserialised and uncompressed in memory is particularly useful when dealing with datasets of a moderate size (small enough to fit the RAM) over which several explorative loops need to be performed at as fast as possible. In addition, caching can be useful when no file on disk needs to be created as a side effect of checkpointing part of the analysis.</p>
<p>All steps in the caching are lazy, i.e. the cached data frame is actually filled only when the event loop is triggered on it.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="keyword">import</span> ROOT</div><div class="line">RDataFrame = ROOT.ROOT.RDataFrame</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line"><span class="comment"># We create a data frame on top of the hsimple example</span></div><div class="line">hsimplePath = os.path.join(str(ROOT.gROOT.GetTutorialDir().Data()), <span class="stringliteral">&quot;hsimple.root&quot;</span>)</div><div class="line">df = RDataFrame(<span class="stringliteral">&quot;ntuple&quot;</span>, hsimplePath)</div><div class="line"></div><div class="line"><span class="comment">#We apply a simple cut and define a new column</span></div><div class="line">df_cut = df.Filter(<span class="stringliteral">&quot;py &gt; 0.f&quot;</span>)\</div><div class="line">           .Define(<span class="stringliteral">&quot;px_plus_py&quot;</span>, <span class="stringliteral">&quot;px + py&quot;</span>)</div><div class="line"></div><div class="line"><span class="comment"># We cache the content of the dataset. Nothing has happened yet: the work to accomplish</span></div><div class="line"><span class="comment"># has been described.</span></div><div class="line">df_cached = df_cut.Cache()</div><div class="line"></div><div class="line">h = df_cached.Histo1D(<span class="stringliteral">&quot;px_plus_py&quot;</span>)</div><div class="line"></div><div class="line"><span class="comment"># Now the event loop on the cached dataset is triggered. This event triggers the loop</span></div><div class="line"><span class="comment"># on the `df` data frame lazily.</span></div><div class="line">h.Draw()</div></div><!-- fragment --> <div class="image">
<img src="pict1_df019_Cache.py.png" alt="pict1_df019_Cache.py.png" width="700"/>
</div>
<dl class="section date"><dt>Date</dt><dd>June 2018 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Danilo Piparo </dd></dl>

<p class="definition">Definition in file <a class="el" href="df019__Cache_8py_source.html">df019_Cache.py</a>.</p>
</div></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:10:05 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
