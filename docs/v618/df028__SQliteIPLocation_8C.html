<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tutorials/dataframe/df028_SQliteIPLocation.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_dae94d947109c4ff2350491a13de44c3.html">dataframe</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">df028_SQliteIPLocation.C File Reference<div class="ingroups"><a class="el" href="group__Tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorial__dataframe.html">Data Frame tutorials</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p> <a href="http://nbviewer.jupyter.org/url/root.cern.ch/doc/master/notebooks/df028_SQliteIPLocation.C.nbconvert.ipynb" target="_blank"><img src= notebook.gif alt="View in nbviewer" style="height:1em" ></a> <a href="https://cern.ch/swanserver/cgi-bin/go?projurl=https://root.cern.ch/doc/master/notebooks/df028_SQliteIPLocation.C.nbconvert.ipynb" target="_blank"><img src="http://swanserver.web.cern.ch/swanserver/images/badge_swan_white_150.png"  alt="Open in SWAN" style="height:1em" ></a>  Plot the location of <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a> downloads reading a remote sqlite3 file with RSqliteDS. </p>
<p>The world map is hold by a <a class="el" href="classTH2Poly.html" title="2D Histogram with Polygonal Bins ">TH2Poly</a> histogram which, after filling, will show the world wide dispersion of <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a>'s users. To histogram filling, is done thanks to a lambda expression having as input parameters the two columns of the database: "IPLongitude' - for the longitude, and the
"IPLatitude" - for the latitude. The data related to the latitude and the longitude has been provided from the log files storing the users IP. This product includes GeoLite2 data created by MaxMind, available from <a href="http://www.maxmind.com">http://www.maxmind.com</a>.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="keywordtype">void</span> df028_SQliteIPLocation() {</div><div class="line"></div><div class="line">   <span class="keyword">auto</span> rdf = <a class="code" href="namespaceROOT_1_1RDF.html#aff87b83bb5ff044e14070ab03add83a8">ROOT::RDF::MakeSqliteDataFrame</a>( <span class="stringliteral">&quot;http://root.cern/files/root_download_stats.sqlite&quot;</span>, <span class="stringliteral">&quot;SELECT * FROM accesslog;&quot;</span> );</div><div class="line"></div><div class="line">   <span class="keyword">auto</span> <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a> = <a class="code" href="classTFile.html#aec5f3fae0774aabfc615ebb4b00fe5e0">TFile::Open</a>(<span class="stringliteral">&quot;http://root.cern.ch/files/WM.root&quot;</span>);</div><div class="line">   <span class="keyword">auto</span> worldMap = <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>-&gt;Get&lt;<a class="code" href="classTH2Poly.html">TH2Poly</a>&gt;(<span class="stringliteral">&quot;WMUSA&quot;</span>);</div><div class="line"></div><div class="line">   <span class="keyword">auto</span> fillIPLocation = [&amp;worldMap] ( <span class="keyword">const</span> std::string &amp;sLongitude, <span class="keyword">const</span> std::string &amp;sLatitude ) {</div><div class="line">      <span class="keywordflow">if</span> (!( sLongitude == <span class="stringliteral">&quot;&quot;</span> ) &amp;&amp; !( sLatitude == <span class="stringliteral">&quot;&quot;</span> )) {</div><div class="line">         <span class="keyword">auto</span> latitude = std::stof(sLatitude);</div><div class="line">         <span class="keyword">auto</span> longitude = std::stof(sLongitude);</div><div class="line">         worldMap-&gt;Fill(longitude, latitude);</div><div class="line">      }</div><div class="line">   };</div><div class="line"></div><div class="line">   rdf.Foreach( fillIPLocation, { <span class="stringliteral">&quot;IPLongitude&quot;</span>, <span class="stringliteral">&quot;IPLatitude&quot;</span> } );</div><div class="line"></div><div class="line">   <span class="keyword">auto</span> worldMapCanvas = <span class="keyword">new</span> <a class="code" href="classTCanvas.html">TCanvas</a>();</div><div class="line">   worldMapCanvas-&gt;SetLogz();</div><div class="line">   worldMap-&gt;SetTitle(<span class="stringliteral">&quot;ROOT Downloads per Location (GitHub exluded);Longitude;Latitude&quot;</span>);</div><div class="line">   worldMap-&gt;DrawClone(<span class="stringliteral">&quot;colz&quot;</span>);</div><div class="line">}</div></div><!-- fragment --> <div class="image">
<img src="pict1_df028_SQliteIPLocation.C.png" alt="pict1_df028_SQliteIPLocation.C.png" width="700"/>
</div>
<dl class="section date"><dt>Date</dt><dd>August 2018 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Alexandra-Maria Dobrescu </dd></dl>

<p class="definition">Definition in file <a class="el" href="df028__SQliteIPLocation_8C_source.html">df028_SQliteIPLocation.C</a>.</p>
</div></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:10:06 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
