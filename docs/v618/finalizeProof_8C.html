<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tutorials/proof/finalizeProof.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_29929efa3f3fb53099f7c28d426fadac.html">proof</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">finalizeProof.C File Reference<div class="ingroups"><a class="el" href="group__Tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorial__proof.html">Proof tutorials</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Macro to finalize queries run with the macro tutorials/runProof . </p>
<p>This macro uses an existing PROOF session or starts one at the indicated URL. In the case non existing PROOF session is found and no URL is given, the macro tries to start a local PROOF session.</p>
<p>To run the macro:</p>
<p>root[] .L <a class="el" href="finalizeProof_8C.html" title="Macro to finalize queries run with the macro tutorials/runProof . ">proof/finalizeProof.C</a>+ root[] finalizeProof("&lt;analysis&gt;")</p>
<p>See <a class="el" href="runProof_8C.html" title="Macro to run examples of analysis on PROOF, corresponding to the TSelector implementations found unde...">runProof.C</a> for the analysis currently available.</p>
<p>The macro looks for the last completed queries for the chosen analysis and asks which one to finalize. If there is only available, it finalizes it without asking. All queries are considered for this, both those run synchronously and those run asynchronously, e.g. runProof("h1(asyn)").</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;Getline.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TChain_8h.html">TChain.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TEnv_8h.html">TEnv.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TProof_8h.html">TProof.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TString_8h.html">TString.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TDrawFeedback_8h.html">TDrawFeedback.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TList_8h.html">TList.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TQueryResult_8h.html">TQueryResult.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="TObjArray_8h.html">TObjArray.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="getProof_8C.html">getProof.C</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> finalizeProof(<span class="keyword">const</span> <span class="keywordtype">char</span> *what = <span class="stringliteral">&quot;simple&quot;</span>,</div><div class="line">                   <span class="keyword">const</span> <span class="keywordtype">char</span> *url = <span class="stringliteral">&quot;proof://localhost:11093&quot;</span>,</div><div class="line">                   <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nwrks = -1)</div><div class="line">{</div><div class="line"></div><div class="line">   <span class="comment">// Temp dir for PROOF tutorials</span></div><div class="line">   <a class="code" href="classTString.html">TString</a> tutdir = <a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/.proof-tutorial&quot;</span>, <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#af7a7b489e21d45c75948e1cc58bdf73c">TempDirectory</a>());</div><div class="line">   <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(tutdir)) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: creating the temporary directory&quot;</span></div><div class="line">                <span class="stringliteral">&quot; for the tutorial (%s) ... &quot;</span>, tutdir.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a5bd72c8b0e57e0aed8b418adf4650475">mkdir</a>(tutdir, <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>) != 0) {</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not assert / create the temporary directory&quot;</span></div><div class="line">                <span class="stringliteral">&quot; for the tutorial (%s)&quot;</span>, tutdir.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Get / Attach-to the PROOF Session</span></div><div class="line">   <a class="code" href="classTProof.html">TProof</a> *proof = getProof(url, nwrks, tutdir.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>(), <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> (!proof) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not start/attach a PROOF session&quot;</span>);</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Get the last session run for the tutorial</span></div><div class="line">   <a class="code" href="classTObjArray.html">TObjArray</a> *qt = <span class="keyword">new</span> <a class="code" href="classTObjArray.html">TObjArray</a>();</div><div class="line">   <a class="code" href="classTString.html">TString</a> lasttag;</div><div class="line">   <a class="code" href="classTString.html">TString</a> proofsessions(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/sessions&quot;</span>,tutdir.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>()));</div><div class="line">   <span class="comment">// Save tag of the used session</span></div><div class="line">   FILE *fs = fopen(proofsessions.Data(), <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> (!fs) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: could not create files for sessions tags&quot;</span>);</div><div class="line">   } <span class="keywordflow">else</span> {</div><div class="line">      <span class="keywordtype">char</span> <a class="code" href="entrylistblock__figure1_8C.html#a4fa05b1f00fcde100685cc887554b93b">line</a>[1024];</div><div class="line">      <span class="keywordflow">while</span> (fgets(<a class="code" href="entrylistblock__figure1_8C.html#a4fa05b1f00fcde100685cc887554b93b">line</a>, <span class="keyword">sizeof</span>(<a class="code" href="entrylistblock__figure1_8C.html#a4fa05b1f00fcde100685cc887554b93b">line</a>), fs)) {</div><div class="line">         <span class="keywordtype">int</span> <a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a> = strlen(<a class="code" href="entrylistblock__figure1_8C.html#a4fa05b1f00fcde100685cc887554b93b">line</a>);</div><div class="line">         <span class="keywordflow">if</span> (<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a> &lt;= 0) <span class="keywordflow">continue</span>;</div><div class="line">         <span class="keywordflow">if</span> (strncmp(<a class="code" href="entrylistblock__figure1_8C.html#a4fa05b1f00fcde100685cc887554b93b">line</a>,<span class="stringliteral">&quot;session-&quot;</span>,strlen(<span class="stringliteral">&quot;session-&quot;</span>))) <span class="keywordflow">continue</span>;</div><div class="line">         <span class="keywordflow">if</span> (<a class="code" href="entrylistblock__figure1_8C.html#a4fa05b1f00fcde100685cc887554b93b">line</a>[<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a>-1] == <span class="charliteral">&#39;\n&#39;</span>) <a class="code" href="entrylistblock__figure1_8C.html#a4fa05b1f00fcde100685cc887554b93b">line</a>[<a class="code" href="textangle_8C.html#a3359d7f1aa9fe2f8bc884b02020e8d20">l</a>-1] = 0;</div><div class="line">         lasttag = <a class="code" href="entrylistblock__figure1_8C.html#a4fa05b1f00fcde100685cc887554b93b">line</a>;</div><div class="line">         qt-&gt;<a class="code" href="classTObjArray.html#a4beeca357c8924263b853454cd81fdca">Add</a>(<span class="keyword">new</span> <a class="code" href="classTObjString.html">TObjString</a>(lasttag.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>()));</div><div class="line">      }</div><div class="line">      fclose(fs);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Retrieve the list of available query results</span></div><div class="line">   <a class="code" href="classTList.html">TList</a> *ql = proof-&gt;<a class="code" href="classTProof.html#adbea620d93dab177fa4278d4133285a7">GetListOfQueries</a>(<span class="stringliteral">&quot;A&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> (!ql || ql-&gt;<a class="code" href="classTCollection.html#af0ca154693eeb1e9d9a0ff3a8d43e466">GetSize</a>() &lt;= 0) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: no queries to be finalized&quot;</span>);</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line">   ql-&gt;<a class="code" href="classTCollection.html#a5042809c66ac99a80aa549491bf2d28a">Print</a>();</div><div class="line"></div><div class="line">   <span class="comment">// Where is the code to run</span></div><div class="line">   <span class="keywordtype">char</span> *rootbin = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#ac6c754bc2ea46cf01473c6b3439200f4">Which</a>(<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a4ae57a039e0d61296c386e89d6e4dce8">Getenv</a>(<span class="stringliteral">&quot;PATH&quot;</span>), <span class="stringliteral">&quot;root.exe&quot;</span>, <a class="code" href="TSystem_8h.html#a5ea512734402935ca6e68723f6398862a4e0f29e362565d37458b75699a46e53f">kExecutePermission</a>);</div><div class="line">   <span class="keywordflow">if</span> (!rootbin) {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: root.exe not found: please check the environment!&quot;</span>);</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line">   <a class="code" href="classTString.html">TString</a> rootsys(<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a3c3721acfad243abf862010d2fecb1a5">DirName</a>(rootbin));</div><div class="line">   rootsys = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a3c3721acfad243abf862010d2fecb1a5">DirName</a>(rootsys);</div><div class="line">   <a class="code" href="classTString.html">TString</a> tutorials(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/tutorials&quot;</span>, rootsys.Data()));</div><div class="line">   <span class="keyword">delete</span>[] rootbin;</div><div class="line"></div><div class="line">   <span class="comment">// Create feedback displayer</span></div><div class="line">   <a class="code" href="classTDrawFeedback.html">TDrawFeedback</a> fb(proof);</div><div class="line"></div><div class="line">   <span class="comment">// Parse &#39;what&#39;; it is in the form &#39;analysis(arg1,arg2,...)&#39;</span></div><div class="line">   <a class="code" href="classTString.html">TString</a> args(what);</div><div class="line">   args.ReplaceAll(<span class="stringliteral">&quot;(&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);</div><div class="line">   args.ReplaceAll(<span class="stringliteral">&quot;)&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);</div><div class="line">   args.ReplaceAll(<span class="stringliteral">&quot;,&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);</div><div class="line">   <a class="code" href="RtypesCore_8h.html#a649fe0f43fc2d393d99c5d39848f96b9">Ssiz_t</a> from = 0;</div><div class="line">   <a class="code" href="classTString.html">TString</a> act, tok;</div><div class="line">   <span class="keywordflow">if</span> (!args.Tokenize(act, from, <span class="stringliteral">&quot; &quot;</span>)) {</div><div class="line">      <span class="comment">// Cannot continue</span></div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: action not found: check your arguments (%s)&quot;</span>, what);</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line"></div><div class="line">   <a class="code" href="classTObjArray.html">TObjArray</a> *qa = <span class="keyword">new</span> <a class="code" href="classTObjArray.html">TObjArray</a>();</div><div class="line">   <a class="code" href="classTString.html">TString</a> sel;</div><div class="line">   <span class="comment">// Action</span></div><div class="line">   <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;simple&quot;</span>) {</div><div class="line">      sel = <span class="stringliteral">&quot;ProofSimple&quot;</span>;</div><div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;h1&quot;</span>) {</div><div class="line">      sel = <span class="stringliteral">&quot;h1analysis&quot;</span>;</div><div class="line">   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (act == <span class="stringliteral">&quot;pythia8&quot;</span>) {</div><div class="line">      sel = <span class="stringliteral">&quot;ProofPythia&quot;</span>;</div><div class="line">   } <span class="keywordflow">else</span> {</div><div class="line">      <span class="comment">// Do not know what to run</span></div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: unknown tutorial: %s&quot;</span>, what);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Get last completed queries for the chosen analysis</span></div><div class="line">   <a class="code" href="classTString.html">TString</a> ref;</div><div class="line">   <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> nt = qt-&gt;<a class="code" href="classTObjArray.html#a1c693a2a044dc24f08778e035de69d5f">GetEntriesFast</a>();</div><div class="line">   <span class="keywordflow">while</span> (ref.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>() &amp;&amp; nt--) {</div><div class="line">      lasttag = ((<a class="code" href="classTObjString.html">TObjString</a> *)(qt-&gt;<a class="code" href="classTObjArray.html#afc2e394af1d0f104a67f6cd7f9043c12">At</a>(nt)))-&gt;GetName();</div><div class="line">      <span class="keywordflow">if</span> (!lasttag.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>())</div><div class="line">         <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: checking session: %s&quot;</span>, lasttag.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <a class="code" href="classTIter.html">TIter</a> nxq(ql);</div><div class="line">      <a class="code" href="classTQueryResult.html">TQueryResult</a> *qr = 0;</div><div class="line">      <span class="keywordflow">while</span> ((qr = (<a class="code" href="classTQueryResult.html">TQueryResult</a> *)nxq())) {</div><div class="line">         <span class="keywordflow">if</span> (qr-&gt;<a class="code" href="classTQueryResult.html#a5a93aeb06a0d4cb85b4fcfef26559097">IsDone</a>() &amp;&amp; !lasttag.<a class="code" href="classTString.html#a1c6df9c54f961185b784a2221c8d6d9d">CompareTo</a>(qr-&gt;<a class="code" href="classTNamed.html#a8114b395bf7e0d1af609ab6a700b52ee">GetTitle</a>()) &amp;&amp;</div><div class="line">                           !sel.<a class="code" href="classTString.html#a1c6df9c54f961185b784a2221c8d6d9d">CompareTo</a>(qr-&gt;<a class="code" href="classTQueryResult.html#a76dc2077592baef2eb4b4a76c48deab4">GetSelecImp</a>()-&gt;<a class="code" href="classTNamed.html#a8114b395bf7e0d1af609ab6a700b52ee">GetTitle</a>())) {</div><div class="line">            <a class="code" href="classTString.html">TString</a> <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a> = <a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s:%s&quot;</span>,qr-&gt;<a class="code" href="classTNamed.html#a8114b395bf7e0d1af609ab6a700b52ee">GetTitle</a>(),qr-&gt;<a class="code" href="classTNamed.html#a42e3142d30b08fed1b07216d4a36b090">GetName</a>());</div><div class="line">            qa-&gt;<a class="code" href="classTObjArray.html#a4beeca357c8924263b853454cd81fdca">Add</a>(<span class="keyword">new</span> <a class="code" href="classTObjString.html">TObjString</a>(<a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>.Data()));</div><div class="line">         }</div><div class="line">      }</div><div class="line">      <span class="keywordflow">if</span> (qa-&gt;<a class="code" href="classTObjArray.html#a1c693a2a044dc24f08778e035de69d5f">GetEntriesFast</a>() &gt; 0) {</div><div class="line">         <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> qn = 0;</div><div class="line">         <span class="keywordflow">if</span> (qa-&gt;<a class="code" href="classTObjArray.html#a1c693a2a044dc24f08778e035de69d5f">GetEntriesFast</a>() &gt; 1) {</div><div class="line">            <span class="comment">// Query the client which query to finalize</span></div><div class="line">            <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;finalizeProof: queries completed for analysis &#39;%s&#39;&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">            <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> k = 0; k &lt; qa-&gt;<a class="code" href="classTObjArray.html#a1c693a2a044dc24f08778e035de69d5f">GetEntriesFast</a>(); k++) {</div><div class="line">               <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot; [%d] %s&quot;</span>, k, ((<a class="code" href="classTObjString.html">TObjString</a> *)(qa-&gt;<a class="code" href="classTObjArray.html#afc2e394af1d0f104a67f6cd7f9043c12">At</a>(k)))-&gt;GetName());</div><div class="line">            }</div><div class="line">            <a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> ask = <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>;</div><div class="line">            <span class="keywordflow">while</span> (ask) {</div><div class="line">               <span class="keywordtype">char</span> *answer = Getline(<span class="stringliteral">&quot;finalizeProof: enter the one you would like to finalize? [0] &quot;</span>);</div><div class="line">               <span class="keywordflow">if</span> (answer) {</div><div class="line">                  <span class="keywordflow">if</span> (answer[0] == <span class="charliteral">&#39;Q&#39;</span> || answer[0] == <span class="charliteral">&#39;q&#39;</span>) {</div><div class="line">                     ask = <a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>;</div><div class="line">                     <span class="keywordflow">return</span>;</div><div class="line">                  }</div><div class="line">                  <a class="code" href="classTString.html">TString</a> sn(answer);</div><div class="line">                  sn.Remove(sn.Length()-1);</div><div class="line">                  <span class="keywordflow">if</span> (sn.IsDigit()) {</div><div class="line">                     qn = sn.Atoi();</div><div class="line">                     <span class="keywordflow">if</span> (qn &gt;= 0 &amp;&amp; qn &lt; qa-&gt;GetEntriesFast()) {</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line">                     } <span class="keywordflow">else</span> {</div><div class="line">                        <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;finalizeProof: choice must be in [0,%d] (&#39;Q&#39; to quit)&quot;</span>,</div><div class="line">                              qa-&gt;<a class="code" href="classTObjArray.html#a1c693a2a044dc24f08778e035de69d5f">GetEntriesFast</a>()-1);</div><div class="line">                     }</div><div class="line">                  } <span class="keywordflow">else</span> {</div><div class="line">                     <span class="keywordflow">if</span> (sn.IsNull()) {</div><div class="line">                        qn = 0;</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line">                     } <span class="keywordflow">else</span> {</div><div class="line">                        <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;finalizeProof: choice must be a number in [0,%d] (&#39;Q&#39; to quit) (%s)&quot;</span>,</div><div class="line">                              qa-&gt;<a class="code" href="classTObjArray.html#a1c693a2a044dc24f08778e035de69d5f">GetEntriesFast</a>()-1,  sn.Data());</div><div class="line">                     }</div><div class="line">                  }</div><div class="line">               }</div><div class="line">            }</div><div class="line">         }</div><div class="line">         ref = ((<a class="code" href="classTObjString.html">TObjString</a> *)(qa-&gt;<a class="code" href="classTObjArray.html#afc2e394af1d0f104a67f6cd7f9043c12">At</a>(qn)))-&gt;GetName();</div><div class="line">      }</div><div class="line">   }</div><div class="line">   <span class="keywordflow">if</span> (!ref.<a class="code" href="classTString.html#a85b40d2d4ea6be7b6d3881145bb178b8">IsNull</a>()) {</div><div class="line">      <span class="comment">// Retrieve</span></div><div class="line">      proof-&gt;<a class="code" href="classTProof.html#a95407afa179f7097ddd9cf7ff78b0281">Retrieve</a>(ref);</div><div class="line">      <span class="comment">// Finalize</span></div><div class="line">      proof-&gt;<a class="code" href="classTProof.html#aa99407f5cbd8d49257eea7a7d85613d3">Finalize</a>(ref);</div><div class="line">   } <span class="keywordflow">else</span> {</div><div class="line">      <a class="code" href="TString_8h.html#a9f6318c6fe972e019d46777b7026dce2">Printf</a>(<span class="stringliteral">&quot;runProof: no queries to be finalized for analysis &#39;%s&#39;&quot;</span>, act.<a class="code" href="classTString.html#a7e4ada8bf2407b461f3ee58b71c5959f">Data</a>());</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line">}</div></div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Gerardo Ganis </dd></dl>

<p class="definition">Definition in file <a class="el" href="finalizeProof_8C_source.html">finalizeProof.C</a>.</p>
</div></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:10:20 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
