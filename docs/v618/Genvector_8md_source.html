<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: math/genvector/doc/Genvector.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">math/genvector/doc/Genvector.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Genvector_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;/**</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  \page Vector  Generic Vector for 2, 3 and 4 Dimensions</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;**GenVector**, is a new package intended to prepresent vectors and their operations and transformations, such as rotations and Lorentz transformations, in 2, 3 and 4 dimensions. The 2D and 3D space are used to describe the geometry vectors and points, while the 4D space-time is used for physics vectors representing relativistic particles.   </div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;These 2D,3D and 4D vectors are different from vectors of the Linear Algebra package which describe generic N-dimensional vectors. Similar functionality is currently provided by the CLHEP [Vector](http://proj-clhep.web.cern.ch/proj-clhep/manual/UserGuide/VectorDefs/index.html) and [Geometry](http://www.hep.phy.cam.ac.uk/lhcb/doc/CLHEP/1.9.1.2/html/namespaceHepGeom.html) packages and the %ROOT [Physics Vector](http://root.cern.ch/root/html/PHYSICS_Index.html) classes (Tvector2, TVector3 and TLorentzVector). It is also re-uses concepts and ideas from the CMS [Common Vector package](http://lcgapp.cern.ch/doxygen/SEAL/snapshot/html/dir_000007.html).</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;In contrast to CLHEP or the %ROOT physics libraries, GenVector provides class templates for modelling the vectors. There is a user-controlled freedom on how the vector is internally represented. This is expressed by a choice of coordinate system which is supplied as a template prameter when the vector is constructed. Furthermore each coordinate system is itself a template, so that the user can specify the underlying scalar type.   </div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;In more detail, the main characteristics of GenVector are:</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;*   **Optimal runtime performances**</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    We try to minimize any overhead in the run-time performances. We have deliberatly avoided to have any virtual function and even virtual destructors in the classes and have inlined as much as</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    possible all the functions. For this reason, we have chosen to use template classes to implement the GenVector concepts instead of abstract or base classes and virtual functions.</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;*   **Points and Vector concept**</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    Mathematically vectors and points are two distinct concepts. They have different transformations, like vectors only rotate while points rotate and translate. You can add two vectors but not two points and the difference between two points is a vector. We then distinguish for the 2 and 3 dimensional case, between points and vectors, modeling them with different classes:</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    *   ROOT::Math::DisplacementVector3D and ROOT::Math::DisplacementVector2D template classes describing 3 and 2 component direction and magnitude vectors, not rooted at any particular point;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    *   ROOT::Math::PositionVector3D template and ROOT::Math::PositionVector3D class modeling the points in 3 and 2 dimensions</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    For the 4D space-time vectors, we use the same class to model them, ROOT::Math::LorentzVector, since we have recognized a limited needs for modeling the functionality of a 4D point.</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;*   **Generic Coordinate System**</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    The vector classes are based on a generic type of coordinate system, expressed as a template parameter of the class. Various classes exist to describe the various coordinates systems:</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    *   **2D coordinate system** classes:</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        *   ROOT::Math::Cartesian2D, based on _(x,y)_;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        *   ROOT::Math::Polar2D, based on _(r, phi)_;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    *   **3D coordinate system** classes:</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        *   ROOT::Math::Cartesian3D, based on _(x,y,z)_;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        *   ROOT::Math::Polar3D, based on _(r, theta, phi)_;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        *   ROOT::Math::Cylindrical3D, based on _(rho, z, phi)_</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        *   ROOT::Math::CylindricalEta3D, based on _(rho, eta, phi)_, where eta is the pseudo-rapidity;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    *   **4D coordinate system** classes:</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        *   ROOT::Math::PxPyPzE4D, based on based on _(px,py,pz,E)_;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        *   ROOT::Math::PxPyPzM4D, based on based on _(px,py,pz,M)_;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        *   ROOT::Math::PtEtaPhiE4D, based on based on _(pt,eta,phi,E)_;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        *   ROOT::Math::PtEtaPhiM4D, based on based on _(pt,eta,phi,M)_;The angle _theta_ is defined between [0,PI] and _phi_ between [-PI,PI]. The angles are expressed in radians.   </div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    Users can define the Vectors according to the coordinate type which is most efficient for their use. Transformations between the various coordinate systems are available through copy constructors or the assignment _(=)_ operator.   </div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    For maximum flexibility and minimize in some use case memory allocation, the coordinate system classes are templated on the scalar type. To avoid exposing templated parameter to the users, typedefs are defined for all types of vectors based an double&#39;s.   </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    See the \ref Vector3DPage &quot;3D Vector&quot;, \ref Point3DPage &quot;3D Point&quot;, \ref Vector2DPage &quot;2D Vector and Point&quot;, and \ref LorentzVectorPage &quot;LorentzVector&quot; classes for all the possible types of vector classes which can be constructed by the user with the available coordinate system types.</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;*   **Coordinate System Tag**</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    The 2D and 3D points and vector classes can be associated to a tag defining the coordinate system. This can be used to distinguish between vectors of different coordinate systems like global or local vectors. The coordinate system tag is a template parameter of the ROOT::Math::DisplacementVector3D (and ROOT::Math::DisplacementVector2D) and ROOT::Math::PositionVector3D (and ROOT::Math::PositionVector2D) classes. A default tag, ROOT::Math::DefaultCoordinateSystemTag, exists for users who don&#39;t need this functionality.</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;*   **Transformations**</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    The transformations are modeled using simple (non-template) classes, using double as the scalar type to avoid too large numerical errors. The transformations are grouped in Rotations (in 3 dimensions), Lorentz transformations and Poincarre transformations, which are Translation/Rotation combinations. Each group has several members which may model physically equivalent trasformations but with different internal representations. Transformation classes can operate on all type of vectors using the _operator()_ or the _operator *_ and the transformations can also be combined via the _operator *_. In more detail the transformations available are:</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    *   **3D Rotations classes**</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        *   Rotation described by a 3x3 matrix (ROOT::Math::Rotation3D)</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        *   Rotation described by Euler angles, Goldstein representation, (ROOT::Math::EulerAngles)</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        *   Rotation described by 3-2-1 Euler angles (ROOT::Math::RotationZYX)</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        *   Rotation described by a direction axis and an angle (ROOT::Math::AxisAngle)</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        *   Rotation described by a quaternion (ROOT::Math::Quaternion)</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        *   Optimized rotation around the x (ROOT::Math::RotationX), y (ROOT::Math::RotationY) and z (ROOT::Math::RotationZ) axis and described by just one angle.</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    *   **3D Transformation**</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        We describe the transformations defined as a composition between a rotation and a translation using the class ROOT::Math::Transform3D. It is important to note that transformations act differently on Vectors and Points. The Vectors only rotate, therefore when applying a transfomation (rotation + translation) on a Vector, only the rotation operates while the translation has no effect. The interface for Transformations is similar to the one used in the CLHEP Geometry package (class [Transform3D](http://www.hep.phy.cam.ac.uk/lhcb/doc/CLHEP/1.9.1.2/html/classHepGeom_1_1Transform3D.html)).  </div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;         A class, ROOT::Math::Translation3D. describe transformations consisting of only a translation. Translation can be applied only on Points, applying them on Vector objects has no effect. The Translation3D class can be combined with both ROOT::Math::Rotation3D and ROOT::Math::Transform3D using the _operator *_ to obtain a new transformation as an instance of a Transform3D class.</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    *   **Lorentz Rotation**</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        *   Generic Lorentz Rotation described by a 4x4 matrix containing a 3D rotation part and a boost part (class ROOT::Math::LorentzRotation)</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        *   A pure boost in an arbitrary direction and described by a 4x4 symmetric matrix or 10 numbers (class ROOT::Math::Boost)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        *   Boost along the x (ROOT::Math::BoostX), y (ROOT::Math::BoostY) and z (ROOT::Math::BoostZ) axis.</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;Other main characteristics of the GenVector classes are:</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;*   **Minimal Vector classes interface**</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    We have tried to keep the interface to a minimal level:</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    *   We try to avoid methods providing the same functionality but with different names ( like getX() and x() ).</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    *   we minimize the number of setter methods, avoiding methods which can be ambigous and set the Vector classes in an inconsistent state. We provide only methods which set all the coordinates at the same time or set only the coordinates on which the vector is based, for example SetX() for a cartesian vector. We then enforce the use of transformations as rotations or translations (additions) for modifying the vector contents.</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    *   The majority of the functionality, which is present in the CLHEP package, involving operations on two vectors, is moved in separated helper functions (see ROOT::Math::VectorUtil). This has the advantage that the basic interface will remain more stable with time while additional functions can be added easily.</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;*   **Naming Convention**</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    As part of %ROOT, the GenVector package adheres to the prescribed ROOT naming convention, with some (approved) exceptions, as described here:</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    *   Every class and function is in the _ROOT::Math_ namespace</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    *   Member function names starts with upper-case letter, apart some exceptions (see later CLHEP compatibility)</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;*   **Compatibility with CLHEP Vector classes**</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    *   For backward compatibility with CLHEP the Vector classes can be constructed easly from a CLHEP HepVector or HepLorentzVector, by using a template constructor, which requires only that the classes implement the accessors x(), y() and z() (and t() for the 4D).</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    *   we have decided to provide Vector member function with the same naming convention as CLHEP for the most used functions like _x()_, _y()_ and _z()_.</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;*   **Connection to Linear Algebra package**</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    In some use cases, like in track reconstruction, it is needed to use the content of the vector and rotation classes in conjunction with linear algebra operations. We prefer to avoid any direct dependency to any Linear algebra package. However, we provide some hooks to convert to and from Linear Algebra classes.</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    *   The vector and the transformation classes have methods which allow to get and set their data members (like SetCoordinates and GetCoordinates ) passing either a generic iterator or a pointer to a contigous set of data, like a C array. This allows a easy connection with linear algebra package which allows creation of matrices using C arrays (like the %ROOT TMatrix classes) or iterators ( SMatrix classes )</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    *   Multiplication between Linear Algebra matrix and GenVector Vectors is possible by using the template free functions ROOT::Math::VectorUtil::Mult. This works for any Linear Algebra matrix which implement the _operator(i,j)_ and with first matrix element at _i=j=0_.</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;## Example of Usage</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;*   \ref Vector3DPage</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;*   \ref Point3DPage</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;*   \ref LorentzVectorPage</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;*   \ref TransformPage</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;*   ROOT::Math::VectorUtil (Helper functions)</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;*   \ref ExtUsagePage</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;## Packaging</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;This GenVector package is part of the \ref index and it can be built as an independent package. A tar file can be downloaded from [here](../GenVector.tar.gz).</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;## Additional Documentation</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;A more detailed description of all the GenVector classes is available in this [document](http://seal.cern.ch/documents/mathlib/GenVector.pdf).</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;## References</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;1.  CLHEP Vector package ([User guide](http://proj-clhep.web.cern.ch/proj-clhep/manual/UserGuide/VectorDefs/index.html) and [reference doc](http://www.hep.phy.cam.ac.uk/lhcb/doc/CLHEP/1.9.1.2/html/dir_000027.html))</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;2.  [CLHEP Geometry package](http://www.hep.phy.cam.ac.uk/lhcb/doc/CLHEP/1.9.1.2/html/namespaceH)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;3.  [%ROOT Physics Vector classes](http://root.cern.ch/root/html/PHYSICS_Index.html)</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;4.  [CMS Vector package](http://lcgapp.cern.ch/doxygen/SEAL/snapshot/html/dir_000007.html)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;* * *</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;*/</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div></div><!-- fragment --></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:09:26 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
