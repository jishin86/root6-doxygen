<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>ROOT: tutorials/eve/alice_esd.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table bgcolor="#346295" cellspacing="0" cellpadding="0">
  <tr>
    <td> <img style="height:90px" alt="Logo" src="rootlogo.gif"/> </td>
    <td valign="middle" style="color: #FFFFFF" nowrap="nowrap"><font size="6">ROOT</font> &#160; 6.18/03 <br> Reference Guide </td>
    <td style="width:100%"> </td>
  </tr>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_390bebfc0e935dac5980ae97b01b24b7.html">eve</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">alice_esd.C File Reference<div class="ingroups"><a class="el" href="group__Tutorials.html">Tutorials</a> &raquo; <a class="el" href="group__tutorial__eve.html">Event display tutorials</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Complex example showing ALICE ESD track visualization. </p>
<p><a class="el" href="alice__esd_8C.html" title="Complex example showing ALICE ESD track visualization. ">alice_esd.C</a> - a simple event-display for ALICE ESD tracks and clusters</p>
<p>Only standard <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a> is used to process the ALICE ESD files.</p>
<p>No ALICE code is needed, only four simple coordinate-transformation functions declared in this macro.</p>
<p>A simple geometry of 10KB, extracted from the full TGeo-geometry, is used to outline the central detectors of ALICE.</p>
<p>All files are access from the web by using the "CACHEREAD" option.</p>
<h3>Automatic building of ALICE ESD class declarations and dictionaries.</h3>
<p>ALICE ESD is a <a class="el" href="classTTree.html" title="A TTree represents a columnar dataset. ">TTree</a> containing tracks and other event-related information with one entry per event. All these classes are part of the AliROOT offline framework and are not available to standard <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a>.</p>
<p>To be able to access the event data in a natural way, by using data-members of classes and object containers, the header files and class dictionaries are automatically generated from the <a class="el" href="classTStreamerInfo.html" title=" Describe Streamer information for one class version ">TStreamerInfo</a> classes stored in the ESD file by using the <a class="el" href="classTFile.html#a5fdd58dba517dd7b70b43332295e529d" title="Generate source code necessary to access the objects stored in the file. ">TFile::MakeProject()</a> function. The header files and a shared library is created in the aliesd/ directory and can be loaded dynamically into the <a class="el" href="namespaceROOT.html" title="Namespace for new ROOT classes and functions. ">ROOT</a> session.</p>
<p>See the run_alice_esd.C macro.</p>
<h3>Creation of simple GUI for event navigation.</h3>
<p>Most common use of the event-display is to browse through a collection of events. Thus a simple GUI allowing this is created in the function make_gui().</p>
<p>Eve uses the configurable ROOT-browser as its main window and so we create an extra tab in the left working area of the browser and provide backward/forward buttons.</p>
<h3>Event-navigation functions.</h3>
<p>As this is a simple macro, we store the information about the current event in the global variable 'Int_t esd_event_id'. The functions for event-navigation simply modify this variable and call the load_event() function which does the following:</p><ol type="1">
<li>drop the old visualization objects;</li>
<li>retrieve given event from the ESD tree;</li>
<li>call alice_esd_read() function to create visualization objects for the new event.</li>
</ol>
<h3>Reading of ALICE data and creation of visualization objects.</h3>
<p>This is performed in alice_esd_read() function, with the following steps:</p><ol type="1">
<li>create the track container object - <a class="el" href="classTEveTrackList.html" title="A list of tracks supporting change of common attributes and selection based on track parameters...">TEveTrackList</a>;</li>
<li>iterate over the ESD tracks, create <a class="el" href="classTEveTrack.html" title="Visual representation of a track. ">TEveTrack</a> objects and append them to the container;</li>
<li>instruct the container to extrapolate the tracks and set their visual attributes.</li>
</ol>
<div class="image">
<img src="eve_alice_esd.png" alt="eve_alice_esd.png"/>
</div>
 <div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#ifndef __RUN_ALICE_ESD__</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> alice_esd()</div><div class="line">{</div><div class="line">   <a class="code" href="classTString.html">TString</a> dir = <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a8e22dfd65a6fecd7dd57200eaff20c18">UnixPathName</a>(__FILE__);</div><div class="line">   dir.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;alice_esd.C&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">   dir.<a class="code" href="classTString.html#a5072f18275913ec22cfa6f7c0c70c557">ReplaceAll</a>(<span class="stringliteral">&quot;/./&quot;</span>,<span class="stringliteral">&quot;/&quot;</span>);</div><div class="line">   <a class="code" href="TROOT_8h.html#a851dd11b3478372a25ba6eff6dcfa5b1">gROOT</a>-&gt;LoadMacro(dir +<span class="stringliteral">&quot;MultiView.C+&quot;</span>);</div><div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span>* esd_file_name = <span class="stringliteral">&quot;http://root.cern.ch/files/alice_ESDs.root&quot;</span>;</div><div class="line">   <a class="code" href="classTFile.html#ab80316ea9ebda1357aefeb83eb45aab2">TFile::SetCacheFileDir</a>(<span class="stringliteral">&quot;.&quot;</span>);</div><div class="line">   <a class="code" href="classTString.html">TString</a> lib(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;aliesd/aliesd.%s&quot;</span>, <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#aeb1116c5cb16d850742c8184bf773637">GetSoExt</a>()));</div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (<a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a849c28ea0dd3b3aa3310a4d447c7b21a">AccessPathName</a>(lib, <a class="code" href="TSystem_8h.html#a5ea512734402935ca6e68723f6398862a55bd40b14de9b4c0e5d0a5b5ad6fb537">kReadPermission</a>)) {</div><div class="line">      <a class="code" href="classTFile.html">TFile</a>* <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a> = <a class="code" href="classTFile.html#aec5f3fae0774aabfc615ebb4b00fe5e0">TFile::Open</a>(esd_file_name, <span class="stringliteral">&quot;CACHEREAD&quot;</span>);</div><div class="line">      <span class="keywordflow">if</span> (<a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a> == 0) <span class="keywordflow">return</span>;</div><div class="line">      <a class="code" href="classTTree.html">TTree</a> *<a class="code" href="namespacetree.html">tree</a> = (<a class="code" href="classTTree.html">TTree</a>*) <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>-&gt;Get(<span class="stringliteral">&quot;esdTree&quot;</span>);</div><div class="line">      <a class="code" href="namespacetree.html">tree</a>-&gt;SetBranchStatus (<span class="stringliteral">&quot;ESDfriend*&quot;</span>, 1);</div><div class="line">      <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>-&gt;MakeProject(<span class="stringliteral">&quot;aliesd&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>, <span class="stringliteral">&quot;++&quot;</span>);</div><div class="line">      <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>-&gt;Close();</div><div class="line">      <span class="keyword">delete</span> <a class="code" href="RSha256_8hxx.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>;</div><div class="line">   }</div><div class="line">   <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a6ff4c4c6cd8a75a199a30dd94359f205">Load</a>(lib);</div><div class="line">   <a class="code" href="TROOT_8h.html#a851dd11b3478372a25ba6eff6dcfa5b1">gROOT</a>-&gt;ProcessLine(<span class="stringliteral">&quot;#define __RUN_ALICE_ESD__ 1&quot;</span>);</div><div class="line">   <a class="code" href="TROOT_8h.html#a851dd11b3478372a25ba6eff6dcfa5b1">gROOT</a>-&gt;ProcessLine(<span class="stringliteral">&quot;#include \&quot;alice_esd.C\&quot;&quot;</span>);</div><div class="line">   <a class="code" href="TROOT_8h.html#a851dd11b3478372a25ba6eff6dcfa5b1">gROOT</a>-&gt;ProcessLine(<span class="stringliteral">&quot;run_alice_esd()&quot;</span>);</div><div class="line">   <a class="code" href="TROOT_8h.html#a851dd11b3478372a25ba6eff6dcfa5b1">gROOT</a>-&gt;ProcessLine(<span class="stringliteral">&quot;#undef __RUN_ALICE_ESD__&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#else</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="alice__esd__html__summary_8C.html">alice_esd_html_summary.C</a>&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// Forward declarations.</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>AliESDEvent;</div><div class="line"><span class="keyword">class </span>AliESDfriend;</div><div class="line"><span class="keyword">class </span>AliESDtrack;</div><div class="line"><span class="keyword">class </span>AliExternalTrackParam;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span>       make_gui();</div><div class="line"><span class="keywordtype">void</span>       load_event();</div><div class="line"></div><div class="line"><span class="keywordtype">void</span>       alice_esd_read();</div><div class="line"><a class="code" href="classTEveTrack.html">TEveTrack</a>* esd_make_track(<a class="code" href="classTEveTrackPropagator.html">TEveTrackPropagator</a>* trkProp, <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> index,</div><div class="line">                          AliESDtrack* at,</div><div class="line">                          AliExternalTrackParam* tp=0);</div><div class="line"><a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a>     trackIsOn(AliESDtrack* t, <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> mask);</div><div class="line"><span class="keywordtype">void</span>       trackGetPos(AliExternalTrackParam* tp, <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[3]);</div><div class="line"><span class="keywordtype">void</span>       trackGetMomentum(AliExternalTrackParam* tp, <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> p[3]);</div><div class="line"><a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a>   trackGetP(AliExternalTrackParam* tp);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// Configuration and global variables.</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* esd_file_name = <span class="stringliteral">&quot;http://root.cern.ch/files/alice_ESDs.root&quot;</span>;</div><div class="line"><span class="comment">// Temporarily disable reading of ESD friend.</span></div><div class="line"><span class="comment">// There seems to be no way to get it working without AliRoot.</span></div><div class="line"><span class="comment">// const char* esd_friends_file_name =</span></div><div class="line"><span class="comment">//       &quot;http://root.cern.ch/files/alice_ESDfriends.root&quot;;</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* esd_friends_file_name = 0;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* esd_geom_file_name =</div><div class="line">   <span class="stringliteral">&quot;http://root.cern.ch/files/alice_ESDgeometry.root&quot;</span>;</div><div class="line"></div><div class="line"><span class="comment">// For testing</span></div><div class="line"><span class="comment">// const char* esd_file_name         = &quot;AliESDs.root&quot;;</span></div><div class="line"><span class="comment">// const char* esd_friends_file_name = &quot;AliESDfriends.root&quot;;</span></div><div class="line"></div><div class="line"><a class="code" href="classTFile.html">TFile</a> *esd_file          = 0;</div><div class="line"><a class="code" href="classTFile.html">TFile</a> *esd_friends_file  = 0;</div><div class="line"></div><div class="line"><a class="code" href="classTTree.html">TTree</a> *esd_tree          = 0;</div><div class="line"></div><div class="line">AliESDEvent  *esd        = 0;</div><div class="line"><a class="code" href="classTList.html">TList</a>        *esd_objs   = 0;</div><div class="line">AliESDfriend *esd_friend = 0;</div><div class="line"></div><div class="line"><a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> esd_event_id       = 0; <span class="comment">// Current event id.</span></div><div class="line"></div><div class="line"><a class="code" href="classTEveTrackList.html">TEveTrackList</a> *gTrackList = 0;</div><div class="line"></div><div class="line"><a class="code" href="classTEveGeoShape.html">TEveGeoShape</a> *gGeomGentle = 0;</div><div class="line"></div><div class="line"><span class="comment">// Implemented in MultiView.C</span></div><div class="line"><span class="keyword">class </span>MultiView;</div><div class="line">MultiView* gMultiView = 0;</div><div class="line"></div><div class="line"><span class="comment">/******************************************************************************/</span></div><div class="line"><span class="comment">// Initialization and steering functions</span></div><div class="line"><span class="comment">/******************************************************************************/</span></div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> run_alice_esd()</div><div class="line">{</div><div class="line">   <span class="comment">// Main function, initializes the application.</span></div><div class="line">   <span class="comment">//</span></div><div class="line">   <span class="comment">// 1. Load the auto-generated library holding ESD classes and</span></div><div class="line">   <span class="comment">//    ESD dictionaries.</span></div><div class="line">   <span class="comment">// 2. Open ESD data-files.</span></div><div class="line">   <span class="comment">// 3. Load cartoon geometry.</span></div><div class="line">   <span class="comment">// 4. Spawn simple GUI.</span></div><div class="line">   <span class="comment">// 5. Load first event.</span></div><div class="line"></div><div class="line">   <span class="keyword">const</span> <a class="code" href="classTString.html">TString</a> weh(<span class="stringliteral">&quot;alice_esd()&quot;</span>);</div><div class="line"></div><div class="line">   <a class="code" href="classTFile.html#ab80316ea9ebda1357aefeb83eb45aab2">TFile::SetCacheFileDir</a>(<span class="stringliteral">&quot;.&quot;</span>);</div><div class="line"></div><div class="line">   printf(<span class="stringliteral">&quot;*** Opening ESD ***\n&quot;</span>);</div><div class="line">   esd_file = <a class="code" href="classTFile.html#aec5f3fae0774aabfc615ebb4b00fe5e0">TFile::Open</a>(esd_file_name, <span class="stringliteral">&quot;CACHEREAD&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> (!esd_file)</div><div class="line">      <span class="keywordflow">return</span>;</div><div class="line"></div><div class="line">   esd_tree = (<a class="code" href="classTTree.html">TTree</a>*)       esd_file-&gt;<a class="code" href="classTDirectoryFile.html#a9472af8730c1694905dbee5c4aa9b65f">Get</a>(<span class="stringliteral">&quot;esdTree&quot;</span>);</div><div class="line">   esd      = (AliESDEvent*) esd_tree-&gt;<a class="code" href="classTTree.html#aa5e47eecedc5979c7f73217accdb7679">GetUserInfo</a>()-&gt;<a class="code" href="classTList.html#a85c8734ab131c0db5f68c724e47496a7">FindObject</a>(<span class="stringliteral">&quot;AliESDEvent&quot;</span>);</div><div class="line">   esd_objs = esd-&gt;fESDObjects;</div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (esd_friends_file_name != 0)</div><div class="line">   {</div><div class="line">      printf(<span class="stringliteral">&quot;*** Opening ESD-friends ***\n&quot;</span>);</div><div class="line">      esd_friends_file = <a class="code" href="classTFile.html#aec5f3fae0774aabfc615ebb4b00fe5e0">TFile::Open</a>(esd_friends_file_name, <span class="stringliteral">&quot;CACHEREAD&quot;</span>);</div><div class="line">      <span class="keywordflow">if</span> (!esd_friends_file)</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line"></div><div class="line">      esd_tree-&gt;<a class="code" href="classTTree.html#aeca53bcd4482de1d883d259df6663920">SetBranchStatus</a> (<span class="stringliteral">&quot;ESDfriend*&quot;</span>, 1);</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Set the branch addresses.</span></div><div class="line">   {</div><div class="line">      <a class="code" href="classTIter.html">TIter</a> next(esd_objs);</div><div class="line">      <a class="code" href="classTObject.html">TObject</a> *el;</div><div class="line">      <span class="keywordflow">while</span> ((el = (<a class="code" href="classTNamed.html">TNamed</a>*)next()))</div><div class="line">      {</div><div class="line">         <a class="code" href="classTString.html">TString</a> bname(el-&gt;<a class="code" href="classTObject.html#a1d6abd2708ecd7578d7ff03c07037bd1">GetName</a>());</div><div class="line">         <span class="keywordflow">if</span> (bname == <span class="stringliteral">&quot;AliESDfriend&quot;</span>)</div><div class="line">         {</div><div class="line">            <span class="comment">// AliESDfriend needs special treatment.</span></div><div class="line">            <a class="code" href="classTBranch.html">TBranch</a> *br = esd_tree-&gt;<a class="code" href="classTTree.html#a0b37fd6f19f6ef70b37c36b64242c2f4">GetBranch</a>(<span class="stringliteral">&quot;ESDfriend.&quot;</span>);</div><div class="line">            br-&gt;<a class="code" href="classTBranch.html#a63e019ffc9c53ba249bd729da6a78657">SetAddress</a>(esd_objs-&gt;<a class="code" href="classTList.html#a33ab7a06ac016608d7d2e7088b3888bd">GetObjectRef</a>(el));</div><div class="line">         }</div><div class="line">         <span class="keywordflow">else</span></div><div class="line">         {</div><div class="line">            <a class="code" href="classTBranch.html">TBranch</a> *br = esd_tree-&gt;<a class="code" href="classTTree.html#a0b37fd6f19f6ef70b37c36b64242c2f4">GetBranch</a>(bname);</div><div class="line">            <span class="keywordflow">if</span> (br)</div><div class="line">            {</div><div class="line">               br-&gt;<a class="code" href="classTBranch.html#a63e019ffc9c53ba249bd729da6a78657">SetAddress</a>(esd_objs-&gt;<a class="code" href="classTList.html#a33ab7a06ac016608d7d2e7088b3888bd">GetObjectRef</a>(el));</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">               br = esd_tree-&gt;<a class="code" href="classTTree.html#a0b37fd6f19f6ef70b37c36b64242c2f4">GetBranch</a>(bname + <span class="stringliteral">&quot;.&quot;</span>);</div><div class="line">               <span class="keywordflow">if</span> (br)</div><div class="line">               {</div><div class="line">                  br-&gt;<a class="code" href="classTBranch.html#a63e019ffc9c53ba249bd729da6a78657">SetAddress</a>(esd_objs-&gt;<a class="code" href="classTList.html#a33ab7a06ac016608d7d2e7088b3888bd">GetObjectRef</a>(el));</div><div class="line">               }</div><div class="line">               <span class="keywordflow">else</span></div><div class="line">               {</div><div class="line">                  <a class="code" href="TError_8h.html#ada27a9a7b710bd062829ec0a12341e09">Warning</a>(<span class="stringliteral">&quot;AliESDEvent::ReadFromTree() &quot;</span></div><div class="line">                          <span class="stringliteral">&quot;No Branch found with Name &#39;%s&#39; or &#39;%s.&#39;.&quot;</span>,</div><div class="line">                          bname.Data(),bname.Data());</div><div class="line">               }</div><div class="line">            }</div><div class="line">         }</div><div class="line">      }</div><div class="line">   }</div><div class="line"></div><div class="line"></div><div class="line">   <a class="code" href="classTEveManager.html#aa6e4691110e19723da1c49d47aacb897">TEveManager::Create</a>();</div><div class="line"></div><div class="line">   { <span class="comment">// Simple geometry</span></div><div class="line">      <a class="code" href="classTFile.html">TFile</a>* geom = <a class="code" href="classTFile.html#aec5f3fae0774aabfc615ebb4b00fe5e0">TFile::Open</a>(esd_geom_file_name, <span class="stringliteral">&quot;CACHEREAD&quot;</span>);</div><div class="line">      <span class="keywordflow">if</span> (!geom)</div><div class="line">         <span class="keywordflow">return</span>;</div><div class="line">      <a class="code" href="classTEveGeoShapeExtract.html">TEveGeoShapeExtract</a>* gse = (<a class="code" href="classTEveGeoShapeExtract.html">TEveGeoShapeExtract</a>*) geom-&gt;<a class="code" href="classTDirectoryFile.html#a9472af8730c1694905dbee5c4aa9b65f">Get</a>(<span class="stringliteral">&quot;Gentle&quot;</span>);</div><div class="line">      gGeomGentle = <a class="code" href="classTEveGeoShape.html#aecf0a45bf230677ed66a6ba8d5d25ad4">TEveGeoShape::ImportShapeExtract</a>(gse, 0);</div><div class="line">      geom-&gt;<a class="code" href="classTFile.html#a1eaf64e1803291558efe5d3238c661a4">Close</a>();</div><div class="line">      <span class="keyword">delete</span> geom;</div><div class="line">      <a class="code" href="TEveManager_8h.html#a9635e58baf23f72353b93ec8ddbed6c7">gEve</a>-&gt;<a class="code" href="classTEveManager.html#a432877d82d5e06c8dc081fbc751d88f8">AddGlobalElement</a>(gGeomGentle);</div><div class="line">   }</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">// Standard multi-view</span></div><div class="line">   <span class="comment">//=====================</span></div><div class="line"></div><div class="line">   gMultiView = <span class="keyword">new</span> MultiView;</div><div class="line"></div><div class="line">   gMultiView-&gt;ImportGeomRPhi(gGeomGentle);</div><div class="line">   gMultiView-&gt;ImportGeomRhoZ(gGeomGentle);</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">// HTML summary view</span></div><div class="line">   <span class="comment">//===================</span></div><div class="line"></div><div class="line">   fgHtmlSummary = <span class="keyword">new</span> HtmlSummary(<span class="stringliteral">&quot;Alice Event Display Summary Table&quot;</span>);</div><div class="line">   slot = <a class="code" href="classTEveWindow.html#aa7aee67f3d8610d254b981f27eba153a">TEveWindow::CreateWindowInTab</a>(<a class="code" href="TEveManager_8h.html#a9635e58baf23f72353b93ec8ddbed6c7">gEve</a>-&gt;<a class="code" href="classTEveManager.html#ad0baa4559931ee3537e227394998bb08">GetBrowser</a>()-&gt;<a class="code" href="classTRootBrowser.html#a942ac537f13115334716a00b3770ac99">GetTabRight</a>());</div><div class="line">   fgHtml = <span class="keyword">new</span> <a class="code" href="classTGHtml.html">TGHtml</a>(0, 100, 100);</div><div class="line">   <a class="code" href="classTEveWindowFrame.html">TEveWindowFrame</a> *wf = slot-&gt;MakeFrame(fgHtml);</div><div class="line">   fgHtml-&gt;MapSubwindows();</div><div class="line">   wf-&gt;<a class="code" href="classTEveElementList.html#ae92d9faf167af9fad013c041a99385d0">SetElementName</a>(<span class="stringliteral">&quot;Summary&quot;</span>);</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">// Final stuff</span></div><div class="line">   <span class="comment">//=============</span></div><div class="line"></div><div class="line">   <a class="code" href="TEveManager_8h.html#a9635e58baf23f72353b93ec8ddbed6c7">gEve</a>-&gt;<a class="code" href="classTEveManager.html#ad0baa4559931ee3537e227394998bb08">GetBrowser</a>()-&gt;<a class="code" href="classTRootBrowser.html#a942ac537f13115334716a00b3770ac99">GetTabRight</a>()-&gt;<a class="code" href="classTGTab.html#aa5e1ff8b43085a4f5ebeac092cef9a3f">SetTab</a>(1);</div><div class="line"></div><div class="line">   make_gui();</div><div class="line"></div><div class="line">   load_event();</div><div class="line"></div><div class="line">   <a class="code" href="TEveManager_8h.html#a9635e58baf23f72353b93ec8ddbed6c7">gEve</a>-&gt;<a class="code" href="classTEveManager.html#ac0ed0e77e815889a0efe3ad25406c8e8">Redraw3D</a>(<a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>); <span class="comment">// Reset camera after the first event has been shown.</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> load_event()</div><div class="line">{</div><div class="line">   <span class="comment">// Load event specified in global esd_event_id.</span></div><div class="line">   <span class="comment">// The contents of previous event are removed.</span></div><div class="line"></div><div class="line">   printf(<span class="stringliteral">&quot;Loading event %d.\n&quot;</span>, esd_event_id);</div><div class="line"></div><div class="line">   <a class="code" href="TEveManager_8h.html#a9635e58baf23f72353b93ec8ddbed6c7">gEve</a>-&gt;<a class="code" href="classTEveManager.html#a71386ceabffe8d611f51a7bc2dd403f7">GetViewers</a>()-&gt;<a class="code" href="classTEveViewerList.html#ae5d0e6989efe78935932e27b78ad5bf5">DeleteAnnotations</a>();</div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (gTrackList)</div><div class="line">      gTrackList-&gt;<a class="code" href="classTEveElement.html#aa07230283dcc2b0219340cfb6694fce6">DestroyElements</a>();</div><div class="line"></div><div class="line">   esd_tree-&gt;<a class="code" href="classTTree.html#a9fc48df5560fce1a2d63ecd1ac5b40cb">GetEntry</a>(esd_event_id);</div><div class="line">   <span class="comment">// esd_tree-&gt;Show();</span></div><div class="line"></div><div class="line">   alice_esd_read();</div><div class="line"></div><div class="line">   <a class="code" href="classTEveElement.html">TEveElement</a>* top = <a class="code" href="TEveManager_8h.html#a9635e58baf23f72353b93ec8ddbed6c7">gEve</a>-&gt;<a class="code" href="classTEveManager.html#a7fa6e18d686913467bd98d784970b12a">GetCurrentEvent</a>();</div><div class="line"></div><div class="line">   gMultiView-&gt;DestroyEventRPhi();</div><div class="line">   gMultiView-&gt;ImportEventRPhi(top);</div><div class="line"></div><div class="line">   gMultiView-&gt;DestroyEventRhoZ();</div><div class="line">   gMultiView-&gt;ImportEventRhoZ(top);</div><div class="line"></div><div class="line">   update_html_summary();</div><div class="line"></div><div class="line">   <a class="code" href="TEveManager_8h.html#a9635e58baf23f72353b93ec8ddbed6c7">gEve</a>-&gt;<a class="code" href="classTEveManager.html#ac0ed0e77e815889a0efe3ad25406c8e8">Redraw3D</a>(<a class="code" href="RtypesCore_8h.html#a7e568baf910535e8ffd438acb843434d">kFALSE</a>, <a class="code" href="RtypesCore_8h.html#af2f51d30ccd86e85be3e3e69793a86ef">kTRUE</a>);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/******************************************************************************/</span></div><div class="line"><span class="comment">// GUI</span></div><div class="line"><span class="comment">/******************************************************************************/</span></div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// EvNavHandler class is needed to connect GUI signals.</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>EvNavHandler</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">   <span class="keywordtype">void</span> Fwd()</div><div class="line">   {</div><div class="line">      <span class="keywordflow">if</span> (esd_event_id &lt; esd_tree-&gt;GetEntries() - 1) {</div><div class="line">         ++esd_event_id;</div><div class="line">         load_event();</div><div class="line">      } <span class="keywordflow">else</span> {</div><div class="line">         printf(<span class="stringliteral">&quot;Already at last event.\n&quot;</span>);</div><div class="line">      }</div><div class="line">   }</div><div class="line">   <span class="keywordtype">void</span> Bck()</div><div class="line">   {</div><div class="line">      <span class="keywordflow">if</span> (esd_event_id &gt; 0) {</div><div class="line">         --esd_event_id;</div><div class="line">         load_event();</div><div class="line">      } <span class="keywordflow">else</span> {</div><div class="line">         printf(<span class="stringliteral">&quot;Already at first event.\n&quot;</span>);</div><div class="line">      }</div><div class="line">   }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> make_gui()</div><div class="line">{</div><div class="line">   <span class="comment">// Create minimal GUI for event navigation.</span></div><div class="line"></div><div class="line">   <a class="code" href="classTEveBrowser.html">TEveBrowser</a>* browser = <a class="code" href="TEveManager_8h.html#a9635e58baf23f72353b93ec8ddbed6c7">gEve</a>-&gt;<a class="code" href="classTEveManager.html#ad0baa4559931ee3537e227394998bb08">GetBrowser</a>();</div><div class="line">   browser-&gt;<a class="code" href="classTRootBrowser.html#aa785e56f594292ed20318f0e85118d58">StartEmbedding</a>(<a class="code" href="classTRootBrowser.html#acd10155f9913484e65a88a8e3ab292fcad28c6d006dbce3c9dce63bcb79486fc7">TRootBrowser::kLeft</a>);</div><div class="line"></div><div class="line">   <a class="code" href="classTGMainFrame.html">TGMainFrame</a>* frmMain = <span class="keyword">new</span> <a class="code" href="classTGMainFrame.html">TGMainFrame</a>(<a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetRoot(), 1000, 600);</div><div class="line">   frmMain-&gt;<a class="code" href="classTGMainFrame.html#ae8f073557020c3f3eb5fc26b1e876530">SetWindowName</a>(<span class="stringliteral">&quot;XX GUI&quot;</span>);</div><div class="line">   frmMain-&gt;<a class="code" href="classTGCompositeFrame.html#a82e8b57783c514180a8bfed07f129115">SetCleanup</a>(<a class="code" href="TGFrame_8h.html#a344beaec9e0bcc5d5270b1785afe2853af8c760765936bc5a91472342e866b541">kDeepCleanup</a>);</div><div class="line"></div><div class="line">   <a class="code" href="classTGHorizontalFrame.html">TGHorizontalFrame</a>* hf = <span class="keyword">new</span> <a class="code" href="classTGHorizontalFrame.html">TGHorizontalFrame</a>(frmMain);</div><div class="line">   {</div><div class="line"></div><div class="line">      <a class="code" href="classTString.html">TString</a> icondir( <a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;%s/icons/&quot;</span>, <a class="code" href="TSystem_8h.html#ab7182c9ab5a9236e2bc1ed8b3fcb045f">gSystem</a>-&gt;<a class="code" href="classTSystem.html#a4ae57a039e0d61296c386e89d6e4dce8">Getenv</a>(<span class="stringliteral">&quot;ROOTSYS&quot;</span>)) );</div><div class="line">      <a class="code" href="classTGPictureButton.html">TGPictureButton</a>* <a class="code" href="TRolke_8cxx.html#a1a2354f40e332ad13673b70afc2c0dbf">b</a> = 0;</div><div class="line">      EvNavHandler    *fh = <span class="keyword">new</span> EvNavHandler;</div><div class="line"></div><div class="line">      <a class="code" href="TRolke_8cxx.html#a1a2354f40e332ad13673b70afc2c0dbf">b</a> = <span class="keyword">new</span> <a class="code" href="classTGPictureButton.html">TGPictureButton</a>(hf, <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(icondir+<span class="stringliteral">&quot;GoBack.gif&quot;</span>));</div><div class="line">      hf-&gt;<a class="code" href="classTGCompositeFrame.html#a51eed63e70fec280659423581cfb4f82">AddFrame</a>(<a class="code" href="TRolke_8cxx.html#a1a2354f40e332ad13673b70afc2c0dbf">b</a>);</div><div class="line">      <a class="code" href="TRolke_8cxx.html#a1a2354f40e332ad13673b70afc2c0dbf">b</a>-&gt;Connect(<span class="stringliteral">&quot;Clicked()&quot;</span>, <span class="stringliteral">&quot;EvNavHandler&quot;</span>, fh, <span class="stringliteral">&quot;Bck()&quot;</span>);</div><div class="line"></div><div class="line">      <a class="code" href="TRolke_8cxx.html#a1a2354f40e332ad13673b70afc2c0dbf">b</a> = <span class="keyword">new</span> <a class="code" href="classTGPictureButton.html">TGPictureButton</a>(hf, <a class="code" href="TGClient_8h.html#a21af9574bb18c0b2f45710c19fb02865">gClient</a>-&gt;GetPicture(icondir+<span class="stringliteral">&quot;GoForward.gif&quot;</span>));</div><div class="line">      hf-&gt;<a class="code" href="classTGCompositeFrame.html#a51eed63e70fec280659423581cfb4f82">AddFrame</a>(<a class="code" href="TRolke_8cxx.html#a1a2354f40e332ad13673b70afc2c0dbf">b</a>);</div><div class="line">      <a class="code" href="TRolke_8cxx.html#a1a2354f40e332ad13673b70afc2c0dbf">b</a>-&gt;Connect(<span class="stringliteral">&quot;Clicked()&quot;</span>, <span class="stringliteral">&quot;EvNavHandler&quot;</span>, fh, <span class="stringliteral">&quot;Fwd()&quot;</span>);</div><div class="line">   }</div><div class="line">   frmMain-&gt;<a class="code" href="classTGCompositeFrame.html#a51eed63e70fec280659423581cfb4f82">AddFrame</a>(hf);</div><div class="line"></div><div class="line">   frmMain-&gt;<a class="code" href="classTGCompositeFrame.html#aab9d6d0d836cb236ec3559bdab082e96">MapSubwindows</a>();</div><div class="line">   frmMain-&gt;<a class="code" href="classTGFrame.html#ab0088d5877d19ba727794da5650d3d16">Resize</a>();</div><div class="line">   frmMain-&gt;<a class="code" href="classTGFrame.html#ae74258e77ecbbfd9f38529387cbd4afb">MapWindow</a>();</div><div class="line"></div><div class="line">   browser-&gt;<a class="code" href="classTRootBrowser.html#a999a86271f0a40349da3187e3d6d0d77">StopEmbedding</a>();</div><div class="line">   browser-&gt;<a class="code" href="classTRootBrowser.html#a136bfa7ff697163ccdb054260eeb9e24">SetTabTitle</a>(<span class="stringliteral">&quot;Event Control&quot;</span>, 0);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/******************************************************************************/</span></div><div class="line"><span class="comment">// Code for reading AliESD and creating visualization objects</span></div><div class="line"><span class="comment">/******************************************************************************/</span></div><div class="line"></div><div class="line"><span class="keyword">enum</span> ESDTrackFlags {</div><div class="line">   kITSin=0x0001,kITSout=0x0002,kITSrefit=0x0004,kITSpid=0x0008,</div><div class="line">   kTPCin=0x0010,kTPCout=0x0020,kTPCrefit=0x0040,kTPCpid=0x0080,</div><div class="line">   kTRDin=0x0100,kTRDout=0x0200,kTRDrefit=0x0400,kTRDpid=0x0800,</div><div class="line">   kTOFin=0x1000,kTOFout=0x2000,kTOFrefit=0x4000,kTOFpid=0x8000,</div><div class="line">   kHMPIDpid=0x20000,</div><div class="line">   kEMCALmatch=0x40000,</div><div class="line">   kTRDbackup=0x80000,</div><div class="line">   kTRDStop=0x20000000,</div><div class="line">   kESDpid=0x40000000,</div><div class="line">   kTIME=0x80000000</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> alice_esd_read()</div><div class="line">{</div><div class="line">   <span class="comment">// Read tracks and associated clusters from current event.</span></div><div class="line"></div><div class="line">   AliESDRun    *esdrun = (AliESDRun*)    esd_objs-&gt;<a class="code" href="classTList.html#a85c8734ab131c0db5f68c724e47496a7">FindObject</a>(<span class="stringliteral">&quot;AliESDRun&quot;</span>);</div><div class="line">   <a class="code" href="classTClonesArray.html">TClonesArray</a> *<a class="code" href="tracks_8C.html#a42d1c24f70e3a57ddf678273ddbd2624">tracks</a> = (<a class="code" href="classTClonesArray.html">TClonesArray</a>*) esd_objs-&gt;<a class="code" href="classTList.html#a85c8734ab131c0db5f68c724e47496a7">FindObject</a>(<span class="stringliteral">&quot;Tracks&quot;</span>);</div><div class="line"></div><div class="line">   <span class="comment">// This needs further investigation. Clusters not shown.</span></div><div class="line">   <span class="comment">// esd_friend = (AliESDfriend*) esd_objs-&gt;FindObject(&quot;AliESDfriend&quot;);</span></div><div class="line">   <span class="comment">// printf(&quot;Friend %p, n_tracks:%d\n&quot;,</span></div><div class="line">   <span class="comment">//        esd_friend,</span></div><div class="line">   <span class="comment">//        esd_friend-&gt;fTracks.GetEntries());</span></div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (gTrackList == 0)</div><div class="line">   {</div><div class="line">      gTrackList = <span class="keyword">new</span> <a class="code" href="classTEveTrackList.html">TEveTrackList</a>(<span class="stringliteral">&quot;ESD Tracks&quot;</span>);</div><div class="line">      gTrackList-&gt;<a class="code" href="classTEveTrackList.html#ae769641d5e57bed87eaf5c73b96cf3f2">SetMainColor</a>(6);</div><div class="line">      gTrackList-&gt;<a class="code" href="classTEveTrackList.html#aa07e563a14ef904cbebedc975ad246d6">SetMarkerColor</a>(<a class="code" href="Rtypes_8h.html#ac31db05c6cb5891c704eae374f6926a8ac05df1f876c243e8f60ea03a9f866b80">kYellow</a>);</div><div class="line">      gTrackList-&gt;<a class="code" href="classTEveTrackList.html#a6740de283d9bb40bb334a4d5e530de88">SetMarkerStyle</a>(4);</div><div class="line">      gTrackList-&gt;<a class="code" href="classTEveTrackList.html#aff60a6cb3a915ab5f577d596650bf5b7">SetMarkerSize</a>(0.5);</div><div class="line"></div><div class="line">      <a class="code" href="TEveManager_8h.html#a9635e58baf23f72353b93ec8ddbed6c7">gEve</a>-&gt;<a class="code" href="classTEveManager.html#a31a8d4c969f2a3f8968318f36fd0d12a">AddElement</a>(gTrackList);</div><div class="line">   }</div><div class="line"></div><div class="line">   <a class="code" href="classTEveTrackPropagator.html">TEveTrackPropagator</a>* trkProp = gTrackList-&gt;<a class="code" href="classTEveTrackList.html#af89928c636d183955ffceff697dc8aef">GetPropagator</a>();</div><div class="line">   trkProp-&gt;<a class="code" href="classTEveTrackPropagator.html#afe3d2ba398c2389e5d2db75a2a1af56b">SetMagField</a>( 0.1 * esdrun-&gt;fMagneticField ); <span class="comment">// kGaus to Tesla</span></div><div class="line"></div><div class="line">   <span class="keywordflow">for</span> (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> <a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>=0; <a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>&lt;<a class="code" href="tracks_8C.html#a42d1c24f70e3a57ddf678273ddbd2624">tracks</a>-&gt;GetEntriesFast(); ++<a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>)</div><div class="line">   {</div><div class="line">      AliESDtrack* at = (AliESDtrack*) <a class="code" href="tracks_8C.html#a42d1c24f70e3a57ddf678273ddbd2624">tracks</a>-&gt;At(<a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>);</div><div class="line"></div><div class="line">      <span class="comment">// If ITS refit failed, take track parameters at inner TPC radius.</span></div><div class="line">      AliExternalTrackParam* tp = at;</div><div class="line">      <span class="keywordflow">if</span> (! trackIsOn(at, kITSrefit)) {</div><div class="line">         tp = at-&gt;fIp;</div><div class="line">      }</div><div class="line"></div><div class="line">      <a class="code" href="classTEveTrack.html">TEveTrack</a>* track = esd_make_track(trkProp, <a class="code" href="legend1_8C.html#a16daaa7b596941b23915a1ac1be5b42c">n</a>, at, tp);</div><div class="line">      track-&gt;<a class="code" href="classTEveTrack.html#a6e291849eaa6cc3b9169b0b413f56724">SetAttLineAttMarker</a>(gTrackList);</div><div class="line">      gTrackList-&gt;<a class="code" href="classTEveElement.html#a0cebd7a626c866741547e476264dc536">AddElement</a>(track);</div><div class="line"></div><div class="line">      <span class="comment">// This needs further investigation. Clusters not shown.</span></div><div class="line">      <span class="comment">// if (frnd)</span></div><div class="line">      <span class="comment">// {</span></div><div class="line">      <span class="comment">//     AliESDfriendTrack* ft = (AliESDfriendTrack*) frnd-&gt;fTracks-&gt;At(n);</span></div><div class="line">      <span class="comment">//     printf(&quot;%d friend = %p\n&quot;, ft);</span></div><div class="line">      <span class="comment">// }</span></div><div class="line">   }</div><div class="line"></div><div class="line">   gTrackList-&gt;<a class="code" href="classTEveTrackList.html#ad2cd9c06ebefd2d940bb2ca838bdb639">MakeTracks</a>();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><a class="code" href="classTEveTrack.html">TEveTrack</a>* esd_make_track(<a class="code" href="classTEveTrackPropagator.html">TEveTrackPropagator</a>*   trkProp,</div><div class="line">                          <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>                  index,</div><div class="line">                          AliESDtrack*           at,</div><div class="line">                          AliExternalTrackParam* tp)</div><div class="line">{</div><div class="line">   <span class="comment">// Helper function creating TEveTrack from AliESDtrack.</span></div><div class="line">   <span class="comment">//</span></div><div class="line">   <span class="comment">// Optionally specific track-parameters (e.g. at TPC entry point)</span></div><div class="line">   <span class="comment">// can be specified via the tp argument.</span></div><div class="line"></div><div class="line">   <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a>      pbuf[3], vbuf[3];</div><div class="line">   <a class="code" href="classTEveRecTrackT.html">TEveRecTrack</a>  rt;</div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (tp == 0) tp = at;</div><div class="line"></div><div class="line">   rt.<a class="code" href="classTEveRecTrackT.html#a7f029899453b2ff2eddc076a04f292f1">fLabel</a>  = at-&gt;fLabel;</div><div class="line">   rt.<a class="code" href="classTEveRecTrackT.html#a9d8a7d2bda36b69a3d1f8b35c0f6dfcc">fIndex</a>  = index;</div><div class="line">   rt.<a class="code" href="classTEveRecTrackT.html#a92d462270fd7687fa1842299d174a3a2">fStatus</a> = (<a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a>) at-&gt;fFlags;</div><div class="line">   rt.<a class="code" href="classTEveRecTrackT.html#a997b99d160a1b4f94057f8d9e48af8f6">fSign</a>   = (tp-&gt;fP[4] &gt; 0) ? 1 : -1;</div><div class="line"></div><div class="line">   trackGetPos(tp, vbuf);      rt.<a class="code" href="classTEveRecTrackT.html#a6e517a05b62a400916ff164b46a4adfe">fV</a>.<a class="code" href="classTEveVectorT.html#acd96d3bc3bd67e1d6cc484427e63a78e">Set</a>(vbuf);</div><div class="line">   trackGetMomentum(tp, pbuf); rt.<a class="code" href="classTEveRecTrackT.html#a1f51034641e1f55993410d32db100366">fP</a>.<a class="code" href="classTEveVectorT.html#acd96d3bc3bd67e1d6cc484427e63a78e">Set</a>(pbuf);</div><div class="line"></div><div class="line">   <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> ep = trackGetP(at);</div><div class="line">   <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> mc = 0.138; <span class="comment">// at-&gt;GetMass(); - Complicated function, requiring PID.</span></div><div class="line"></div><div class="line">   rt.<a class="code" href="classTEveRecTrackT.html#a1051ea05e4ac140fdd558313faa4c11f">fBeta</a> = ep/<a class="code" href="namespaceTMath.html#a9ea900c956031cb12057acf7c322b0fa">TMath::Sqrt</a>(ep*ep + mc*mc);</div><div class="line"></div><div class="line">   <a class="code" href="classTEveTrack.html">TEveTrack</a>* track = <span class="keyword">new</span> <a class="code" href="classTEveTrack.html">TEveTrack</a>(&amp;rt, trkProp);</div><div class="line">   track-&gt;<a class="code" href="classTPolyMarker3D.html#a8246b5bdb8e97e9f86c112d8132dbc99">SetName</a>(<a class="code" href="TString_8h.html#acf18c5b91421ac53e91bd96ebc07dea7">Form</a>(<span class="stringliteral">&quot;TEveTrack %d&quot;</span>, rt.<a class="code" href="classTEveRecTrackT.html#a9d8a7d2bda36b69a3d1f8b35c0f6dfcc">fIndex</a>));</div><div class="line">   track-&gt;<a class="code" href="classTEveTrack.html#aea6f0928d68832f6b64a0c378b53c772">SetStdTitle</a>();</div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> track;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><a class="code" href="RtypesCore_8h.html#aa101f564ac7b845ca31aec2fbc00ce97">Bool_t</a> trackIsOn(AliESDtrack* t, <a class="code" href="RtypesCore_8h.html#a3885b911a54b47a4e61671f45dd45d0b">Int_t</a> mask)</div><div class="line">{</div><div class="line">   <span class="comment">// Check is track-flag specified by mask are set.</span></div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> (t-&gt;fFlags &amp; mask) &gt; 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> trackGetPos(AliExternalTrackParam* tp, <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[3])</div><div class="line">{</div><div class="line">   <span class="comment">// Get global position of starting point of tp.</span></div><div class="line"></div><div class="line">  <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[0] = tp-&gt;fX; <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[1] = tp-&gt;fP[0]; <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[2] = tp-&gt;fP[1];</div><div class="line"></div><div class="line">  <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> cs=<a class="code" href="namespaceTMath.html#ab1f69ad10f560a26625fe5610ab321d2">TMath::Cos</a>(tp-&gt;fAlpha), sn=<a class="code" href="namespaceTMath.html#acb6531465af378f4e6e4a8a62f8c6a4d">TMath::Sin</a>(tp-&gt;fAlpha), <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>=<a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[0];</div><div class="line">  <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[0] = <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>*cs - <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[1]*sn; <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[1] = <a class="code" href="legend1_8C.html#a13c6713ae496caa8195647f76887f926">x</a>*sn + <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>[1]*cs;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><span class="keywordtype">void</span> trackGetMomentum(AliExternalTrackParam* tp, <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> p[3])</div><div class="line">{</div><div class="line">   <span class="comment">// Return global momentum vector of starting point of tp.</span></div><div class="line"></div><div class="line">   p[0] = tp-&gt;fP[4]; p[1] = tp-&gt;fP[2]; p[2] = tp-&gt;fP[3];</div><div class="line"></div><div class="line">   <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> <a class="code" href="entrylist__figure1_8C.html#ac0ca150b0e000602a104bc1ca56005e3">pt</a>=1./<a class="code" href="namespaceTMath.html#af682354cea223351f1306bf98a858dfd">TMath::Abs</a>(p[0]);</div><div class="line">   <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> cs=<a class="code" href="namespaceTMath.html#ab1f69ad10f560a26625fe5610ab321d2">TMath::Cos</a>(tp-&gt;fAlpha), sn=<a class="code" href="namespaceTMath.html#acb6531465af378f4e6e4a8a62f8c6a4d">TMath::Sin</a>(tp-&gt;fAlpha);</div><div class="line">   <a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>=<a class="code" href="namespaceTMath.html#a9ea900c956031cb12057acf7c322b0fa">TMath::Sqrt</a>(1 - p[1]*p[1]);</div><div class="line">   p[0]=<a class="code" href="entrylist__figure1_8C.html#ac0ca150b0e000602a104bc1ca56005e3">pt</a>*(<a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>*cs - p[1]*sn); p[1]=<a class="code" href="entrylist__figure1_8C.html#ac0ca150b0e000602a104bc1ca56005e3">pt</a>*(p[1]*cs + <a class="code" href="Object_8C.html#ac15f01b9c6407e1312dfc196ad4e0870">r</a>*sn); p[2]=<a class="code" href="entrylist__figure1_8C.html#ac0ca150b0e000602a104bc1ca56005e3">pt</a>*p[2];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//______________________________________________________________________________</span></div><div class="line"><a class="code" href="RtypesCore_8h.html#ab9b5334647b78ec4256db251e3ae1fc6">Double_t</a> trackGetP(AliExternalTrackParam* tp)</div><div class="line">{</div><div class="line">   <span class="comment">// Return magnitude of momentum of tp.</span></div><div class="line"></div><div class="line">   <span class="keywordflow">return</span> <a class="code" href="namespaceTMath.html#a9ea900c956031cb12057acf7c322b0fa">TMath::Sqrt</a>(1.+ tp-&gt;fP[3]*tp-&gt;fP[3])/<a class="code" href="namespaceTMath.html#af682354cea223351f1306bf98a858dfd">TMath::Abs</a>(tp-&gt;fP[4]);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div></div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Matevz Tadel </dd></dl>

<p class="definition">Definition in file <a class="el" href="alice__esd_8C_source.html">alice_esd.C</a>.</p>
</div></div><!-- contents -->
<html>
<body>
<div id="footer" style="background-color:#E5EBF3;">
<small>
<img class="footer" src="rootlogo_s.gif" alt="root"/></a>
ROOT 6.18/03 - Reference Guide Generated on Thu Aug 29 2019 04:10:06 (GVA Time) using Doxygen 1.8.14.
</small>
</div>
</body>
</html>
